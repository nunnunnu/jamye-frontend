(function(){"use strict";var e={1528:function(e,s,t){var a=t(5130),o=t(6768);const i={id:"app"},n={key:0,class:"loading-overlay"};function l(e,s,t,a,l,r){const c=(0,o.g2)("Navbar"),d=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(c,{isLogin:l.isLogin,currentGroup:l.currentGroup,onGroupSelect:r.groupSelect,unreadCount:l.unreadCount},null,8,["isLogin","currentGroup","onGroupSelect","unreadCount"]),(0,o.Lk)("div",i,[l.loading?((0,o.uX)(),(0,o.CE)("div",n,s[0]||(s[0]=[(0,o.Lk)("div",{class:"spinner"},null,-1)]))):(0,o.Q3)("",!0)]),((0,o.uX)(),(0,o.Wv)(d,{isLogin:l.isLogin,onIsLoginChange:r.isLoginChange,key:l.currentGroup,onGroupSelect:r.groupSelect},null,8,["isLogin","onIsLoginChange","onGroupSelect"]))],64)}var r=t(4232);const c={class:"navbar navbar-expand-lg navbar-light fixed-top shadow-sm",id:"mainNav"},d={class:"container px-5"},u={class:"collapse navbar-collapse",id:"navbarResponsive"},p={class:"navbar-nav ms-auto me-4 my-3 my-lg-0"},g={class:"nav-item"},m={key:0},h={key:0,class:"badge position-absolute"},k={key:1};function b(e,s,t,a,i,n){return(0,o.uX)(),(0,o.CE)("nav",c,[(0,o.Lk)("div",d,[(0,o.Lk)("a",{class:"navbar-brand fw-bold",href:"#page-top",onClick:s[0]||(s[0]=(...e)=>n.home&&n.home(...e))},"잼얘 가챠"),s[6]||(s[6]=(0,o.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,o.eW)(" Menu "),(0,o.Lk)("i",{class:"bi-list"})],-1)),(0,o.Lk)("div",u,[(0,o.Lk)("ul",p,[(0,o.Lk)("li",g,[(0,o.Lk)("a",{class:"nav-link me-lg-3",onClick:s[1]||(s[1]=(...e)=>n.groups&&n.groups(...e))},"그룹 정보")])]),t.isLogin?((0,o.uX)(),(0,o.CE)("div",m,[(0,o.Lk)("button",{type:"button",class:"btn position-relative",onClick:s[2]||(s[2]=(...e)=>n.notify&&n.notify(...e))},[s[5]||(s[5]=(0,o.eW)(" 쪽지함 ")),t.unreadCount>0?((0,o.uX)(),(0,o.CE)("span",h,(0,r.v_)(t.unreadCount),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{type:"button",class:"btn btn-light",onClick:s[3]||(s[3]=(...e)=>n.myPage&&n.myPage(...e))},"MY")])):(0,o.Q3)("",!0),t.isLogin?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",k,[(0,o.Lk)("button",{type:"button",class:"btn btn-primary",onClick:s[4]||(s[4]=(...e)=>n.login&&n.login(...e))},"로그인")]))])])])}t(4114);var y=t(8077),f={name:"NavBar",data(){return{groupInfos:null,stompClient:null}},props:{isLogin:{type:Boolean,required:!0},currentGroup:{require:!1},unreadCount:{type:Number}},setup(){(0,o.sV)((()=>{const e=document.body.querySelector("#mainNav");e&&new y.I6(document.body,{target:"#mainNav",offset:74});const s=document.body.querySelector(".navbar-toggler"),t=[].slice.call(document.querySelectorAll("#navbarResponsive .nav-link"));t.forEach((function(e){e.addEventListener("click",(()=>{"none"!==window.getComputedStyle(s).display&&s.click()}))}))}))},created(){},methods:{login(){this.$router.push("/login")},home(){this.$router.push("/")},myPage(){this.$router.push("/my")},groups(){this.$router.push("/groups")},notify(){this.$router.push("/notify-box")}}},v=t(1241);const C=(0,v.A)(f,[["render",b]]);var L=C,w=t(4373),S=t(973),I=t.p+"media/demo-screen.c9d07d68.mp4";const N={class:"masthead"},E={class:"container px-5"},q={key:0,class:"btn btn-dark dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},M={key:1,class:"btn btn-dark dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},U={class:"dropdown-menu"},R={key:0},X=["onClick"],$={key:1},A={class:"row gx-5 align-items-center"},P={class:"col-lg-6"},T={class:"mb-5 mb-lg-0 text-center text-lg-start"},x={key:0},O={key:1},G={key:0,class:"mt-3 d-flex justify-content-between"},J={class:"modal fade",id:"jamye-create",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},D={class:"modal-dialog modal-dialog-centered"},K={class:"modal-content"},B={class:"modal-header"},V={class:"modal-body"},F={class:"group-add"},Q={key:1,class:"mt-3 d-flex justify-content-between"};function j(e,s,t,i,n,l){const c=(0,o.g2)("inviteGroup"),d=(0,o.g2)("router-link"),u=(0,o.g2)("b-container");return(0,o.uX)(),(0,o.Wv)(u,null,{default:(0,o.k6)((()=>[(0,o.Lk)("header",N,[(0,o.Lk)("div",E,[t.isLogin?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"dropdown",onClick:s[0]||(s[0]=(...e)=>l.groupList&&l.groupList(...e))},[null==n.currentGroup?((0,o.uX)(),(0,o.CE)("a",q," 그룹을 선택해주세요. ")):((0,o.uX)(),(0,o.CE)("a",M,(0,r.v_)(n.currentGroup.name),1)),(0,o.Lk)("ul",U,[0!=n.groupInfos.length?((0,o.uX)(),(0,o.CE)("div",R,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.groupInfos,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.sequence},[(0,o.Lk)("li",null,[(0,o.Lk)("a",{class:"dropdown-item",href:"#",onClick:s=>l.groupSelect(e)},(0,r.v_)(e.name),9,X)])])))),128))])):((0,o.uX)(),(0,o.CE)("div",$,s[6]||(s[6]=[(0,o.Lk)("li",null,[(0,o.Lk)("a",null," 가입된 그룹이 없습니다 ")],-1)])))])])):(0,o.Q3)("",!0),(0,o.Lk)("div",A,[(0,o.Lk)("div",P,[(0,o.Lk)("div",T,[s[11]||(s[11]=(0,o.Lk)("h1",{class:"display-1 lh-1 mb-3",style:{"font-weight":"bold"}},"잼얘 가챠",-1)),s[12]||(s[12]=(0,o.Lk)("p",{class:"lead fw-normal text-muted mb-5"},[(0,o.eW)("Talk Funny(잼얘해봐)"),(0,o.Lk)("br"),(0,o.eW)("U GO GIRL(님선하세요 소녀여)")],-1)),this.isLogin?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",x,[(0,o.Lk)("button",{type:"button",class:"btn btn-dark",onClick:s[1]||(s[1]=(...e)=>l.login&&l.login(...e))},"로그인 후 뽑기")])),this.isLogin?((0,o.uX)(),(0,o.CE)("div",O,[null!=n.currentGroup?((0,o.uX)(),(0,o.CE)("div",G,[(0,o.Lk)("button",{type:"button",class:"btn btn-dark custom-btn",onClick:s[2]||(s[2]=(...e)=>l.luckyDraw&&l.luckyDraw(...e))},"뽑기"),s[9]||(s[9]=(0,o.Lk)("button",{type:"button",class:"btn btn-dark custom-btn","data-bs-toggle":"modal","data-bs-target":"#jamye-create"},"잼얘 넣기",-1)),(0,o.Lk)("div",J,[(0,o.Lk)("div",D,[(0,o.Lk)("div",K,[(0,o.Lk)("div",B,[s[7]||(s[7]=(0,o.Lk)("h1",{class:"modal-title fs-5",id:"jamye-create1"},"잼얘 생성",-1)),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:s[3]||(s[3]=(0,a.D$)((()=>{}),["stop"]))})]),(0,o.Lk)("div",V,[(0,o.Lk)("div",F,[(0,o.Lk)("button",{class:"btn btn-dark btn-block btn-group","data-bs-dismiss":"modal","aria-label":"Close",onClick:s[4]||(s[4]=e=>l.routerMessage())},"메세지 형식"),(0,o.Lk)("button",{class:"btn btn-dark btn-block btn-group","data-bs-dismiss":"modal","aria-label":"Close",onClick:s[5]||(s[5]=e=>l.routerPost())}," 게시글 형식 "),(0,o.bF)(c,{onInviteModalClose:e.inviteModalClose},null,8,["onInviteModalClose"])])])])])]),(0,o.bF)(d,{class:"btn btn-dark custom-btn",to:{name:"jamyeList"}},{default:(0,o.k6)((()=>s[8]||(s[8]=[(0,o.eW)("잼얘 목록")]))),_:1})])):(0,o.Q3)("",!0),null==n.currentGroup?((0,o.uX)(),(0,o.CE)("div",Q,s[10]||(s[10]=[(0,o.Lk)("button",{type:"button",class:"btn btn-dark custom-btn",disabled:""},"뽑기",-1),(0,o.Lk)("button",{type:"button",class:"btn btn-dark custom-btn",disabled:""},"잼얘 넣기",-1),(0,o.Lk)("button",{class:"btn btn-dark custom-btn",disabled:""},"잼얘 목록",-1)]))):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)])]),s[13]||(s[13]=(0,o.Lk)("div",{class:"col-lg-6"},[(0,o.Lk)("div",{class:"masthead-device-mockup"},[(0,o.Lk)("svg",{class:"circle",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},[(0,o.Lk)("defs",null,[(0,o.Lk)("linearGradient",{id:"circleGradient",gradientTransform:"rotate(45)"},[(0,o.Lk)("stop",{class:"gradient-start-color",offset:"0%"}),(0,o.Lk)("stop",{class:"gradient-end-color",offset:"100%"})])]),(0,o.Lk)("circle",{cx:"50",cy:"50",r:"50"})]),(0,o.Lk)("svg",{class:"shape-1 d-none d-sm-block",viewBox:"0 0 240.83 240.83",xmlns:"http://www.w3.org/2000/svg"},[(0,o.Lk)("rect",{x:"-32.54",y:"78.39",width:"305.92",height:"84.05",rx:"42.03",transform:"translate(120.42 -49.88) rotate(45)"}),(0,o.Lk)("rect",{x:"-32.54",y:"78.39",width:"305.92",height:"84.05",rx:"42.03",transform:"translate(-49.88 120.42) rotate(-45)"})]),(0,o.Lk)("svg",{class:"shape-2 d-none d-sm-block",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},[(0,o.Lk)("circle",{cx:"50",cy:"50",r:"50"})]),(0,o.Lk)("div",{class:"device-wrapper"},[(0,o.Lk)("div",{class:"device","data-device":"iPhoneX","data-orientation":"portrait","data-color":"black"},[(0,o.Lk)("div",{class:"screen bg-black"},[(0,o.Lk)("video",{muted:"muted",autoplay:"",loop:"",style:{"max-width":"100%",height:"100%"}},[(0,o.Lk)("source",{src:I,type:"video/mp4"})])])])])])],-1))])])])])),_:1})}var z={name:"MainHome",data(){return{currentGroup:null,groupInfos:{}}},methods:{login(){this.$router.push("/login")},routerMessage(){(0,o.dY)((()=>{this.$router.push({name:"messageCreate",params:{seq:this.currentGroup.groupSequence}})}))},routerPost(){(0,o.dY)((()=>{this.$router.push({name:"postCreate",params:{seq:this.currentGroup.groupSequence}})}))},groupSelect(e){this.$emit("groupSelect",e),this.$cookies.set("group",e)},groupList(){xc.get("/api/group/list",{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.groupInfos=e.data.data}))},luckyDraw(){const e=this.$cookies.get("group");if(null!=e){var s=e.groupSequence;xc.get("/api/post/lucky-draw/"+s,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{const s=e.data.data;"MSG"==s.type?this.$router.push("/jamye/message"+s.postSequence):this.$router.push("/jamye/board"+s.postSequence)})).catch((e=>{this.$toastr.error(e.response.data.message)}))}else this.$toastr.warning("잼얘를 뽑을 그룹을 먼저 선택해주세요.")}},props:{isLogin:{type:Boolean,required:!0}},created(){this.currentGroup=this.$cookies.get("group")}};const H=(0,v.A)(z,[["render",j]]);var W=H;const Z={class:"b-container"},Y={class:"input-group mb-3"},_={class:"input-group mb-3"},ee={class:"d-flex justify-content-between align-items-center"},se={class:"d-flex align-items-center"},te={class:"d-flex align-items-center"};function ae(e,s,t,i,n,l){return(0,o.uX)(),(0,o.CE)("div",Z,[s[11]||(s[11]=(0,o.Lk)("h2",{class:"title pb-4 mb-4 fst-italic border-bottom"},"로그인",-1)),(0,o.Lk)("form",{onSubmit:s[2]||(s[2]=(0,a.D$)(((...e)=>l.submitForm&&l.submitForm(...e)),["prevent"]))},[(0,o.Lk)("div",Y,[s[5]||(s[5]=(0,o.Lk)("span",{class:"input-group-text",id:"basic-addon1"},"아이디",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=e=>n.id=e),"aria-describedby":"basic-addon1"},null,512),[[a.Jo,n.id]])]),(0,o.Lk)("div",_,[s[6]||(s[6]=(0,o.Lk)("span",{class:"input-group-text",id:"basic-addon1"},"비밀번호",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=e=>n.pwd=e),"aria-describedby":"basic-addon1"},null,512),[[a.Jo,n.pwd]])]),s[7]||(s[7]=(0,o.Lk)("button",{type:"submit",class:"btn btn-dark btn-block"},"로그인",-1)),s[8]||(s[8]=(0,o.Lk)("br",null,null,-1))],32),(0,o.Lk)("div",ee,[(0,o.Lk)("div",se,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",id:"saveId",class:"form-check-input me-2","onUpdate:modelValue":s[3]||(s[3]=e=>n.idSave=e)},null,512),[[a.lH,n.idSave]]),s[9]||(s[9]=(0,o.Lk)("label",{for:"saveId"},"아이디 저장",-1))]),s[10]||(s[10]=(0,o.Lk)("div",null,[(0,o.Lk)("span",{class:"clickable-text mx-3"},"아이디 찾기"),(0,o.Lk)("span",{class:"clickable-text"},"비밀번호 찾기")],-1))]),(0,o.Lk)("div",te,[(0,o.Lk)("span",{class:"clickable-text join",onClick:s[4]||(s[4]=(...e)=>l.join&&l.join(...e))},"회원 가입")])])}var oe={name:"loginPage",data(){return{id:null,pwd:null,returnUrl:null,idSave:null}},created(){null!=this.$cookies.get("accessToken")&&(this.$toastr.warning("이미 로그인되었습니다."),this.$router.go(-1)),null!==this.$cookies.get("saveId")&&(this.idSave=!0,this.id=this.$cookies.get("saveId"))},methods:{submitForm(){if(null==this.id||void 0===this.id||null==this.pwd||void 0===this.pwd)this.$toastr.warning("아이디 혹은 비밀번호를 입력하지 않으셨습니다.");else{const e={id:this.id,password:this.pwd};w.A.post("/api/user/login",e).then((e=>{const s=e.data.data.token,t=s.accessToken,a=s.refreshToken;t&&a?(this.$cookies.set("accessToken",t),this.$cookies.set("refreshToken",a),this.$cookies.set("id",e.data.data.id),this.$cookies.set("sequence",e.data.data.sequence),this.idSave?this.$cookies.set("saveId",e.data.data.id):this.$cookies.remove("saveId"),this.$emit("isLoginChange",!0),this.id=null,this.pwd=null,null!=this.$cookies.get("beforePage")?(this.$cookies.remove("beforePage"),this.$router.push("/")):this.$router.go(-1)):this.$toastr.warning("토큰을 받아오는 데 실패했습니다.")})).catch((e=>{e.response?(this.$toastr.error(e.response.data.message),this.id=this.$cookies.get("saveId"),this.pwd=null):this.$toastr.warning("네트워크 오류가 발생했습니다. 다시 시도해 주세요.")}))}},join(){this.$router.push("/join")}}};const ie=(0,v.A)(oe,[["render",ae]]);var ne=ie,le="data:image/png;base64,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";const re={class:"b-container"},ce={class:"user-info-box"},de={class:"user-id"},ue={class:"mt-3 d-flex justify-content-between"},pe={class:"modal fade",id:"deleteUser",tabindex:"-1","aria-labelledby":"exampleModalLabel1","aria-hidden":"true"},ge={class:"modal-dialog modal-dialog-centered"},me={class:"modal-content"},he={class:"modal-body"},ke={class:"modal-footer"},be={class:"custom-btn"},ye={class:"group-header"},fe={key:0},ve={key:1},Ce={class:"group-info-box-container"},Le={class:"group-image"},we={key:0,src:le,class:"img-thumbnail",alt:"..."},Se=["src"],Ie={class:"group-details"},Ne={class:"group-name"},Ee={class:"small-font"},qe={class:"group-actions"},Me=["onClick"];function Ue(e,s,t,i,n,l){const c=(0,o.g2)("router-link"),d=(0,o.g2)("EditProfile"),u=(0,o.g2)("leave-group");return(0,o.uX)(),(0,o.CE)("div",re,[s[20]||(s[20]=(0,o.Lk)("h2",{class:"title"}," 사용자 정보 ",-1)),s[21]||(s[21]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("div",ce,[(0,o.Lk)("span",de,(0,r.v_)(n.id),1),(0,o.bF)(c,{class:"edit-btn",to:{name:"userInfoEdit"}},{default:(0,o.k6)((()=>s[5]||(s[5]=[(0,o.eW)("회원정보 수정")]))),_:1})]),(0,o.Lk)("div",ue,[s[16]||(s[16]=(0,o.Lk)("div",{class:"custom-btn"},[(0,o.Lk)("button",{class:"btn btn-dark btn-sm btn-block text-danger","data-bs-toggle":"modal","data-bs-target":"#deleteUser"},"회원탈퇴")],-1)),(0,o.Lk)("div",pe,[(0,o.Lk)("div",ge,[(0,o.Lk)("div",me,[s[15]||(s[15]=(0,o.Lk)("div",{class:"modal-header"}," 회원 탈퇴 ",-1)),(0,o.Lk)("div",he,[s[6]||(s[6]=(0,o.eW)(" 정말 탈퇴하시겠습니까?")),s[7]||(s[7]=(0,o.Lk)("br",null,null,-1)),s[8]||(s[8]=(0,o.eW)(" 탈퇴 시 소속 그룹에서 자동 탈퇴되며 모든 운영자 권한은 그룹 별 가장 오래 활동한 회원에게 자동 양도됩니다.")),s[9]||(s[9]=(0,o.Lk)("br",null,null,-1)),s[10]||(s[10]=(0,o.eW)(" 탈퇴시 작성한 잼얘는 자동 삭제되지않습니다.")),s[11]||(s[11]=(0,o.Lk)("br",null,null,-1)),s[12]||(s[12]=(0,o.Lk)("br",null,null,-1)),s[13]||(s[13]=(0,o.eW)(" 비밀번호 인증 ")),(0,o.bo)((0,o.Lk)("input",{type:"password",id:"passwordCheck",class:"nickName form-control",placeholder:" ","onUpdate:modelValue":s[0]||(s[0]=e=>n.passwordCheck=e)},null,512),[[a.Jo,n.passwordCheck]])]),(0,o.Lk)("div",ke,[s[14]||(s[14]=(0,o.Lk)("button",{class:"btn btn-dark","data-bs-dismiss":"modal","aria-label":"Close"},"닫기",-1)),null==n.passwordCheck?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-dark",onClick:s[1]||(s[1]=(...e)=>l.deleteUser&&l.deleteUser(...e)),"data-bs-dismiss":"modal","aria-label":"Close",disabled:""},"탈퇴")):((0,o.uX)(),(0,o.CE)("button",{key:1,class:"btn btn-dark",onClick:s[2]||(s[2]=(...e)=>l.deleteUser&&l.deleteUser(...e)),"data-bs-dismiss":"modal","aria-label":"Close"},"탈퇴"))])])])]),(0,o.Lk)("div",be,[(0,o.Lk)("button",{class:"btn btn-dark btn-sm btn-block",onClick:s[3]||(s[3]=(...e)=>l.logout&&l.logout(...e))},"로그아웃")])]),s[22]||(s[22]=(0,o.Lk)("br",null,null,-1)),s[23]||(s[23]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("div",ye,[s[17]||(s[17]=(0,o.Lk)("h2",{class:"title"},"내 그룹",-1)),(0,o.Lk)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:s[4]||(s[4]=(...e)=>l.groupAdd&&l.groupAdd(...e))},"+")]),(0,o.Lk)("div",null,[0==n.groups?((0,o.uX)(),(0,o.CE)("div",fe," 아직 소속된 그룹이 없습니다.")):((0,o.uX)(),(0,o.CE)("div",ve,[(0,o.Lk)("div",Ce,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.groups,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"group-info-box",key:e.groupSequence},[(0,o.Lk)("div",Le,[null==e||null==e.imageUrl?((0,o.uX)(),(0,o.CE)("img",we)):((0,o.uX)(),(0,o.CE)("img",{key:1,src:l.imageUrl(e.imageUrl),class:"img-thumbnail",alt:"Group Image"},null,8,Se))]),(0,o.Lk)("div",Ie,[(0,o.Lk)("span",Ne,(0,r.v_)(e.name),1),(0,o.Lk)("div",Ee," 인원: "+(0,r.v_)(e.totalUsers),1)]),(0,o.Lk)("div",qe,[(0,o.Lk)("button",{class:"edit-btn",onClick:s=>l.editGroupProfile(e),"data-bs-toggle":"modal","data-bs-target":"#editGroupProfile"},"프로필 수정",8,Me),(0,o.bF)(d,{selectGroup:n.selectGroup,groupNickNameInfo:n.groupNickNameInfo,onResetGroup:l.resetGroup},null,8,["selectGroup","groupNickNameInfo","onResetGroup"]),s[18]||(s[18]=(0,o.Lk)("button",{class:"delete-btn","data-bs-toggle":"modal","data-bs-target":"#leaveGroup"},"그룹 탈퇴",-1)),(0,o.bF)(u,{group:e},null,8,["group"])])])))),128)),s[19]||(s[19]=(0,o.Lk)("br",null,null,-1))])]))])])}const Re={class:"modal fade",id:"leaveGroup",tabindex:"-1","aria-labelledby":"exampleModalLabel1","aria-hidden":"true"},Xe={class:"modal-dialog modal-dialog-centered"},$e={class:"modal-content"},Ae={class:"modal-header"},Pe={class:"modal-body"},Te={class:"modal-footer"};function xe(e,s,t,a,i,n){return(0,o.uX)(),(0,o.CE)("div",Re,[(0,o.Lk)("div",Xe,[(0,o.Lk)("div",$e,[(0,o.Lk)("div",Ae,[(0,o.eW)((0,r.v_)(t.group.name)+" 탈퇴 ",1),s[1]||(s[1]=(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),(0,o.Lk)("div",Pe,[(0,o.eW)(" 정말 "+(0,r.v_)(t.group.name)+" 그룹을 떠나시겠습니까?",1),s[2]||(s[2]=(0,o.Lk)("br",null,null,-1)),s[3]||(s[3]=(0,o.eW)(" 탈퇴 후 인원이 남지않은 그룹은 자동 삭제됩니다")),s[4]||(s[4]=(0,o.Lk)("br",null,null,-1)),s[5]||(s[5]=(0,o.eW)(" (해당 그룹의 운영자라면 탈퇴 후 운영자 권리는 가장 오래된 회원에게 자동 양도됩니다.) "))]),(0,o.Lk)("div",Te,[(0,o.Lk)("button",{class:"btn btn-dark","data-bs-dismiss":"modal","aria-label":"Close",onClick:s[0]||(s[0]=(...e)=>n.leaveGroup&&n.leaveGroup(...e))},"탈퇴"),s[6]||(s[6]=(0,o.Lk)("button",{class:"btn btn-dark","data-bs-dismiss":"modal","aria-label":"Close"},"취소",-1))])])])])}var Oe={data(){return{}},props:{group:{type:Object,required:!0}},created(){},methods:{leaveGroup(){w.A.post("/api/group/leave/"+this.group.groupSequence,{},{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((()=>{this.$cookies.get("group").groupSequence==this.group.groupSequence&&this.$cookies.remove("group");const e=y.aF.getInstance(document.getElementById("leaveGroup"));e&&e.hide(),this.$router.push("/groups")}))}}};const Ge=(0,v.A)(Oe,[["render",xe]]);var Je=Ge;const De={class:"modal fade",id:"editGroupProfile",tabindex:"-1","aria-labelledby":"exampleModalLabel1","aria-hidden":"true"},Ke={class:"modal-dialog modal-dialog-centered"},Be={key:0,class:"modal-content"},Ve={class:"modal-header"},Fe={class:"modal-body"},Qe={class:"upload-container"},je={class:"inputFile"},ze={for:"profileImageUpload",class:"upload-label group-image"},He=["src"],We=["src"],Ze={key:2,src:le,class:"img-thumbnail",alt:"user In Group Image"},Ye={key:0},_e={key:0},es={key:1},ss={class:"modal-footer"};function ts(e,s,t,i,n,l){return(0,o.uX)(),(0,o.CE)("div",De,[(0,o.Lk)("div",Ke,[null!=t.selectGroup?((0,o.uX)(),(0,o.CE)("div",Be,[(0,o.Lk)("div",Ve,[(0,o.eW)((0,r.v_)(t.selectGroup.name)+" 프로필 수정 ",1),s[3]||(s[3]=(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),(0,o.Lk)("div",Fe,[(0,o.Lk)("div",Qe,[(0,o.Lk)("div",je,[(0,o.Lk)("input",{type:"file",id:"profileImageUpload",accept:"image/*",onChange:s[0]||(s[0]=(...e)=>l.previewImage&&l.previewImage(...e)),style:{display:"none"}},null,32),(0,o.Lk)("label",ze,[null!=n.imageSrc?((0,o.uX)(),(0,o.CE)("img",{key:0,src:n.imageSrc,alt:"profile Preview",class:"profile-preview"},null,8,He)):null!=t.groupNickNameInfo&&null!=t.groupNickNameInfo.imageUrl?((0,o.uX)(),(0,o.CE)("img",{key:1,src:l.imageUrl(t.groupNickNameInfo.imageUrl),class:"image-preview"},null,8,We)):((0,o.uX)(),(0,o.CE)("img",Ze))])])]),null!=t.groupNickNameInfo?((0,o.uX)(),(0,o.CE)("div",Ye,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"groupName",class:"nickName form-control",placeholder:" ","onUpdate:modelValue":s[1]||(s[1]=e=>n.newNickName=e)},null,512),[[a.Jo,n.newNickName]]),"NORMAL"==t.groupNickNameInfo.grade?((0,o.uX)(),(0,o.CE)("div",_e,"일반 회원")):((0,o.uX)(),(0,o.CE)("div",es,"운영자")),(0,o.Lk)("div",null,(0,r.v_)(t.groupNickNameInfo.createDate),1)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",ss,[s[4]||(s[4]=(0,o.Lk)("button",{class:"btn btn-dark","data-bs-dismiss":"modal","aria-label":"Close"},"닫기",-1)),(0,o.Lk)("button",{class:"btn btn-dark",onClick:s[2]||(s[2]=(...e)=>l.updateUserInGroupInfo&&l.updateUserInGroupInfo(...e)),"data-bs-dismiss":"modal","aria-label":"Close"},"저장")])])):(0,o.Q3)("",!0)])])}t(6573),t(8100),t(7936),t(7467),t(4732),t(9577),t(4979);const as="http://13.124.129.247:8080";function os(e){const s=atob(e.split(",")[1]),t=new ArrayBuffer(s.length),a=new Uint8Array(t);for(let c=0;c<s.length;c++)a[c]=s.charCodeAt(c);const o=e.match(/data:(.*?);base64,/);var i="png";o&&o[1]&&(i=o[1].split("/")[1]);const n=new Date,l=`${n.getFullYear()}${String(n.getMonth()+1).padStart(2,"0")}${String(n.getDate()).padStart(2,"0")}${String(n.getHours()).padStart(2,"0")}${String(n.getMinutes()).padStart(2,"0")}${String(n.getSeconds()).padStart(2,"0")}`,r=Math.random().toString(36).substring(2,7);return new File([a],`${l}_${r}.${i}`,{type:"image/jpeg"})}function is(e){return`${as}/api/file/${e}`}var ns={props:{selectGroup:{require:!0,type:Object},groupNickNameInfo:{require:!1,type:Object}},data(){return{imageSrc:null,profileImage:null,data:null,newNickName:null}},created(){this.data=this.groupNickNameInfo},mounted(){const e=document.getElementById("imageUpload");console.log("input 태그 확인:",e),e&&console.log("이벤트 리스너 존재 여부:",e.onchange)},methods:{previewImage(e){const s=this.$refs.imgbox;e.target.files&&e.target.files[0]?this.profileImage=e.target.files[0]:s.style.backgroundImage="";const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{this.imageSrc=e.target.result},e.readAsDataURL(t)}},updateUserInGroupInfo(){if(console.log("aa"),null==this.newNickName)return void this.$toastr.warning("변경할 닉네임을 입력해주세요");const e=new FormData;this.profileImage&&e.append("profile",this.profileImage),xc.post(`/api/group/${this.selectGroup.groupSequence}/${this.groupNickNameInfo.groupUserSequence}?nickName=${this.newNickName}`,e,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((()=>{this.profileImage=null,this.imageSrc=null,this.$emit("resetGroup")})).catch((e=>{this.$toastr.error(e.response.data.message)})),this.newNickName=null},imageUrl:is}};const ls=(0,v.A)(ns,[["render",ts]]);var rs=ls,cs={components:{LeaveGroup:Je,EditProfile:rs},data(){return{id:null,groups:null,selectGroup:{},groupNickNameInfo:{},passwordCheck:null}},props:{isLogin:{type:Boolean,required:!0}},created(){if(!this.isLogin)return this.$toastr.warning("로그인 후 접속가능한 페이지입니다."),void this.$router.push("/login");this.id=this.$cookies.get("id"),this.loadMyGroupList()},methods:{imageUrl:is,logout(){this.$cookies.remove("accessToken"),this.$cookies.remove("refreshToken"),this.$cookies.remove("id"),this.$cookies.remove("sequence"),this.$cookies.remove("group"),this.$router.push("/"),this.$emit("groupSelect",null),this.$emit("isLoginChange",!1)},loadMyGroupList(){xc.get("/api/group/list",{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.groups=e.data.data}))},groupAdd(){this.$router.push("/add")},editGroupProfile(e){this.selectGroup=e,xc.get("/api/group/user/"+e.groupSequence,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.groupNickNameInfo=e.data.data}))},deleteUser(){null==this.passwordCheck&&this.$toastr.warning("비밀번호를 먼저 입력해주세요"),xc.post("/api/user",{password:this.passwordCheck},{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((()=>{this.$toastr.success("탈퇴되었습니다."),this.$cookies.keys().forEach((e=>{this.$cookies.remove(e)})),this.$emit("isLoginChange",!1),this.$router.push("/")})).catch((e=>{this.$toastr.error(e.response.data.message)}))},moveGroup(e){this.$router.push("/group"+e)},resetGroup(){this.selectGroup=null,this.groupNickNameInfo=null}}};const ds=(0,v.A)(cs,[["render",Ue],["__scopeId","data-v-2c9d6740"]]);var us=ds;const ps={class:"b-container"},gs={key:0,class:"duplicateMessage-error"},ms={key:1,class:"duplicateMessage-success"},hs={key:2},ks={class:"form-group verification-group"},bs={class:"message"},ys={key:0,class:"success"},fs={key:1,class:"error"},vs={class:"form-group"},Cs={key:3},Ls={key:4,class:"duplicateMessage-error"},ws={class:"form-group"},Ss={key:5,class:"duplicateMessage-error"},Is={key:6,class:"duplicateMessage-error"},Ns={key:7,class:"duplicateMessage-success"},Es={key:8,class:"duplicate-message-space"},qs={class:"form-group verification-group"},Ms={key:9,class:"duplicateMessage-success"},Us={key:10,class:"duplicateMessage-error"},Rs={key:11,class:"duplicate-message-space"},Xs={class:"form-group verification-group"},$s={key:12},As={key:13};function Ps(e,s,t,i,n,l){return(0,o.uX)(),(0,o.CE)("div",ps,[s[16]||(s[16]=(0,o.Lk)("h2",{class:"title pb-4 mb-4 fst-italic border-bottom"},"회원 가입",-1)),null!=n.idIsDuplicate&&n.idIsDuplicate?((0,o.uX)(),(0,o.CE)("div",gs,"이미 가입된 ID입니다.")):(0,o.Q3)("",!0),null==n.idIsDuplicate||n.idIsDuplicate?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",ms,"사용 가능한 ID입니다.")),null==n.idIsDuplicate?((0,o.uX)(),(0,o.CE)("div",hs,s[13]||(s[13]=[(0,o.Lk)("div",{class:"duplicate-message-space"},null,-1)]))):(0,o.Q3)("",!0),(0,o.Lk)("div",ks,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"userId","onUpdate:modelValue":s[0]||(s[0]=e=>n.userId=e),class:"form-control",placeholder:"사용자ID"},null,512),[[a.Jo,n.userId]]),(0,o.Lk)("button",{onClick:s[1]||(s[1]=(...e)=>l.idCheck&&l.idCheck(...e)),class:"btn btn-dark btn-sm"},"중복 확인")]),(0,o.Lk)("div",bs,[s[14]||(s[14]=(0,o.eW)("비밀번호는 8자리 이상 입력해주세요.")),null!=n.password&&n.password.length>=8?((0,o.uX)(),(0,o.CE)("span",ys,"적합")):(0,o.Q3)("",!0),null!=n.password&&n.password.length<8?((0,o.uX)(),(0,o.CE)("span",fs,"부적합")):(0,o.Q3)("",!0)]),(0,o.Lk)("div",vs,[(0,o.bo)((0,o.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":s[2]||(s[2]=e=>n.password=e),class:"form-control",placeholder:"비밀번호"},null,512),[[a.Jo,n.password]])]),null==n.passwordConfirmError||0==n.passwordConfirmError?((0,o.uX)(),(0,o.CE)("div",Cs,s[15]||(s[15]=[(0,o.Lk)("div",{class:"duplicate-message-space"},null,-1)]))):(0,o.Q3)("",!0),n.passwordConfirmError?((0,o.uX)(),(0,o.CE)("div",Ls,"비밀번호가 일치하지 않습니다.")):(0,o.Q3)("",!0),(0,o.Lk)("div",ws,[(0,o.bo)((0,o.Lk)("input",{type:"password",id:"comfirmPassword","onUpdate:modelValue":s[3]||(s[3]=e=>n.comfirmPassword=e),class:"form-control",placeholder:"비밀번호 확인"},null,512),[[a.Jo,n.comfirmPassword]])]),null!=n.emailConfirmError&&n.emailConfirmError?((0,o.uX)(),(0,o.CE)("div",Ss,"이메일 형식이 아닙니다.")):(0,o.Q3)("",!0),null!=n.emailIsDuplicate&&n.emailIsDuplicate?((0,o.uX)(),(0,o.CE)("div",Is,"이미 가입된 이메일입니다.")):(0,o.Q3)("",!0),null==n.emailIsDuplicate||n.emailIsDuplicate?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Ns,"인증코드가 전송되었습니다. 이메일이 도착하지않았다면 재발송 버튼을 눌러주세요")),null!=n.emailIsDuplicate||null!=n.emailConfirmError&&n.emailConfirmError?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Es)),(0,o.Lk)("div",qs,[(0,o.bo)((0,o.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":s[4]||(s[4]=e=>n.email=e),class:"form-control",placeholder:"이메일"},null,512),[[a.Jo,n.email]]),n.emailCodeSend?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:s[5]||(s[5]=(...e)=>l.emailCheck&&l.emailCheck(...e)),class:"btn btn-dark btn-sm"},"이메일 검증")),n.emailCodeSend&&!n.verifcationSuccess?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:s[6]||(s[6]=(...e)=>l.emailCheck&&l.emailCheck(...e)),class:"btn btn-dark btn-sm"},"재발송")):(0,o.Q3)("",!0),n.emailCodeSend&&n.verifcationSuccess?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:s[7]||(s[7]=(...e)=>l.emailCheck&&l.emailCheck(...e)),class:"btn btn-dark btn-sm",disabled:""},"재발송")):(0,o.Q3)("",!0)]),null!=n.verifcationSuccess&&n.verifcationSuccess?((0,o.uX)(),(0,o.CE)("div",Ms,"인증 성공")):(0,o.Q3)("",!0),null==n.verifcationSuccess||n.verifcationSuccess?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Us,"인증실패. 인증코드를 재확인해주세요.")),null==n.verifcationSuccess?((0,o.uX)(),(0,o.CE)("div",Rs)):(0,o.Q3)("",!0),(0,o.Lk)("div",Xs,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"verificationCode","onUpdate:modelValue":s[8]||(s[8]=e=>n.verificationCode=e),class:"form-control",placeholder:"인증코드"},null,512),[[a.Jo,n.verificationCode]]),null!=this.emailCodeSend&0!=this.emailCodeSend&!this.verifcationSuccess?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:s[9]||(s[9]=(...e)=>l.sendVerification&&l.sendVerification(...e)),class:"btn btn-dark btn-sm"},"인증")):(0,o.Q3)("",!0),1!=this.emailCodeSend|this.verifcationSuccess?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:s[10]||(s[10]=(...e)=>l.sendVerification&&l.sendVerification(...e)),class:"btn btn-dark btn-sm",disabled:""},"인증")):(0,o.Q3)("",!0)]),null!=n.verifcationSuccess&n.verifcationSuccess&&null!=n.idIsDuplicate&!n.idIsDuplicate&&null!=n.emailIsDuplicate&!n.emailIsDuplicate&&null!=n.passwordConfirmError&!n.passwordConfirmError?((0,o.uX)(),(0,o.CE)("div",$s,[(0,o.Lk)("button",{onClick:s[11]||(s[11]=(...e)=>l.signup&&l.signup(...e)),class:"btn btn-dark signup-btn"},"회원가입")])):((0,o.uX)(),(0,o.CE)("div",As,[(0,o.Lk)("button",{onClick:s[12]||(s[12]=(...e)=>l.signup&&l.signup(...e)),class:"btn btn-dark signup-btn",disabled:""},"회원가입")]))])}var Ts={data(){return{userId:null,password:null,comfirmPassword:null,email:null,verificationCode:null,verifcationSuccess:null,idIsDuplicate:null,emailIsDuplicate:null,passwordConfirmError:!1,emailConfirmError:null,emailCodeSend:!1}},props:{isLogin:{type:Boolean,required:!0}},created(){this.isLogin&&(this.$router.push("/"),this.$toastr.warning("이미 로그인중입니다."))},watch:{userId(){this.idIsDuplicate=null},comfirmPassword(){this.comfirmPassword!=this.password?this.passwordConfirmError=!0:this.passwordConfirmError=!1},email(){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;e.test(this.email)?this.emailConfirmError=!1:this.emailConfirmError=!0,this.emailIsDuplicate=null,this.verifcationSuccess=null,this.emailCodeSend=!1},password(){this.comfirmPassword!=this.password?this.passwordConfirmError=!0:this.passwordConfirmError=!1}},methods:{signup(){!this.verifcationSuccess|this.idIsDuplicate||this.emailIsDuplicate||this.passwordConfirmError?this.$toastr.warning("모든 인증을 성공한 후 회원가입이 가능합니다."):(xc.post("/api/user/join",{id:this.userId,password:this.password,email:this.email}),this.$toastr.success("회원가입이 완료되었습니다."),this.$router.push("/"))},idCheck(){void 0==this.userId||null==this.userId||""==this.userId||" "==this.userId?this.$toastr.warning("아이디를 입력하지않으셨습니다"):xc.get("/api/user/check/id/"+this.userId).then((e=>{e.data.data?this.idIsDuplicate=!1:this.idIsDuplicate=!0}))},emailCheck(){void 0==this.email||null==this.email||""==this.email||" "==this.email?this.$toastr.warning("이메일을 입력하지않으셨습니다"):this.emailConfirmError?this.$toastr.warning("이메일 형식이 올바르지 않습니다."):this.verifcationSuccess?this.$toastr.warning("이미 이메일 인증이 완료되었습니다."):xc.get("/api/user/check/email/"+this.email).then((e=>{e.data.data?(this.emailIsDuplicate=!1,this.emailCodeSend=!0,xc.post("/api/email/send?email="+this.email)):this.emailIsDuplicate=!0}))},sendVerification(){null==this.verificationCode?this.$toastr.warning("인증코드를 입력하지않으셨습니다."):this.emailConfirmError||this.emailIsDuplicate?this.$toastr.warning("이메일 검증을 먼저 진행해주세요."):this.verifcationSuccess?this.$toastr.warning("이미 인증을 완료하셨습니다."):xc.post("/api/email/verify",{email:this.email,verifyCode:this.verificationCode}).then((e=>{e.data.data?this.verifcationSuccess=!0:this.verifcationSuccess=!1}))}}};const xs=(0,v.A)(Ts,[["render",Ps],["__scopeId","data-v-7eed555a"]]);var Os=xs;const Gs={class:"b-container"},Js={class:"group-header"},Ds={key:0,class:"group-info-box-container"},Ks={class:"group-image"},Bs={key:0,src:le,class:"img-thumbnail",alt:"..."},Vs=["src"],Fs={class:"group-details"},Qs={class:"group-name"},js={class:"small-font"},zs={class:"group-actions"},Hs={key:1};function Ws(e,s,t,a,i,n){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",Gs,[s[4]||(s[4]=(0,o.Lk)("h2",{class:"title"},"그룹 정보",-1)),(0,o.Lk)("div",null,[(0,o.Lk)("div",Js,[s[1]||(s[1]=(0,o.Lk)("h4",{class:"title"},"내 그룹",-1)),(0,o.Lk)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:s[0]||(s[0]=(...e)=>n.groupAdd&&n.groupAdd(...e))},"+")])]),0!=i.groups.length?((0,o.uX)(),(0,o.CE)("div",Ds,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.groups,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"group-info-box",key:e.groupSequence},[(0,o.Lk)("div",Ks,[null==e.imageUrl?((0,o.uX)(),(0,o.CE)("img",Bs)):((0,o.uX)(),(0,o.CE)("img",{key:1,src:n.imageUrl(e.imageUrl),class:"img-thumbnail",alt:"Group Image"},null,8,Vs))]),(0,o.Lk)("div",Fs,[(0,o.Lk)("span",Qs,(0,r.v_)(e.name),1),(0,o.Lk)("div",js," 인원: "+(0,r.v_)(e.totalUsers),1)]),(0,o.Lk)("div",zs,[(0,o.bF)(l,{class:"btn btn-dark edit-button",to:{name:"groupInfo",params:{seq:e.groupSequence}}},{default:(0,o.k6)((()=>s[2]||(s[2]=[(0,o.eW)("선택")]))),_:2},1032,["to"])])])))),128)),s[3]||(s[3]=(0,o.Lk)("br",null,null,-1))])):((0,o.uX)(),(0,o.CE)("div",Hs," 가입된 그룹이 없습니다. "))])}var Zs={components:{},data(){return{groups:{},groupinfo:null,userSequence:null}},props:{isLogin:{type:Boolean,required:!0}},created(){if(!this.isLogin)return this.$toastr.warning("로그인 후 접속가능한 페이지입니다."),void this.$router.push("/login");this.loadMyGroupList(),0==this.groups&&(this.$toastr.warning("소속된 그룹이 없습니다. 그룹 생성 페이지로 이동합니다."),this.$router.push("/add"))},methods:{imageUrl:is,loadMyGroupList(){xc.get("/api/group/list",{headers:{Authorization:`Bearer ${this.$cookies.get("accessToken")}`}}).then((e=>{this.groups=e.data.data}))},previewImage(e){const s=e.target.files[0];if(s){const e=new FileReader;e.onload=e=>{this.imageSrc=e.target.result},e.readAsDataURL(s)}},groupAdd(){this.$router.push("/add")}}};const Ys=(0,v.A)(Zs,[["render",Ws],["__scopeId","data-v-99fedaee"]]);var _s=Ys;const et={class:"b-container"},st={class:"group-add"};function tt(e,s,t,a,i,n){const l=(0,o.g2)("GroupCreate"),r=(0,o.g2)("inviteGroup");return(0,o.uX)(),(0,o.CE)("div",et,[s[2]||(s[2]=(0,o.Lk)("h2",{class:"title"},"그룹 추가",-1)),(0,o.Lk)("div",st,[s[0]||(s[0]=(0,o.Lk)("button",{type:"button",class:"btn btn-dark btn-block btn-group","data-bs-toggle":"modal","data-bs-target":"#exampleModal1"}," 그룹 생성 ",-1)),(0,o.bF)(l,{onCreateModalClose:n.createModalClose},null,8,["onCreateModalClose"]),s[1]||(s[1]=(0,o.Lk)("button",{type:"button",class:"btn btn-dark btn-block btn-group","data-bs-toggle":"modal","data-bs-target":"#exampleModal2"}," 초대코드 입력 ",-1)),(0,o.bF)(r,{onInviteModalClose:n.inviteModalClose},null,8,["onInviteModalClose"])])])}const at={class:"modal fade",id:"exampleModal1",tabindex:"-1","aria-labelledby":"exampleModalLabel1","aria-hidden":"true"},ot={class:"modal-dialog modal-dialog-centered"},it={class:"modal-content"},nt={class:"modal-header"},lt={key:0,class:"modal-title fs-5",id:"exampleModalLabel1"},rt={key:1,class:"modal-title fs-5",id:"exampleModalLabel1"},ct={class:"modal-body"},dt={class:"upload-container"},ut={for:"imageUpload",class:"upload-label"},pt=["src"],gt={key:1,class:"upload-icon"},mt={class:"form-group"},ht={class:"form-group"},kt={class:"upload-container"},bt={for:"profileImageUpload",class:"upload-label"},yt=["src"],ft={key:1,class:"upload-icon"},vt={class:"form-group"},Ct={class:"modal-footer"};function Lt(e,s,t,i,n,l){return(0,o.uX)(),(0,o.CE)("div",at,[(0,o.Lk)("div",ot,[(0,o.Lk)("div",it,[(0,o.Lk)("div",nt,[1===n.step?((0,o.uX)(),(0,o.CE)("h1",lt,"그룹 생성 - 그룹 정보 입력")):(0,o.Q3)("",!0),2===n.step?((0,o.uX)(),(0,o.CE)("h1",rt,"그룹 생성 - 내 프로필 생성")):(0,o.Q3)("",!0),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:s[0]||(s[0]=(...e)=>l.modalClose&&l.modalClose(...e))})]),(0,o.Lk)("div",ct,[1===n.step?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.Lk)("div",dt,[(0,o.Lk)("input",{type:"file",id:"imageUpload",accept:"image/*",onChange:s[1]||(s[1]=(...e)=>l.previewImage&&l.previewImage(...e)),style:{display:"none"}},null,32),(0,o.Lk)("label",ut,[n.imageSrc?((0,o.uX)(),(0,o.CE)("img",{key:0,src:n.imageSrc,alt:"Image Preview",class:"image-preview"},null,8,pt)):((0,o.uX)(),(0,o.CE)("span",gt,"+"))])]),(0,o.Lk)("div",mt,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"groupName",class:"group-name form-control",placeholder:" ","onUpdate:modelValue":s[2]||(s[2]=e=>n.groupName=e)},null,512),[[a.Jo,n.groupName]]),s[8]||(s[8]=(0,o.Lk)("label",{for:"groupName",class:"placeholder-label"},[(0,o.eW)("그룹 명"),(0,o.Lk)("span",{class:"required"},"*")],-1))]),(0,o.Lk)("div",ht,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"groupDescription","onUpdate:modelValue":s[3]||(s[3]=e=>n.groupDescription=e),class:"group-description form-control group-description",placeholder:" "},null,512),[[a.Jo,n.groupDescription]]),s[9]||(s[9]=(0,o.Lk)("label",{for:"groupDescription",class:"placeholder-label2"},"그룹 설명(200자)",-1))])],64)):(0,o.Q3)("",!0),2===n.step?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.Lk)("div",kt,[(0,o.Lk)("input",{type:"file",id:"profileImageUpload",accept:"image/*",onChange:s[4]||(s[4]=(...e)=>l.profilePreviewImage&&l.profilePreviewImage(...e)),style:{display:"none"}},null,32),(0,o.Lk)("label",bt,[n.profileimageSrc?((0,o.uX)(),(0,o.CE)("img",{key:0,src:n.profileimageSrc,alt:"Image Preview",class:"image-preview"},null,8,yt)):((0,o.uX)(),(0,o.CE)("span",ft,"+"))])]),(0,o.Lk)("div",vt,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"nickname",class:"nickname group-name form-control",placeholder:" ","onUpdate:modelValue":s[5]||(s[5]=e=>n.nickname=e)},null,512),[[a.Jo,n.nickname]]),s[10]||(s[10]=(0,o.Lk)("label",{for:"nickname",class:"placeholder-label3"},[(0,o.eW)("닉네임"),(0,o.Lk)("span",{class:"required"},"*")],-1))])],64)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Ct,[1===n.step?((0,o.uX)(),(0,o.CE)("button",{key:0,type:"button",class:"btn btn-dark btn-block",onClick:s[6]||(s[6]=(...e)=>l.next&&l.next(...e))},"다음")):(0,o.Q3)("",!0),2===n.step?((0,o.uX)(),(0,o.CE)("button",{key:1,type:"button",class:"btn btn-dark btn-block",onClick:s[7]||(s[7]=(...e)=>l.create&&l.create(...e))},"생성")):(0,o.Q3)("",!0)])])])])}var wt={data(){return{imageSrc:null,groupDescription:"",groupName:"",nickname:"",step:1,profileimageSrc:null}},methods:{next(){""!=this.groupName&&null!=this.groupName&&void 0!=this.groupName?this.step=2:this.$toastr.warning("그룹 명을 입력하지않으셨습니다.")},create(){if(""==this.nickname||null==this.nickname||void 0==this.nickname)return void this.$toastr.warning("닉네임을 입력하지않으셨습니다.");const e=new FormData,s={name:this.groupName,description:this.groupDescription,nickname:this.nickname};e.append("data",JSON.stringify(s)),null!=this.imageSrc&&e.append("imageUrl",os(this.imageSrc)),null!=this.profileimageSrc&&e.append("profileImageUrl",os(this.profileimageSrc)),xc.post("/api/group",e,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((()=>{const e=y.aF.getInstance(document.getElementById("exampleModal1"));e&&e.hide(),this.modalClose(),this.$toastr.success("생성 완료!"),this.$router.push("/groups")}))},modalClose(){this.$emit("createModalClose",!1)},previewImage(e){const s=e.target.files[0];if(s){const e=new FileReader;e.onload=e=>{this.imageSrc=e.target.result},e.readAsDataURL(s)}},profilePreviewImage(e){const s=e.target.files[0];if(s){const e=new FileReader;e.onload=e=>{this.profileimageSrc=e.target.result},e.readAsDataURL(s)}},resetForm(){this.groupDescription="",this.groupName="",this.nickname="",this.imageSrc=null}}};const St=(0,v.A)(wt,[["render",Lt],["__scopeId","data-v-3a31d98e"]]);var It=St;const Nt={class:"modal fade",id:"exampleModal2",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Et={class:"modal-dialog modal-dialog-centered"},qt={class:"modal-content"},Mt={class:"modal-header"},Ut={key:0,class:"modal-title fs-5",id:"exampleModalLabel"},Rt={key:1,class:"modal-title fs-5",id:"exampleModalLabel"},Xt={key:2,class:"modal-title fs-5",id:"exampleModalLabel"},$t={class:"modal-body"},At={key:0,class:"form-group"},Pt={class:"upload-container"},Tt={for:"profileImageUpload",class:"upload-label"},xt=["src"],Ot={class:"form-group"},Gt={for:"nickname",class:"placeholder-label3"},Jt={class:"form-group"},Dt={for:"groupDescription",class:"placeholder-label2"},Kt={class:"upload-container"},Bt={for:"profileImageUpload",class:"upload-label"},Vt=["src"],Ft={key:1,class:"upload-icon"},Qt={class:"form-group"},jt={class:"modal-footer"},zt={key:1,class:"mt-3 d-flex justify-content-between"},Ht={key:2},Wt={key:1,type:"button",class:"btn btn-dark btn-block",disabled:""};function Zt(e,s,t,i,n,l){return(0,o.uX)(),(0,o.CE)("div",Nt,[(0,o.Lk)("div",Et,[(0,o.Lk)("div",qt,[(0,o.Lk)("div",Mt,[1===n.step?((0,o.uX)(),(0,o.CE)("h1",Ut,"초대코드 입력")):(0,o.Q3)("",!0),2===n.step?((0,o.uX)(),(0,o.CE)("h1",Rt,"초대코드 입력 - 그룹 정보 확인")):(0,o.Q3)("",!0),3===n.step?((0,o.uX)(),(0,o.CE)("h1",Xt,"초대코드 입력 - 내 프로필 생성")):(0,o.Q3)("",!0),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:s[0]||(s[0]=(...e)=>l.modalClose&&l.modalClose(...e))})]),(0,o.Lk)("div",$t,[1===n.step?((0,o.uX)(),(0,o.CE)("div",At,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"groupName",class:"group-name form-control",placeholder:" ","onUpdate:modelValue":s[1]||(s[1]=e=>n.inviteCode=e)},null,512),[[a.Jo,n.inviteCode]]),s[11]||(s[11]=(0,o.Lk)("label",{for:"groupName",class:"placeholder-label"},[(0,o.eW)("초대코드"),(0,o.Lk)("span",{class:"required"},"*")],-1))])):(0,o.Q3)("",!0),2===n.step?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.Lk)("div",Pt,[(0,o.Lk)("label",Tt,[null!=n.groupInfo.imageUrl?((0,o.uX)(),(0,o.CE)("img",{key:0,src:l.imageUrl(n.groupInfo.imageUrl),alt:"Image Preview",class:"image-preview"},null,8,xt)):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",Ot,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"nickname",class:"nickname group-name form-control",placeholder:" ","onUpdate:modelValue":s[2]||(s[2]=e=>n.groupInfo.name=e),disabled:""},null,512),[[a.Jo,n.groupInfo.name]]),(0,o.Lk)("label",Gt,(0,r.v_)(n.groupInfo.name),1)]),(0,o.Lk)("div",Jt,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"groupDescription","onUpdate:modelValue":s[3]||(s[3]=e=>n.groupDescription=e),class:"group-description form-control group-description",placeholder:" ",disabled:""},null,512),[[a.Jo,n.groupDescription]]),(0,o.Lk)("label",Dt,(0,r.v_)(n.groupInfo.description),1)])],64)):(0,o.Q3)("",!0),3===n.step?((0,o.uX)(),(0,o.CE)(o.FK,{key:2},[(0,o.Lk)("div",Kt,[(0,o.Lk)("input",{type:"file",id:"profileImageUpload",accept:"image/*",onChange:s[4]||(s[4]=(...e)=>l.profilePreviewImage&&l.profilePreviewImage(...e)),style:{display:"none"}},null,32),(0,o.Lk)("label",Bt,[n.profileimageSrc?((0,o.uX)(),(0,o.CE)("img",{key:0,src:n.profileimageSrc,alt:"Image Preview",class:"image-preview"},null,8,Vt)):((0,o.uX)(),(0,o.CE)("span",Ft,"+"))])]),(0,o.Lk)("div",Qt,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"nickname",class:"nickname group-name form-control",placeholder:" ","onUpdate:modelValue":s[5]||(s[5]=e=>n.nickname=e)},null,512),[[a.Jo,n.nickname]]),s[12]||(s[12]=(0,o.Lk)("label",{for:"nickname",class:"placeholder-label3"},[(0,o.eW)("닉네임"),(0,o.Lk)("span",{class:"required"},"*")],-1)),(0,o.Lk)("button",{class:"btn btn-dark",onClick:s[6]||(s[6]=(...e)=>l.nickNameCheck&&l.nickNameCheck(...e))},"중복 체크")])],64)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",jt,[1===n.step?((0,o.uX)(),(0,o.CE)("button",{key:0,type:"button",class:"btn btn-dark btn-block",onClick:s[7]||(s[7]=(...e)=>l.nextOne&&l.nextOne(...e))},"다음")):(0,o.Q3)("",!0),2===n.step?((0,o.uX)(),(0,o.CE)("div",zt,[(0,o.Lk)("button",{type:"button",class:"btn btn-dark btn-block",onClick:s[8]||(s[8]=(...e)=>l.back&&l.back(...e))},"이전"),(0,o.Lk)("button",{type:"button",class:"btn btn-dark btn-block",onClick:s[9]||(s[9]=(...e)=>l.nextTwo&&l.nextTwo(...e))},"다음")])):(0,o.Q3)("",!0),3===n.step?((0,o.uX)(),(0,o.CE)("div",Ht,[n.nickNameDupCheck?((0,o.uX)(),(0,o.CE)("button",{key:0,type:"button",class:"btn btn-dark btn-block","data-bs-dismiss":"modal","aria-label":"Close",onClick:s[10]||(s[10]=(...e)=>l.create&&l.create(...e))},"가입")):((0,o.uX)(),(0,o.CE)("button",Wt,"가입"))])):(0,o.Q3)("",!0)])])])])}var Yt={data(){return{imageSrc:null,groupDescription:"",groupName:"",nickname:"",step:1,profileimageSrc:null,groupInfo:null,inviteCode:null,nickNameDupCheck:!1}},methods:{imageUrl:is,nextOne(){""!=this.inviteCode&&null!=this.inviteCode&&void 0!=this.inviteCode?xc.get("/api/group/group-info/"+this.inviteCode,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.groupInfo=e.data.data,this.step=2})).catch((e=>{this.$toastr.error(e.response.data.message)})):this.$toastr.warning("그룹 명을 입력하지않으셨습니다.")},nextTwo(){this.step=3},back(){this.step=1,this.inviteCode=null,this.groupInfo=null},previewImage(e){const s=e.target.files[0];if(s){const e=new FileReader;e.onload=e=>{this.imageSrc=e.target.result},e.readAsDataURL(s)}},profilePreviewImage(e){const s=e.target.files[0];if(s){const e=new FileReader;e.onload=e=>{this.profileimageSrc=e.target.result},e.readAsDataURL(s)}},resetForm(){this.groupDescription="",this.groupName="",this.nickname="",this.imageSrc=null},modalClose(){this.$emit("inviteModalClose",!1)},create(){null!=this.nickname?xc.post("/api/group/invite",{groupSequence:this.groupInfo.groupSequence,inviteCode:this.inviteCode,nickName:this.nickname,profileImageUrl:this.profileimageSrc},{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((()=>{this.modalClose();const e=y.aF.getInstance(document.getElementById("exampleModal2"));e&&e.hide(),this.$router.push("/groups")})).catch((e=>{this.$toastr.error(e.response.data.message)})):this.$toastr.warning("가입할 그룹에서 사용할 프로필을 작성해주세요")},nickNameCheck(){xc.get(`/api/group/${this.groupInfo.groupSequence}/nick-name?nickName=${this.nickname}`,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((()=>{this.nickNameDupCheck=!0})).catch((e=>{this.$toastr.error(e.response.data.message)}))}}};const _t=(0,v.A)(Yt,[["render",Zt],["__scopeId","data-v-96660a34"]]);var ea=_t,sa={components:{GroupCreate:It,InviteGroup:ea},data(){return{groupCreateModal:null,groupInviteModal:null,groupAdd:null}},props:{isLogin:{type:Boolean,required:!0}},created(){if(!this.isLogin)return this.$toastr.warning("로그인 후 접근 가능한 페이지입니다."),void this.$router.go("/")},methods:{previewImage(e){const s=e.target.files[0];if(s){const e=new FileReader;e.onload=e=>{this.imageSrc=e.target.result},e.readAsDataURL(s)}},createModalClose(){this.groupCreateModal=!1},inviteModalClose(){this.groupInviteModal=!1}}};const ta=(0,v.A)(sa,[["render",tt],["__scopeId","data-v-50ddf53c"]]);var aa=ta;const oa={class:"b-container"},ia={key:0,class:"group-container"},na={class:"group-header"},la=["src"],ra={key:2,class:"preview"},ca={class:"group-info"},da={class:"group-info-name"},ua={class:"modal fade",id:"editGroupInfo",tabindex:"-1","aria-labelledby":"exampleModalLabel1","aria-hidden":"true"},pa={class:"modal-dialog modal-dialog-centered"},ga={class:"modal-content"},ma={class:"modal-header"},ha={class:"modal-body"},ka={class:"upload-container"},ba={for:"groupProfileImageUpload",class:"upload-label group-image"},ya=["src"],fa=["src"],va={key:2,src:le,class:"img-thumbnail",alt:"user In Group Image"},Ca={key:0},La={class:"modal-footer"},wa={key:0,class:"btn btn-dark",disabled:""},Sa={class:"user-list"},Ia={key:0,src:le,alt:"User Profile",class:"user-profile-img"},Na=["src"],Ea={class:"user-info"},qa={class:"user-name"},Ma={key:0,class:"master-badge"},Ua={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Ra={class:"modal-dialog modal-dialog-centered"},Xa={class:"modal-content"},$a={class:"modal-body"},Aa={class:"modal fade",id:"deleteVoteModal",tabindex:"-1","aria-labelledby":"deleteVoteModalLabel","aria-hidden":"true"},Pa={class:"modal-dialog modal-dialog-centered"},Ta={class:"modal-content"},xa={class:"modal-body"},Oa={key:0},Ga={key:0},Ja={key:0},Da={key:1},Ka={key:1},Ba={class:"modal-footer"};function Va(e,s,t,i,n,l){const c=(0,o.g2)("image-preview-open"),d=(0,o.g2)("EditProfile"),u=(0,o.g2)("leave-group");return(0,o.uX)(),(0,o.CE)("div",oa,[s[30]||(s[30]=(0,o.Lk)("h2",{class:"title"},"그룹 상세 정보",-1)),null!=n.groupInfo?((0,o.uX)(),(0,o.CE)("div",ia,[(0,o.Lk)("div",na,[null==n.groupInfo.imageUrl?((0,o.uX)(),(0,o.CE)("img",{key:0,src:le,alt:"Group Profile",class:"group-profile-img",onClick:s[0]||(s[0]=(...e)=>l.imagePreviewOpen&&l.imagePreviewOpen(...e))})):((0,o.uX)(),(0,o.CE)("img",{key:1,src:l.imageUrl(n.groupInfo.imageUrl),alt:"Group Profile",class:"group-profile-img",onClick:s[1]||(s[1]=(...e)=>l.imagePreviewOpen&&l.imagePreviewOpen(...e))},null,8,la)),n.isPreviewOpen?((0,o.uX)(),(0,o.CE)("div",ra,[(0,o.bF)(c,{imageUrl:n.groupInfo.imageUrl,onClosePreview:l.closePreview},null,8,["imageUrl","onClosePreview"])])):(0,o.Q3)("",!0),(0,o.Lk)("div",ca,[(0,o.Lk)("span",da,(0,r.v_)(n.groupInfo.name),1),n.groupInfo.isMaster?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-dark edit-button",onClick:s[2]||(s[2]=(...s)=>e.editGroupName&&e.editGroupName(...s)),"data-bs-toggle":"modal","data-bs-target":"#editGroupInfo"},"수정")):(0,o.Q3)("",!0),(0,o.Lk)("div",ua,[(0,o.Lk)("div",pa,[(0,o.Lk)("div",ga,[(0,o.Lk)("div",ma,[(0,o.eW)((0,r.v_)(n.groupInfo.name)+" 프로필 수정 ",1),s[12]||(s[12]=(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),(0,o.Lk)("div",ha,[(0,o.Lk)("div",ka,[(0,o.Lk)("input",{type:"file",id:"groupProfileImageUpload",accept:"image/*",onChange:s[3]||(s[3]=(...e)=>l.previewImage&&l.previewImage(...e)),style:{display:"none"}},null,32),(0,o.Lk)("label",ba,[null!=n.imageSrc?((0,o.uX)(),(0,o.CE)("img",{key:0,src:n.imageSrc,alt:"Image Preview",class:"image-preview"},null,8,ya)):null!=n.groupInfo&&null!=n.groupInfo.imageUrl?((0,o.uX)(),(0,o.CE)("img",{key:1,src:l.imageUrl(n.groupInfo.imageUrl),class:"image-preview"},null,8,fa)):((0,o.uX)(),(0,o.CE)("img",va))])]),null!=n.groupInfo?((0,o.uX)(),(0,o.CE)("div",Ca,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"groupName",class:"nickName form-control",placeholder:" ","onUpdate:modelValue":s[4]||(s[4]=e=>n.groupNewName=e)},null,512),[[a.Jo,n.groupNewName]]),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"groupDesc",class:"desc form-control",placeholder:" ","onUpdate:modelValue":s[5]||(s[5]=e=>n.groupDescript=e)},null,512),[[a.Jo,n.groupDescript]])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",La,[s[13]||(s[13]=(0,o.Lk)("button",{class:"btn btn-dark","data-bs-dismiss":"modal","aria-label":"Close"},"닫기",-1)),null==this.groupNewName||void 0==this.groupNewName||""==this.groupNewName?((0,o.uX)(),(0,o.CE)("button",wa,"저장")):((0,o.uX)(),(0,o.CE)("button",{key:1,class:"btn btn-dark",onClick:s[6]||(s[6]=(...e)=>l.updateGroupInfo&&l.updateGroupInfo(...e)),"data-bs-dismiss":"modal","aria-label":"Close"},"저장"))])])])])])]),(0,o.Lk)("div",null,(0,r.v_)(n.groupInfo.description),1),(0,o.Lk)("div",Sa,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.groupInfo.users,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"user-item",key:e.userSequence},[null==e.imageUrl?((0,o.uX)(),(0,o.CE)("img",Ia)):((0,o.uX)(),(0,o.CE)("img",{key:1,src:l.imageUrl(e.imageUrl),alt:"Group Profile",class:"group-profile-img"},null,8,Na)),(0,o.Lk)("div",Ea,[(0,o.Lk)("span",qa,[(0,o.eW)((0,r.v_)(e.nickname)+" ",1),"MASTER"==e.grade?((0,o.uX)(),(0,o.CE)("span",Ma,"(마스터)")):(0,o.Q3)("",!0)]),e.userSequence==n.userSequence?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-dark edit-button",onClick:s[7]||(s[7]=(...e)=>l.editUserName&&l.editUserName(...e)),"data-bs-toggle":"modal","data-bs-target":"#editGroupProfile"},"수정")):(0,o.Q3)("",!0),(0,o.bF)(d,{selectGroup:n.groupInfo,groupNickNameInfo:n.groupNickNameInfo,onResetGroup:l.resetGroup},null,8,["selectGroup","groupNickNameInfo","onResetGroup"])])])))),128))]),s[29]||(s[29]=(0,o.Lk)("button",{class:"btn btn-dark btn-block group-btn","data-bs-toggle":"modal","data-bs-target":"#leaveGroup"},"그룹 탈퇴",-1)),(0,o.bF)(u,{group:n.groupInfo},null,8,["group"]),(0,o.Lk)("button",{class:"btn btn-dark btn-block group-btn","data-bs-toggle":"modal","data-bs-target":"#exampleModal",onClick:s[8]||(s[8]=(...e)=>l.getInviteCode&&l.getInviteCode(...e))},"초대코드 발급"),(0,o.Lk)("div",Ua,[(0,o.Lk)("div",Ra,[(0,o.Lk)("div",Xa,[s[15]||(s[15]=(0,o.Lk)("div",{class:"modal-header"},[(0,o.Lk)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"초대코드 발급"),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,o.Lk)("div",$a,[(0,o.bo)((0,o.Lk)("input",{class:"invite-code",type:"text","onUpdate:modelValue":s[9]||(s[9]=e=>n.inviteCode=e),disabled:""},null,512),[[a.Jo,n.inviteCode]]),s[14]||(s[14]=(0,o.Lk)("div",null,"발급된 초대코드는 한시간 후 만료됩니다.",-1))]),s[16]||(s[16]=(0,o.Lk)("div",{class:"modal-footer"},[(0,o.Lk)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal","aria-label":"Close"},"닫기")],-1))])])]),n.groupInfo.isMaster?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-dark btn-block group-btn",onClick:s[10]||(s[10]=(...e)=>l.isGroupDeletionVoteInProgress&&l.isGroupDeletionVoteInProgress(...e)),"data-bs-toggle":"modal","data-bs-target":"#deleteVoteModal"},"그룹 삭제 투표 진행")):(0,o.Q3)("",!0),(0,o.Lk)("div",Aa,[(0,o.Lk)("div",Pa,[(0,o.Lk)("div",Ta,[s[28]||(s[28]=(0,o.Lk)("div",{class:"modal-header"},[(0,o.Lk)("h1",{class:"modal-title fs-5",id:"deleteVoteModalLabel"},"그룹 삭제 투표 개시"),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,o.Lk)("div",xa,[s[17]||(s[17]=(0,o.eW)(" 그룹 삭제 투표가 진행됩니다.")),s[18]||(s[18]=(0,o.Lk)("br",null,null,-1)),s[19]||(s[19]=(0,o.eW)(" 그룹 내 회원이 과반수 이상이 찬성한다면 즉시 삭제됩니다.")),s[20]||(s[20]=(0,o.Lk)("br",null,null,-1)),s[21]||(s[21]=(0,o.eW)(" 과반수가 동의하지 않았다면 삭제는 무산됩니다.")),s[22]||(s[22]=(0,o.Lk)("br",null,null,-1)),s[23]||(s[23]=(0,o.eW)(" 일주일 내로 투표가 재 진행된다면 2차 투표가 시작됩니다.")),s[24]||(s[24]=(0,o.Lk)("br",null,null,-1)),s[25]||(s[25]=(0,o.eW)(" 2차 투표에서도 과반수가 동의하지 않는다면 재투표에서 그룹 삭제에 동의한 인원은 그룹에서 탈퇴됩니다(작성한 잼얘도 함께 삭제됩니다) ")),s[26]||(s[26]=(0,o.Lk)("br",null,null,-1)),null!=n.voteInfo?((0,o.uX)(),(0,o.CE)("div",Oa,[n.voteInfo.isNowVoting?((0,o.uX)(),(0,o.CE)("div",Ga,[n.voteInfo.hasRevoted?((0,o.uX)(),(0,o.CE)("span",Ja,"현재 2차 투표 진행 중 입니다.")):((0,o.uX)(),(0,o.CE)("span",Da,"현재 1차 투표 진행 중 입니다.")),(0,o.eW)(" 동의 인원 : "+(0,r.v_)(n.voteInfo.agreeUserSeqs.length)+" 비동의 인원 : "+(0,r.v_)(n.voteInfo.disagreeUserSeqs.length),1)])):n.voteInfo.isWaitingDeleteReVoted?((0,o.uX)(),(0,o.CE)("div",Ka," 1차 투표에서 과반수의 삭제 승인을 얻지못해 2차 투표 대기중입니다. 삭제를 누르면 2차 투표가 진행됩니다. 만약 재투표에서도 과반수의 동의를 얻지못한다면 운영자는 자동 그룹탈퇴처리되며 운영자 권한은 가입 기간이 가장 오래된 유저에게 자동 양도됩니다. ")):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Ba,[(0,o.Lk)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal","aria-label":"Close",onClick:s[11]||(s[11]=(...e)=>l.deleteGroupVote&&l.deleteGroupVote(...e))},"삭제"),s[27]||(s[27]=(0,o.Lk)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal","aria-label":"Close"},"닫기",-1))])])])])])):(0,o.Q3)("",!0)])}const Fa={class:"image-preview-container"},Qa=["src"],ja=["src"];function za(e,s,t,a,i,n){return(0,o.uX)(),(0,o.CE)("div",{class:"image-preview-overlay",onClick:s[0]||(s[0]=(...e)=>n.closePreview&&n.closePreview(...e))},[(0,o.Lk)("div",Fa,[t.image?((0,o.uX)(),(0,o.CE)("img",{key:0,src:t.image,alt:"Preview Image",class:"large-image"},null,8,Qa)):null!=t.imageUrlLink?((0,o.uX)(),(0,o.CE)("img",{key:1,src:n.imageUrl(t.imageUrlLink),alt:"Preview Image",class:"large-image"},null,8,ja)):(0,o.Q3)("",!0)])])}var Ha={data(){return{}},props:{image:{type:File,require:!1},imageUrlLink:{type:String,require:!1}},methods:{imageUrl:is,closePreview(){this.$emit("closePreview",!1)}}};const Wa=(0,v.A)(Ha,[["render",za]]);var Za=Wa,Ya={name:"groupInfo",components:{LeaveGroup:Je,EditProfile:rs,ImagePreviewOpen:Za},data(){return{groupInfo:null,userSequence:null,inviteCode:null,voteInfo:null,groupNickNameInfo:{},imageSrc:null,groupNewName:null,groupDescript:null,isPreviewOpen:!1}},props:{seq:Number,isLogin:{require:!0}},created(){if(!this.isLogin)return this.$toastr.warning("로그인 후 접속가능한 페이지입니다."),void this.$router.push("/login");this.userSequence=this.$cookies.get("sequence"),xc.get("/api/group/"+this.seq,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.groupInfo=e.data.data,this.groupNewName=this.groupInfo.name,this.groupDescript=this.groupInfo.description})).catch((e=>{this.$toastr.error(e.response.data.message),this.$router.push("/groups")}))},methods:{imageUrl:is,deleteGroupVote(){xc.delete("/api/group/"+this.seq,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{e.data.data?(this.$toastr.success("그룹이 삭제 완료되었습니다"),this.$cookies.get("group").groupSequence==this.seq&&this.$cookies.remove("group"),this.$router.push("groups")):this.$toastr.success("삭제 투표가 시작되었습니다. 과반수 이상 동의시 모든 그룹 내 모든 게시글이 삭제됩니다.")})).catch((e=>{this.$toastr.error(e.response.data.message)}))},getInviteCode(){xc.get("/api/group/invite/"+this.seq,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.inviteCode=e.data.data})).catch((e=>{this.$toastr.error(e.response.data.message+": 잠시 후 다시 시도해주세요.")}))},isGroupDeletionVoteInProgress(){xc.get("/api/group/vote-info/"+this.seq,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.voteInfo=e.data.data}))},editUserName(){xc.get("/api/group/user/"+this.groupInfo.groupSequence,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.groupNickNameInfo=e.data.data}))},resetGroup(){xc.get("/api/group/"+this.seq,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.groupInfo=e.data.data})).catch((e=>{this.$toastr.error(e.response.data.message),this.$router.push("/groups")}))},updateGroupInfo(){null==this.groupNewName&&this.$toastr.warning("그룹 명은 비워둘 수 없습니다.");const e=new FormData,s={name:this.groupNewName,description:this.groupDescript};e.append("data",JSON.stringify(s)),null!=this.imageSrc&&e.append("file",os(this.imageSrc)),xc.post("/api/group/"+this.seq,e,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{const s=e.data.data;this.groupInfo.name=s.name,this.groupInfo.description=s.description,this.groupInfo.imageUrl=s.imageUrl}))},previewImage(e){const s=this.$refs.imgbox;e.target.files&&e.target.files[0]?this.profileImage=e.target.files[0]:s.style.backgroundImage="";const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{this.imageSrc=e.target.result},e.readAsDataURL(t)}},imagePreviewOpen(){this.isPreviewOpen=!0},closePreview(){this.isPreviewOpen=!1}}};const _a=(0,v.A)(Ya,[["render",Va],["__scopeId","data-v-7d484dce"]]);var eo=_a;const so={class:"b-container"},to={class:"title fs-5",id:"jamye-create1"},ao={class:"form-group"},oo={class:"col-auto"},io={class:"modal fade",id:"nicknameAdd",tabindex:"-1","aria-labelledby":"nicknameAdd","aria-hidden":"true"},no={class:"modal-dialog modal-dialog-centered"},lo={class:"modal-content"},ro={class:"modal-header"},co={class:"modal-body"},uo={key:0},po={key:0,class:"btn btn-dark btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},go={key:1,class:"btn btn-dark btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},mo={class:"dropdown-menu",style:{"max-height":"200px","overflow-y":"auto"}},ho=["onClick"],ko={class:"modal-footer"},bo={class:"nicknames-container"},yo=["onClick"],fo={class:"row g-2"},vo={class:"col-auto"},Co={class:"col-auto"},Lo={class:"card card-body"},wo={class:"chat-room"},So={key:0,class:"chat-message mt-3"},Io=["onClick","id"],No={class:"info-container"},Eo={class:"button-container"},qo=["onClick"],Mo=["onClick"],Uo=["onClick"],Ro=["onClick"],Xo=["onClick"],$o=["onClick"],Ao=["onClick"],Po={class:"send-date"},To=["onBlur"],xo=["onUpdate:modelValue"],Oo=["onUpdate:modelValue"],Go=["onUpdate:modelValue"],Jo={class:"image-gallery"},Do=["src","onClick"],Ko={key:1,class:"from-me"},Bo=["value","onInput"],Vo=["onClick"],Fo={class:"reply-header"},Qo={class:"reply-message"},jo={class:"image-gallery"},zo=["src","onClick"],Ho={key:1,class:"chat-message mt-3"},Wo={class:"info-container"},Zo={key:0},Yo={key:0,class:"btn btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},_o={key:1,class:"btn btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},ei={class:"dropdown-menu",style:{"max-height":"200px","overflow-y":"auto"}},si=["onClick"],ti={key:0},ai={key:1},oi={key:0},ii={class:"send-user"},ni={key:1,class:"send-user"},li={class:"button-container"},ri=["onClick"],ci=["onClick"],di=["onClick"],ui=["onClick"],pi=["onClick"],gi=["id","onClick"],mi=["onBlur"],hi=["onUpdate:modelValue"],ki=["onUpdate:modelValue"],bi=["onUpdate:modelValue","onBlur"],yi={class:"image-gallery"},fi=["src","onClick"],vi={key:1,class:"from-them"},Ci={class:"reply-header-them"},Li=["onClick"],wi={class:"reply-message-them"},Si=["value","onInput"],Ii={class:"image-gallery"},Ni=["src","onClick"],Ei={class:"info-container-them"},qi={class:"send-date"},Mi={class:"button-container"},Ui=["onClick"],Ri=["onClick"],Xi=["onClick"],$i=["onClick"],Ai=["onClick"],Pi=["onClick"],Ti=["onClick"],xi={class:"image-preview-container"},Oi=["src"];function Gi(e,s,t,i,n,l){const c=(0,o.g2)("image-box");return(0,o.uX)(),(0,o.CE)("div",so,[(0,o.Lk)("h1",to,(0,r.v_)(n.groupName)+"가챠 잼얘 넣기 - 메세지 타입",1),(0,o.Lk)("div",ao,[(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control",name:"post-title",id:"post-title","onUpdate:modelValue":s[0]||(s[0]=e=>n.postTitle=e),placeholder:"게시글 제목"},null,512),[[a.Jo,n.postTitle]])]),s[40]||(s[40]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("div",oo,[(0,o.Lk)("button",{type:"button",class:"btn btn-dark mb-3","data-bs-toggle":"modal","data-bs-target":"#nicknameAdd",onClick:s[1]||(s[1]=e=>l.groupUserList())},"프로필 닉네임 추가")]),(0,o.Lk)("div",io,[(0,o.Lk)("div",no,[(0,o.Lk)("div",lo,[(0,o.Lk)("div",ro,[s[10]||(s[10]=(0,o.Lk)("h1",{class:"modal-title fs-5",id:"jamye-create1"},"프로필 닉네임 추가",-1)),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:s[2]||(s[2]=(0,a.D$)((()=>{}),["stop"]))})]),(0,o.Lk)("div",co,[(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control",placeholder:"업로드할 메세지 이미지에 캡쳐된 상대의 이름을 입력해주세요","onUpdate:modelValue":s[3]||(s[3]=e=>n.nickname=e)},null,512),[[a.Jo,n.nickname]]),0!=n.userInGroup?((0,o.uX)(),(0,o.CE)("div",uo,[s[11]||(s[11]=(0,o.Lk)("br",null,null,-1)),null==n.userInGroupInfo?((0,o.uX)(),(0,o.CE)("button",po," 해당 회원과 매핑할 그룹 내 유저가 있다면 선택해주세요 ")):((0,o.uX)(),(0,o.CE)("button",go,(0,r.v_)(n.userInGroupInfo.nickname),1)),(0,o.Lk)("ul",mo,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.userInGroup,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e.groupUserSequence,onClick:s=>l.userInGroupSet(e),style:{padding:"8px",cursor:"pointer"}},(0,r.v_)(e.nickname),9,ho)))),128))])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",ko,[(0,o.Lk)("button",{class:"btn btn-dark",onClick:s[4]||(s[4]=(...e)=>l.nicknameAdd&&l.nicknameAdd(...e))},"추가")])])])]),(0,o.Lk)("div",bo,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.nicknames,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:"nickname"},[(0,o.eW)((0,r.v_)(e)+" ",1),(0,o.Lk)("span",{class:"remove-button",onClick:s=>l.removeNickname(e)},"X",8,yo)])))),128))]),(0,o.Lk)("div",null,[(0,o.Lk)("div",fo,[(0,o.Lk)("div",vo,[(0,o.Lk)("input",{type:"file",accept:"image/*",class:"form-control",id:"inputPassword2",placeholder:"",onChange:s[5]||(s[5]=(...e)=>l.messageImageChange&&l.messageImageChange(...e))},null,32)]),(0,o.Lk)("div",Co,[(0,o.Lk)("button",{type:"submit",class:"btn btn-dark mb-3",onClick:s[6]||(s[6]=(...e)=>l.messageListGet&&l.messageListGet(...e))},"메세지 변환")])]),s[12]||(s[12]=(0,o.Lk)("button",{type:"button",class:"btn btn-dark mb-3","data-bs-toggle":"modal","data-bs-target":"#imageModal"},"이미지 보관함",-1)),(0,o.bF)(c,{type:"MSG",imageKey:this.imageAddKey,imageSeq:this.imageAddSeq,message:this.messageResponse,imageUidMap:this.imageMap,onImageMap:l.handleImageMapUpdate,onMessageImage:l.messageUpdate},null,8,["imageKey","imageSeq","message","imageUidMap","onImageMap","onMessageImage"])]),n.replyMode?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-dark mt-3",onClick:s[7]||(s[7]=(...e)=>l.saveReplyTarget&&l.saveReplyTarget(...e))}," 저장 ")):(0,o.Q3)("",!0),(0,o.Lk)("div",Lo,[(0,o.Lk)("div",wo,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(Object.entries(n.messageResponse),(([e,t])=>((0,o.uX)(),(0,o.CE)("div",{key:e},[t.myMessage?((0,o.uX)(),(0,o.CE)("div",So,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.message,(i=>((0,o.uX)(),(0,o.CE)("div",{key:i.seq,class:"message-container-me",onClick:e=>l.scrollToMessage(i),id:"message-"+e+"_"+i.seq},[(0,o.Lk)("div",No,[(0,o.Lk)("div",Eo,[(0,o.Lk)("button",{class:"circle-btn add",onClick:s=>l.addEmptyMessage(e,i.seq)},s[13]||(s[13]=[(0,o.Lk)("i",{class:"fas fa-plus"},null,-1)]),8,qo),(0,o.Lk)("button",{class:"circle-btn up-arrow",onClick:s=>l.moveMessageUp(e,i.seq)},s[14]||(s[14]=[(0,o.Lk)("i",{class:"fas fa-arrow-up"},null,-1)]),8,Mo),(0,o.Lk)("button",{class:"circle-btn down-arrow",onClick:s=>l.moveMessageDown(e,i.seq)},s[15]||(s[15]=[(0,o.Lk)("i",{class:"fas fa-arrow-down"},null,-1)]),8,Uo),(0,o.Lk)("button",{class:"circle-btn edit",onClick:s=>l.editMessage(e,i.seq)},s[16]||(s[16]=[(0,o.Lk)("i",{class:"fas fa-pencil-alt"},null,-1)]),8,Ro),(0,o.Lk)("button",{class:"circle-btn delete",onClick:s=>l.removeMessageSeq(e,i.seq)},s[17]||(s[17]=[(0,o.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,Xo),(0,o.Lk)("button",{class:"circle-btn camera","data-bs-toggle":"modal","data-bs-target":"#imageModal",onClick:s=>l.selectImageKey(e,i.seq)},s[18]||(s[18]=[(0,o.Lk)("i",{class:"fas fa-camera"},null,-1)]),8,$o),(0,o.Lk)("button",{class:"circle-btn left",onClick:s=>l.moveLeft(e,i.seq)},s[19]||(s[19]=[(0,o.Lk)("i",{class:"fas fa-arrow-left"},null,-1)]),8,Ao)]),(0,o.Lk)("span",Po,(0,r.v_)(t.sendDate),1)]),this.isEditing[e]&&this.isEditing[e][i.seq]?((0,o.uX)(),(0,o.CE)("p",{key:0,class:"from-me",onBlur:s=>l.saveMessage(e)},[i.isReply?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.bo)((0,o.Lk)("input",{class:"reply-header","onUpdate:modelValue":e=>i.replyTo=e},null,8,xo),[[a.Jo,i.replyTo]]),s[20]||(s[20]=(0,o.Lk)("br",null,null,-1)),(0,o.bo)((0,o.Lk)("input",{class:"reply-message","onUpdate:modelValue":e=>i.replyMessage=e},null,8,Oo),[[a.Jo,i.replyMessage]]),s[21]||(s[21]=(0,o.Lk)("hr",null,null,-1))],64)):(0,o.Q3)("",!0),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>i.message=e,class:"from-me"},null,8,Go),[[a.Jo,i.message]]),(0,o.Lk)("span",Jo,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.imageKey,((e,s)=>((0,o.uX)(),(0,o.CE)("img",{key:s,src:this.imageMap[e],class:"small-image",onClick:s=>l.openPreview(e),alt:"Uploaded Image"},null,8,Do)))),128))])],40,To)):((0,o.uX)(),(0,o.CE)("p",Ko,[n.replyMode?((0,o.uX)(),(0,o.CE)("input",{key:0,type:"radio",name:"replySelect",value:e||",",onInput:s=>l.updateReplySeq(e,i.seq),class:"form-check-input mt-1"},null,40,Bo)):(0,o.Q3)("",!0),i.isReply?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.Lk)("button",{class:"btn btn-sm btn-link me-2",onClick:e=>l.toggleReplyMode(i),title:"답장 연결"}," 🔗 ",8,Vo),(0,o.Lk)("span",Fo,(0,r.v_)(i.replyTo),1),s[22]||(s[22]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("span",Qo,(0,r.v_)(i.replyMessage),1),s[23]||(s[23]=(0,o.Lk)("hr",null,null,-1))],64)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,r.v_)(i.message)+" ",1),(0,o.Lk)("span",jo,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.imageKey,((e,s)=>((0,o.uX)(),(0,o.CE)("img",{key:s,src:this.imageMap[e],class:"small-image",onClick:s=>l.openPreview(e),alt:"Uploaded Image"},null,8,zo)))),128))])]))],8,Io)))),128))])):((0,o.uX)(),(0,o.CE)("div",Ho,[(0,o.Lk)("div",Wo,[n.nickNameEdit[e]?((0,o.uX)(),(0,o.CE)("div",Zo,[null!=n.userNameMap[t.sendUser]?((0,o.uX)(),(0,o.CE)("button",Yo,(0,r.v_)(n.userNameMap[t.sendUser].nickname),1)):((0,o.uX)(),(0,o.CE)("button",_o,(0,r.v_)(t.sendUser),1)),(0,o.Lk)("ul",ei,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.nicknames,(s=>((0,o.uX)(),(0,o.CE)("li",{key:s,onClick:t=>l.editNickNameComplate(e,s),style:{padding:"8px",cursor:"pointer"}},[(0,o.eW)((0,r.v_)(s)+" ",1),n.userNameMap[s]?((0,o.uX)(),(0,o.CE)("span",ti,"| "+(0,r.v_)(n.userNameMap[s].nickname),1)):(0,o.Q3)("",!0)],8,si)))),128))])])):((0,o.uX)(),(0,o.CE)("div",ai,[null!=n.userNameMap[t.sendUser]?((0,o.uX)(),(0,o.CE)("div",oi,[(0,o.Lk)("div",ii,(0,r.v_)(n.userNameMap[t.sendUser].nickname),1)])):((0,o.uX)(),(0,o.CE)("div",ni,(0,r.v_)(t.sendUser),1))])),(0,o.Lk)("div",li,[(0,o.Lk)("button",{class:"circle-btn up-arrow",onClick:s=>l.moveSendUserUp(e)},s[24]||(s[24]=[(0,o.Lk)("i",{class:"fas fa-arrow-up"},null,-1)]),8,ri),(0,o.Lk)("button",{class:"circle-btn down-arrow",onClick:s=>l.moveSendUserDown(e)},s[25]||(s[25]=[(0,o.Lk)("i",{class:"fas fa-arrow-down"},null,-1)]),8,ci),(0,o.Lk)("button",{class:"circle-btn edit",onClick:s=>l.editNickName(e)},s[26]||(s[26]=[(0,o.Lk)("i",{class:"fas fa-pencil-alt"},null,-1)]),8,di),(0,o.Lk)("button",{class:"circle-btn delete",onClick:s=>l.removeSendUser(e)},s[27]||(s[27]=[(0,o.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,ui),(0,o.Lk)("button",{class:"circle-btn right",onClick:s=>l.moveRight(e)},s[28]||(s[28]=[(0,o.Lk)("i",{class:"fas fa-arrow-right"},null,-1)]),8,pi)])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.message,(i=>((0,o.uX)(),(0,o.CE)("div",{key:i.seq,class:"message-container",id:"message-"+e+"_"+i.seq,onClick:e=>l.scrollToMessage(i)},[this.isEditing[e]&&this.isEditing[e][i.seq]?((0,o.uX)(),(0,o.CE)("p",{key:0,class:"from-them",onBlur:s=>l.saveMessage(e,i)},[i.isReply?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.bo)((0,o.Lk)("input",{class:"reply-header-them","onUpdate:modelValue":e=>i.replyTo=e},null,8,hi),[[a.Jo,i.replyTo]]),s[29]||(s[29]=(0,o.Lk)("br",null,null,-1)),(0,o.bo)((0,o.Lk)("input",{class:"reply-message-them","onUpdate:modelValue":e=>i.replyMessage=e},null,8,ki),[[a.Jo,i.replyMessage]]),s[30]||(s[30]=(0,o.Lk)("hr",null,null,-1))],64)):(0,o.Q3)("",!0),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>i.message=e,onBlur:s=>l.saveMessage(e,i),class:"from-them"},null,40,bi),[[a.Jo,i.message]]),(0,o.Lk)("span",yi,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.imageKey,((e,s)=>((0,o.uX)(),(0,o.CE)("img",{key:s,src:this.imageMap[e],class:"small-image",onClick:s=>l.openPreview(e),alt:"Uploaded Image"},null,8,fi)))),128))])],40,mi)):((0,o.uX)(),(0,o.CE)("p",vi,[i.isReply?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.Lk)("span",Ci,(0,r.v_)(i.replyTo),1),(0,o.Lk)("button",{class:"btn btn-sm btn-link me-2",onClick:e=>l.toggleReplyMode(i),title:"답장 연결"}," 🔗 ",8,Li),s[31]||(s[31]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("span",wi,(0,r.v_)(i.replyMessage),1),s[32]||(s[32]=(0,o.Lk)("hr",null,null,-1))],64)):(0,o.Q3)("",!0),n.replyMode?((0,o.uX)(),(0,o.CE)("input",{key:1,type:"radio",name:"replySelect",value:e||",",onInput:s=>l.updateReplySeq(e,i.seq),class:"form-check-input mt-1"},null,40,Si)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,r.v_)(i.message)+" ",1),(0,o.Lk)("span",Ii,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.imageKey,((e,s)=>((0,o.uX)(),(0,o.CE)("img",{key:s,src:this.imageMap[e],class:"small-image",onClick:s=>l.openPreview(e),alt:"Uploaded Image"},null,8,Ni)))),128))])])),(0,o.Lk)("div",Ei,[(0,o.Lk)("span",qi,(0,r.v_)(t.sendDate),1),(0,o.Lk)("div",Mi,[(0,o.Lk)("button",{class:"circle-btn add",onClick:s=>l.addEmptyMessage(e,i.seq)},s[33]||(s[33]=[(0,o.Lk)("i",{class:"fas fa-plus"},null,-1)]),8,Ui),(0,o.Lk)("button",{class:"circle-btn up-arrow",onClick:s=>l.moveMessageUp(e,i.seq)},s[34]||(s[34]=[(0,o.Lk)("i",{class:"fas fa-arrow-up"},null,-1)]),8,Ri),(0,o.Lk)("button",{class:"circle-btn down-arrow",onClick:s=>l.moveMessageDown(e,i.seq)},s[35]||(s[35]=[(0,o.Lk)("i",{class:"fas fa-arrow-down"},null,-1)]),8,Xi),(0,o.Lk)("button",{class:"circle-btn edit",onClick:s=>l.editMessage(e,i.seq)},s[36]||(s[36]=[(0,o.Lk)("i",{class:"fas fa-pencil-alt"},null,-1)]),8,$i),(0,o.Lk)("button",{class:"circle-btn delete",onClick:s=>l.removeMessageSeq(e,i.seq)},s[37]||(s[37]=[(0,o.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,Ai),(0,o.Lk)("button",{class:"circle-btn camera","data-bs-toggle":"modal","data-bs-target":"#imageModal",onClick:s=>l.selectImageKey(e,i.seq)},s[38]||(s[38]=[(0,o.Lk)("i",{class:"fas fa-camera"},null,-1)]),8,Pi),(0,o.Lk)("button",{class:"circle-btn right",onClick:s=>l.moveLeft(e,i.seq)},s[39]||(s[39]=[(0,o.Lk)("i",{class:"fas fa-arrow-right"},null,-1)]),8,Ti)])])],8,gi)))),128))]))])))),128))])]),n.isPreviewOpen?((0,o.uX)(),(0,o.CE)("div",{key:1,class:"image-preview-overlay",onClick:s[8]||(s[8]=(...e)=>l.closePreview&&l.closePreview(...e))},[(0,o.Lk)("div",xi,[(0,o.Lk)("img",{src:this.imageMap[n.previewImage],alt:"Preview Image",class:"large-image"},null,8,Oi)])])):(0,o.Q3)("",!0),(0,o.Lk)("button",{class:"btn btn-dark btn-block",onClick:s[9]||(s[9]=e=>l.createPost())},"생성")])}const Ji={class:"modal fade",id:"imageModal",tabindex:"-1","aria-labelledby":"imageModalLabel","aria-hidden":"true"},Di={class:"modal-dialog modal-lg"},Ki={class:"modal-content"},Bi={class:"modal-body"},Vi={class:"mb-3"},Fi={class:"row g-3",id:"imagePreviewContainer"},Qi=["onClick"],ji={key:0},zi=["checked"],Hi=["src"],Wi={class:"modal-footer"},Zi=["disabled"],Yi=["disabled"];function _i(e,s,t,a,i,n){return(0,o.uX)(),(0,o.CE)("div",Ji,[(0,o.Lk)("div",Di,[(0,o.Lk)("div",Ki,[s[5]||(s[5]=(0,o.Lk)("div",{class:"modal-header"},[(0,o.Lk)("h5",{class:"modal-title",id:"imageModalLabel"},"이미지 임시보관함"),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,o.Lk)("div",Bi,[(0,o.Lk)("div",Vi,[s[3]||(s[3]=(0,o.Lk)("label",{for:"imageUploadInput",class:"form-label"},"이미지 업로드",-1)),(0,o.Lk)("input",{class:"form-control",accept:"image/*",type:"file",id:"imageUploadInput",onChange:s[0]||(s[0]=(...e)=>n.handleImageUpload&&n.handleImageUpload(...e)),multiple:""},null,32)]),(0,o.Lk)("div",Fi,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(Object.entries(this.localImageUidMap),(([e,s])=>((0,o.uX)(),(0,o.CE)("div",{class:"card position-relative",style:{width:"18rem",cursor:"pointer"},key:e,onClick:s=>n.toggleSelection(e)},[null!=s?((0,o.uX)(),(0,o.CE)("div",ji,[(0,o.Lk)("input",{type:"checkbox",class:"form-check-input position-absolute",style:{top:"10px",left:"10px","z-index":"1"},checked:i.selectedImages.includes(e),readonly:""},null,8,zi),(0,o.Lk)("img",{src:s,class:"card-img-top",alt:"Uploaded Image"},null,8,Hi)])):(0,o.Q3)("",!0)],8,Qi)))),128))])]),(0,o.Lk)("div",Wi,[null!=this.imageKey&&null!=this.imageSeq||null!=this.cursorPosition?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-primary me-2",disabled:0===i.selectedImages.length,onClick:s[1]||(s[1]=(...e)=>n.insertSelectedImages&&n.insertSelectedImages(...e))}," 삽입 ",8,Zi)):(0,o.Q3)("",!0),(0,o.Lk)("button",{class:"btn btn-danger",disabled:0===i.selectedImages.length,onClick:s[2]||(s[2]=(...e)=>n.deleteSelectedImages&&n.deleteSelectedImages(...e))}," 삭제 ",8,Yi),s[4]||(s[4]=(0,o.Lk)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"},"닫기",-1))])])])])}var en=t(4963),sn={data(){return{images:[],selectedImages:[],localMessage:this.message,localImageUidMap:this.imageUidMap}},props:{imageKey:Number,imageSeq:Number,message:Map,type:String,imageUidMap:{type:Object,required:!0},cursorPosition:Number},watch:{message:{deep:!0,handler(e){this.localMessage=e}}},setup(){},methods:{toggleSelection(e){const s=this.selectedImages.indexOf(e);-1===s?this.selectedImages.push(e):this.selectedImages.splice(s,1)},insertSelectedImages(){"MSG"==this.type?(this.localMessage[this.imageKey]&&Array.isArray(this.localMessage[this.imageKey].message)&&(this.localMessage[this.imageKey].message.forEach((e=>{e.seq>this.imageSeq&&(e.seq=e.seq+1)})),this.localMessage[this.imageKey].message.push({seq:this.imageSeq+1,imageKey:this.selectedImages}),this.localMessage[this.imageKey].message.sort(((e,s)=>e.seq-s.seq)),this.$emit("messageUpdate",this.localMessage)),this.selectedImages=[]):"POST"==this.type&&this.$emit("addImageAtCursor",this.selectedImages)},deleteSelectedImages(){const e=this.selectedImages.filter((e=>Object.values(this.localMessage).some((s=>s.message.some((s=>s.imageKey?.includes(e)))))));e.length>0?this.$toastr.error("선택한 이미지 중 사용 중인 이미지가 있어 삭제할 수 없습니다."):(this.selectedImages.forEach((e=>{this.localImageUidMap[e]=null})),this.selectedImages=[])},handleImageUpload(e){const s=Array.from(e.target.files);s.forEach((e=>{const s=new FileReader;s.onload=e=>{this.images.push(e.target.result);const s=(0,en.A)();this.localImageUidMap[s]=e.target.result},s.readAsDataURL(e)})),e.target.value="",this.$emit("imageMap",this.localImageUidMap)}}};const tn=(0,v.A)(sn,[["render",_i]]);var an=tn,on={components:{ImageBox:an},data(){return{groupName:null,nickname:null,nicknames:[],name:null,messageImage:null,isEditing:{},nickNameEdit:{},postType:null,postTitle:null,detail:null,userInGroup:[],userInGroupInfo:null,userNameMap:new Map,replyMode:!1,selectedReplyKey:null,selectedReplySeq:null,replyOriginMessage:null,selectedImages:[],imageAddKey:null,imageAddSeq:null,isPreviewOpen:!1,previewImage:null,imageMap:{},messageResponse:{}}},props:{seq:Number,isLogin:{type:Boolean,required:!0}},created(){var e=this.$cookies.get("group");this.isLogin?null==e?(this.$toastr.warning("메세지를 작성할 그룹을 먼저 선택해주세요"),this.$router.push("/")):this.groupName=e.name:(this.$toastr.warning("로그인 후 게시글 작성이 가능합니다."),this.$router.push("/login"))},methods:{nicknameAdd(){null!=this.nickname?(this.nicknames.push(this.nickname),this.userNameMap[this.nickname]=this.userInGroupInfo,this.nickname=null,this.userInGroupInfo=null):this.$toastr.warning("프로필 이름을 먼저 입력해주세요")},removeNickname(e){this.nicknames=this.nicknames.filter((s=>s!==e))},messageListGet(){if(null==this.messageImage)return void this.$toastr.warning("메세지 변환할 이미지를 첨부해주세요");const e=new FormData;e.append("image",this.messageImage);const s=[...this.nicknames].join(",");xc.post("/api/post/message-text?sendUser="+s,e,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{if(null!=this.messageResponse&&0!=Object.keys(this.messageResponse).length){const s=Math.max(...Object.keys(this.messageResponse).map(Number));for(let[t,a]of Object.entries(e.data.data))this.messageResponse[Number(s)+Number(t)]=a}else this.messageResponse=e.data.data})).catch((e=>{this.$toastr.error(e.data.message)}))},messageImageChange(e){const s=this.$refs.imgbox;e.target.files&&e.target.files[0]?this.messageImage=e.target.files[0]:s.style.backgroundImage=""},editMessage(e,s){this.isEditing[e]||(this.isEditing[e]={}),this.isEditing[e][s]?this.isEditing[e][s]=!1:this.isEditing[e][s]=!0},saveMessage(e){this.isEditing[e]=!1},removeMessageSeq(e,s){this.messageResponse[e]&&Array.isArray(this.messageResponse[e].message)&&(this.messageResponse[e].message=this.messageResponse[e].message.filter((e=>e.seq!==s)),this.messageResponse[e].message.forEach((e=>{e.seq>s&&(e.seq=e.seq-1)})),this.isEditing[e]||(this.isEditing[e]={}),this.isEditing[e][s]=!1);var t=1,a=new Map;for(let[,o]of Object.entries(this.messageResponse))0!=o.message.length&&(a[t++]=o);this.messageResponse=a},addEmptyMessage(e,s){this.messageResponse[e]&&Array.isArray(this.messageResponse[e].message)&&(this.messageResponse[e].message.forEach((e=>{e.seq>s&&(e.seq=e.seq+1)})),this.messageResponse[e].message.push({seq:s+1,message:"."}),this.messageResponse[e].message.sort(((e,s)=>e.seq-s.seq)),this.isEditing[s+1]&&this.editMessage(e,s+1+1),this.editMessage(e,s+1))},moveLeft(e,s){console.log(`start - key=${e}, seq=${s}`);const t=this.messageResponse[e]?.message||[],a=t.findIndex((e=>e.seq===s));if(-1===a)return void console.error("해당 seq를 가진 메시지가 없습니다.");const[o]=t.splice(a,1);console.log(o);var i=new Map,n=1;for(let[p,g]of Object.entries(this.messageResponse))if(p==e){var l=[],r=1,c=[];0==g.message.length&&(n+=2);for(const e of g.message)e.seq>s?(console.log("downCheck"+e.message),l.push({...e,seq:r++}),console.log("addCheck"+JSON.stringify(l))):(console.log("originCheck"+JSON.stringify(e.message)),c.push(e));0!=c.length&&(i[n++]={...g,message:c},console.log("origin"+JSON.stringify(c))),0!=l.length&&(n+=2,i[n++]={...g,message:l},console.log("down:"+JSON.stringify(l)))}else Number(p)>Number(e)?(console.log(`id=${p}, key=${e}`),console.log("2down"+JSON.stringify(g)),n+=2,i[n++]=g):(console.log("std"+n+JSON.stringify(g)),i[n++]=g);console.log(JSON.stringify(i)),this.messageResponse=i;const d=Number(e)+1;o.seq=1;var u="임시";console.log(this.nicknames),console.log(this.nicknames.length),null!=this.nicknames&&void 0!=this.nicknames.length&&0!=this.nicknames.length&&(console.log("??"),u=this.nicknames[0],console.log(u),console.log(this.userNameMap[u])),console.log(d),this.messageResponse[d]={sendUserSeq:this.userNameMap[u],sendUser:u,message:[]},this.messageResponse[d].message.unshift(o),this.messageResponseTempRemove(this.messageResponse)},moveMessageUp(e,s){if(1==e&&1==s)return;const t=this.messageResponse[e].message;if(1===s){var a=JSON.parse(JSON.stringify(this.messageResponse[e-1]));if(1==a.message.length){var o=JSON.parse(JSON.stringify(this.messageResponse[e])),i=o.message.shift();this.messageResponse[e-1]={...this.messageResponse[e],message:[i]},this.messageResponse[e]=a;var n=new Map,l=1;for(let[s,t]of Object.entries(this.messageResponse))console.log(l),0!=o.message.length&&s==Number(e)+1&&(n[l++]=o),n[l++]=t;return void this.messageResponseTempRemove(n)}var r=JSON.parse(JSON.stringify(this.messageResponse[e].message.filter((e=>e.seq==s))));this.messageResponse[e].message=this.messageResponse[e].message.filter((e=>e.seq!=s)),console.log(JSON.parse(JSON.stringify(r)));var c=1;0!=this.messageResponse[e].message.length&&this.messageResponse[e].message.forEach((e=>{e.seq=c++})),console.log(JSON.parse(JSON.stringify(this.messageResponse[e])));var d=JSON.parse(JSON.stringify(this.messageResponse[e]));if(console.log(JSON.parse(JSON.stringify(a))),a.sendUser==r.sendUser){const s=a.message.reduce(((e,s)=>s.seq>e?s.seq:e),0);var u=a.message.pop();console.log("maxMsg"),console.log(JSON.parse(JSON.stringify(u)));var p=r.pop();console.log("lastMessage"),console.log(JSON.parse(JSON.stringify(p))),a.message.push({seq:s,message:p.message,imageKey:p.imageKey,imageUri:p.imageUri,isReply:p.isReply,replyMessage:p.replyMessage,replyTo:p.replyTo}),a.message.push({seq:s+1,message:u.message,imageKey:u.imageKey,imageUri:u.imageUri,isReply:u.isReply,replyMessage:u.replyMessage,replyTo:u.replyTo}),console.log("mm"),console.log(JSON.parse(JSON.stringify(a))),this.messageResponse[e-1].message=[]}else a.message=[a.message.pop()],d.message=r,d.sendDate=null;const t=a.message.reduce(((e,s)=>s.seq>e?s.seq:e),0);this.messageResponse[e-1].message=this.messageResponse[e-1].message.filter((e=>e.seq!=t));var g=new Map,m=1;console.log(JSON.parse(JSON.stringify(d)));for(let[s,o]of Object.entries(this.messageResponse))s==e?(0!=d.message.length&&e==m&&(g[m++]=d,console.log("new"),console.log(m),console.log(JSON.parse(JSON.stringify(g)))),0!=a.message.length&&(g[m++]=a,console.log("pre"),console.log(m),console.log(JSON.parse(JSON.stringify(g)))),0!=o.message.length&&(g[m++]=o,console.log("length"),console.log(m),console.log(JSON.parse(JSON.stringify(g))))):0!=o.message.length&&(g[m++]=o);console.log("last"),console.log(JSON.parse(JSON.stringify(g))),this.messageResponseTempRemove(g)}else{const e=t.findIndex((e=>e.seq===s));e>0&&([t[e-1],t[e]]=[t[e],t[e-1]],t[e-1].seq-=1,t[e].seq+=1)}},moveMessageDown(e,s){const t=Math.max(...Object.keys(this.messageResponse).map(Number)),a=this.messageResponse[t].message.reduce(((e,s)=>s.seq>e?s.seq:e),0);if(e==t&&s==a)return;const o=this.messageResponse[e].message,i=o.reduce(((e,s)=>s.seq>e?s.seq:e),0);if(s===i){var n=JSON.parse(JSON.stringify(this.messageResponse[e]));n.message=[];var l=this.messageResponse[e].message.pop();n.message.push({seq:1,message:l.message,imageKey:l.imageKey,imageUri:l.imageUri,isReply:l.isReply,replyMessage:l.replyMessage,replyTo:l.replyTo});var r=Number(e)+1,c=JSON.parse(JSON.stringify(this.messageResponse[r]));c.message=this.messageResponse[r].message.filter((e=>1==e.seq)),this.messageResponse[r].message=this.messageResponse[r].message.filter((e=>1!=e.seq));var d=1;0!=this.messageResponse[r].message.length&&this.messageResponse[r].message.forEach((e=>{e.seq=d++}));var u=new Map,p=1;for(let[s,t]of Object.entries(this.messageResponse))s==e?(0!=t.message.length&&(u[p++]=t),0!=c.message.length&&(u[p++]=c),0!=n.message.length&&(u[p++]=n)):0!=t.message.length&&(u[p++]=t);this.messageResponseTempRemove(u)}else{const e=o.findIndex((e=>e.seq===s));e<o.length-1&&([o[e],o[e+1]]=[o[e+1],o[e]],o[e].seq-=1,o[e+1].seq+=1)}},createPost(){if(null==this.postTitle){this.$toastr.warning("게시글 제목을 입력해주세요");const e=document.getElementById("post-title");return void(e&&e.scrollIntoView({behavior:"smooth",block:"start"}))}const e=new FormData;Object.entries(this.imageMap).forEach((([s,t])=>{t instanceof File?e.append(s,t):e.append(s,os(t))}));const s=this.$cookies.get("group").groupSequence,t={title:this.postTitle,groupSeq:s,content:this.messageResponse};e.append("data",JSON.stringify(t));var a=new Map;console.log(this.userNameMap);for(let[o,i]of Object.entries(this.userNameMap))a[o]=null!=i?i.groupUserSequence:null;e.append("nickNameMap",JSON.stringify(a)),xc.post("/api/post/message",e,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.$router.push("/jamye/message"+e.data.data)}))},groupUserList(){xc.get("/api/group/users/"+this.$cookies.get("group").groupSequence,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.userInGroup=e.data.data}))},userInGroupSet(e){this.userInGroupInfo=e},removeImage(){},toggleReplyMode(e){this.replyMode=!this.replyMode,this.replyMode?this.replyOriginMessage=e:(this.selectedReplyKey=null,this.selectedReplySeq=null,this.replyOriginMessage=null)},saveReplyTarget(){null!=this.selectedReplyKey&&null!=this.selectedReplySeq?(this.replyOriginMessage.replyToKey=this.selectedReplyKey,this.replyOriginMessage.replyToSeq=this.selectedReplySeq,this.replyMode=!1,this.selectedReplySeq=null,this.selectedReplyKey=null):this.$toastr.warning("연결할 메세지를 선택해주세요")},scrollToMessage(e){if(void 0==e.replyToKey||null==e.replyToKey||void 0==e.replyToSeq||null==e.replyToSeq)return;const s=`message-${e.replyToKey}_${e.replyToSeq}`,t=document.getElementById(s);t&&(t.scrollIntoView({behavior:"smooth",block:"start"}),t.classList.add("shake"),setTimeout((()=>{t.classList.remove("shake")}),500))},updateReplySeq(e,s){this.selectedReplyKey=e,this.selectedReplySeq=s},selectImageKey(e,s){this.imageAddKey=e,this.imageAddSeq=s},openPreview(e){this.previewImage=e,this.isPreviewOpen=!0},closePreview(){this.isPreviewOpen=!1,this.previewImage=null},handleImageMapUpdate(e){this.imageMap=e},messageUpdate(e){this.messageResponse=e},messageResponseTempRemove(e){var s=new Map,t=null,a=1;for(let[i,n]of Object.entries(e))if(1!=i){if(n.sendUser==t){var o=s[a-1].message.reduce(((e,s)=>s.seq>e?s.seq:e),0);n.message.forEach((e=>s[a-1].message.push({seq:++o,message:e.message,imageKey:e.imageKey,imageUri:e.imageUri,isReply:e.isReply,replyMessage:e.replyMessage,replyTo:e.replyTo})))}else s[a++]=n;t=n.sendUser}else t=n.sendUser,s[a++]=n;this.messageResponse=JSON.parse(JSON.stringify(s))},moveSendUserUp(e){if(1==e)return;const s=Number(e)-Number(1),t=JSON.parse(JSON.stringify(this.messageResponse[e])),a=JSON.parse(JSON.stringify(this.messageResponse[s]));this.messageResponse[e]=a,this.messageResponse[s]=t,this.messageResponseTempRemove(this.messageResponse)},moveSendUserDown(e){const s=Math.max(...Object.keys(this.messageResponse).map(Number));if(e==s)return;const t=Number(e)+Number(1),a=JSON.parse(JSON.stringify(this.messageResponse[t])),o=JSON.parse(JSON.stringify(this.messageResponse[e]));this.messageResponse[e]=a,this.messageResponse[t]=o,this.messageResponseTempRemove(this.messageResponse)},removeSendUser(e){delete this.messageResponse[e],this.messageResponseTempRemove(this.messageResponse)},moveRight(e){this.messageResponse[e]={...this.messageResponse[e],sendUser:null,myMessage:!0},this.messageResponseTempRemove(this.messageResponse)},editNickName(e){this.nickNameEdit[e]=!0},editNickNameComplate(e,s){this.nickNameEdit[e]=!1,this.messageResponse[e].sendUser=s,null!=this.userNameMap[s]&&(this.messageResponse[e].sendUserSeq=this.userNameMap[s])}}};const nn=(0,v.A)(on,[["render",Gi]]);var ln=nn;const rn={class:"b-container"},cn={class:"title",id:"jamye-create1"},dn={class:"form-group"},un={class:"post-container"};function pn(e,s,t,i,n,l){const c=(0,o.g2)("image-box");return(0,o.uX)(),(0,o.CE)("div",rn,[(0,o.Lk)("h1",cn,(0,r.v_)(n.groupName)+"가챠 잼얘 넣기 - 게시글 타입",1),(0,o.Lk)("div",dn,[(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control",name:"post-title",id:"post-title","onUpdate:modelValue":s[0]||(s[0]=s=>e.postTitle=s),placeholder:"게시글 제목"},null,512),[[a.Jo,e.postTitle]])]),s[3]||(s[3]=(0,o.Lk)("button",{type:"button",class:"btn btn-dark mb-3 btn-imgbox","data-bs-toggle":"modal","data-bs-target":"#imageModal"},"이미지 보관함",-1)),(0,o.bF)(c,{type:"POST",cursorPosition:this.cursorPosition,imageUidMap:this.imageMap,onImageMap:l.handleImageMapUpdate,onAddImageAtCursor:l.addImageAtCursor},null,8,["cursorPosition","imageUidMap","onImageMap","onAddImageAtCursor"]),(0,o.Lk)("div",un,[(0,o.Lk)("div",{id:"content",class:"post-input",contenteditable:"true",ref:"postArea",onInput:s[1]||(s[1]=(...e)=>l.syncPostContent&&l.syncPostContent(...e)),placeholder:"게시글 내용을 입력하세요..."},null,544)]),(0,o.Lk)("button",{class:"btn btn-dark btn-block",onClick:s[2]||(s[2]=e=>l.createPost())},"생성")])}var gn={components:{ImageBox:an},data(){return{groupName:null,isPreviewOpen:!1,previewImage:null,imageMap:{},cursorPosition:null,postContent:String}},props:{seq:Number,isLogin:{type:Boolean,required:!0}},created(){var e=this.$cookies.get("group");this.isLogin?null==e?(this.$toastr.warning("게시글을 작성할 그룹을 먼저 선택해주세요"),this.$router.push("/")):this.groupName=e.name:(this.$toastr.warning("로그인 후 게시글 작성이 가능합니다."),this.$router.push("/login"))},methods:{syncPostContent(){this.postContent=this.$refs.postArea.innerHTML;const e=window.getSelection();e.rangeCount>0&&(this.cursorPosition=e.getRangeAt(0))},addImageAtCursor(e){e.forEach((e=>{const s=this.imageMap[e],t=`<br><img src="${s}" alt="image" width="200" height="auto"/>`;document.execCommand("insertHTML",!1,t)})),this.postContent=this.$refs.postArea.innerHTML,this.moveCursorToEnd()},moveCursorToEnd(){const e=this.$refs.postArea,s=window.getSelection(),t=document.createRange();t.selectNodeContents(e),t.collapse(!1),s.removeAllRanges(),s.addRange(t),e.focus()},createPost(){if(null==this.postTitle){this.$toastr.warning("게시글 제목을 입력해주세요");const e=document.getElementById("post-title");return void(e&&e.scrollIntoView({behavior:"smooth",block:"start"}))}if(this.postContent&&this.postContent.toString()===String.toString())return void this.$toastr.warning("게시글 내용을 입력해주세요");const e=new FormData;Object.entries(this.imageMap).forEach((([s,t])=>{t instanceof File?e.append(s,t):e.append(s,os(t))}));var s=this.postContent.replace(/<img([^>]+)src="([^"]+)"([^>]*)>/g,((e,s,t,a)=>{const o=Object.keys(this.imageMap).find((e=>this.imageMap[e]===t));return o?`<img${s}src="${o}"${a}>`:e}));const t=this.$cookies.get("group").groupSequence,a={title:this.postTitle,groupSeq:t,content:{content:s}};e.append("data",JSON.stringify(a)),xc.post("/api/post/board",e,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.$router.push("/jamye/board"+e.data.data)}))},handleImageMapUpdate(e){this.imageMap=e}}};const mn=(0,v.A)(gn,[["render",pn]]);var hn=mn;const kn={class:"b-container"},bn={class:"title",id:"jamye-create1"},yn={key:0,class:"jamye-info-box-container"},fn=["onClick"],vn={class:"jamye-header"},Cn={class:"jamye-type"},Ln={class:"jamye-title"},wn={key:0,class:"isViewable"},Sn={class:"jamye-detail"},In={key:1};function Nn(e,s,t,a,i,n){return(0,o.uX)(),(0,o.CE)("div",kn,[(0,o.Lk)("h1",bn,(0,r.v_)(e.groupName)+" 가챠 잼얘 목록",1),0!=i.jamyes.length?((0,o.uX)(),(0,o.CE)("div",yn,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.jamyes,(e=>((0,o.uX)(),(0,o.CE)("div",{class:(0,r.C4)(["jamye-info-box",{selectable:e.isViewable}]),key:e.postSequenc,onClick:s=>n.movePost(e.postType,e.postSequence,e.isViewable)},[(0,o.Lk)("div",vn,[(0,o.Lk)("div",Cn,(0,r.v_)(e.postTypeName),1),(0,o.Lk)("div",Ln,(0,r.v_)(e.title),1),e.isViewable?((0,o.uX)(),(0,o.CE)("div",wn,(0,r.v_)(e.isViewableName),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Sn,[(0,o.Lk)("div",null,"작성자: "+(0,r.v_)(e.createdUserNickName),1),(0,o.Lk)("div",null,"생성일: "+(0,r.v_)(e.createDate),1),(0,o.Lk)("div",null,"수정일: "+(0,r.v_)(e.updateDate),1)])],10,fn)))),128))])):((0,o.uX)(),(0,o.CE)("div",In," 등록된 잼얘가 없습니다. "))])}var En={data(){return{jamyes:{}}},props:{isLogin:{type:Boolean,required:!0}},created(){var e=this.$cookies.get("group");if(this.isLogin){if(null==e)return this.$toastr.warning("잼얘를 조회할 그룹을 먼저 선택해주세요"),void this.$router.push("/");this.groupName=e.name}else this.$toastr.warning("로그인 후 조회 가능합니다."),this.$router.push("/login");xc.get("/api/post/"+e.groupSequence,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{const s=e.data.data,t=e=>{const s=new Date(e);return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")} ${String(s.getHours()).padStart(2,"0")}:${String(s.getMinutes()).padStart(2,"0")}`};s.forEach((e=>{e.createDate&&(e.createDate=t(e.createDate)),e.updateDate&&(e.updateDate=t(e.updateDate)),"MSG"==e.postType?e.postTypeName="메세지":e.postTypeName="포스트",e.isViewable&&(e.isViewableName="보유")})),this.jamyes=s}))},methods:{movePost(e,s,t){t&&("MSG"==e?this.$router.push("/jamye/message"+s):"BOR"==e&&this.$router.push("/jamye/board"+s))}}};const qn=(0,v.A)(En,[["render",Nn]]);var Mn=qn;const Un={class:"b-container"},Rn={key:0},Xn={key:1},$n={class:"title"},An={class:"create-user"},Pn={key:2,class:"editModeOpen"},Tn={key:3},xn=["innerHTML"],On={key:5,class:"post-container"};function Gn(e,s,t,i,n,l){const c=(0,o.g2)("image-box"),d=(0,o.g2)("comment-list");return(0,o.uX)(),(0,o.CE)("div",Un,[n.isEditing?((0,o.uX)(),(0,o.CE)("div",Rn,[(0,o.bo)((0,o.Lk)("input",{class:"title",type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>n.board.title=e),style:{width:"100%"}},null,512),[[a.Jo,n.board.title]])])):((0,o.uX)(),(0,o.CE)("div",Xn,[(0,o.Lk)("h1",$n,(0,r.v_)(n.board.title),1)])),(0,o.Lk)("div",An,"작성자: "+(0,r.v_)(n.board.createdUserNickName),1),n.isEditing||n.board.createdUserSequence!=e.$cookies.get("sequence")?n.isEditing&&n.board.createdUserSequence==e.$cookies.get("sequence")?((0,o.uX)(),(0,o.CE)("div",Tn,[s[4]||(s[4]=(0,o.Lk)("button",{type:"button",class:"btn btn-dark btn-imgbox","data-bs-toggle":"modal","data-bs-target":"#imageModal"},"이미지 보관함",-1)),(0,o.bF)(c,{type:"POST",cursorPosition:this.cursorPosition,imageUidMap:this.imageMap,onImageMap:l.handleImageMapUpdate,onAddImageAtCursor:l.addImageAtCursor},null,8,["cursorPosition","imageUidMap","onImageMap","onAddImageAtCursor"]),(0,o.Lk)("button",{onClick:s[2]||(s[2]=(...e)=>l.editModeComplate&&l.editModeComplate(...e)),class:"btn btn-dark"},"수정완료")])):(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Pn,[(0,o.Lk)("button",{onClick:s[1]||(s[1]=(...e)=>l.editMode&&l.editMode(...e)),class:"btn btn-dark"},"수정하기")])),n.isEditing?((0,o.uX)(),(0,o.CE)("div",On,[(0,o.Lk)("div",{id:"content",class:"post-input",contenteditable:"true",ref:"postArea",onInput:s[3]||(s[3]=(...e)=>l.syncPostContent&&l.syncPostContent(...e)),placeholder:"게시글 내용을 입력하세요..."},null,544)])):((0,o.uX)(),(0,o.CE)("div",{key:4,innerHTML:n.content,class:"post-container-view"},null,8,xn)),(0,o.bF)(d,{class:"comment",postSeq:t.postSeq},null,8,["postSeq"])])}t(7642),t(8004),t(3853),t(5876),t(2475),t(5024),t(1698);const Jn={class:"input-group mb-3"},Dn={key:0},Kn={class:"comment"},Bn={class:"comment-body"},Vn={class:"comment-header"},Fn={class:"comment-author"},Qn={class:"comment-date"},jn={key:0,class:"comment-actions"},zn=["onClick"],Hn=["onClick"],Wn=["onClick"],Zn={key:0},Yn=["onUpdate:modelValue"],_n={key:1,class:"comment-text"},el={key:1};function sl(e,s,t,i,n,l){return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",Jn,[s[2]||(s[2]=(0,o.Lk)("span",{class:"input-group-text"},"댓글",-1)),(0,o.bo)((0,o.Lk)("textarea",{class:"form-control","aria-label":"With textarea","onUpdate:modelValue":s[0]||(s[0]=e=>n.comment=e)},null,512),[[a.Jo,n.comment]]),(0,o.Lk)("button",{class:"btn btn-outline-dark",type:"button",id:"button-addon1",onClick:s[1]||(s[1]=(...e)=>l.createComment&&l.createComment(...e))},"등록")]),0!=n.comments.length?((0,o.uX)(),(0,o.CE)("div",Dn,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.comments,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"comments",key:e.commentSeq},[(0,o.Lk)("div",Kn,[(0,o.Lk)("div",Bn,[(0,o.Lk)("div",Vn,[(0,o.Lk)("span",Fn,(0,r.v_)(e.nickName),1),(0,o.Lk)("span",Qn,(0,r.v_)(e.updateDate),1),n.userSeq==e.userSeq?((0,o.uX)(),(0,o.CE)("div",jn,[null==n.isEditingSeq||n.isEditingSeq!=e.commentSeq?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"edit-btn",title:"수정",onClick:s=>l.editComment(e.commentSeq)},"✎",8,zn)):((0,o.uX)(),(0,o.CE)("button",{key:1,class:"complete-btn",onClick:s=>l.completeEdit(e)},"✔️",8,Hn)),(0,o.Lk)("button",{class:"delete-btn",title:"삭제",onClick:s=>l.deleteComment(e.commentSeq)},"✖",8,Wn)])):(0,o.Q3)("",!0)]),null!=n.isEditingSeq&&n.isEditingSeq==e.commentSeq?((0,o.uX)(),(0,o.CE)("div",Zn,[(0,o.bo)((0,o.Lk)("input",{class:"comment-edit-input","onUpdate:modelValue":s=>e.comment=s,ref_for:!0,ref:"editInput"},null,8,Yn),[[a.Jo,e.comment]])])):((0,o.uX)(),(0,o.CE)("div",_n,(0,r.v_)(e.comment),1))])])])))),128))])):((0,o.uX)(),(0,o.CE)("div",el," 등록된 댓글이 없습니다 "))],64)}var tl={props:{postSeq:{type:Number,requeire:!0}},data(){return{groupSeq:null,comments:{},comment:null,userSeq:null,isEditingSeq:null}},created(){this.userSeq=this.$cookies.get("sequence");var e=this.$cookies.get("group");if(null==e)return this.$toastr.warning("그룹을 먼저 선택해주세요"),void this.$router.push("/");this.groupSeq=e.groupSequence,this.getCommentList()},methods:{getCommentList(){xc.get(`/api/comment/${this.groupSeq}/${this.postSeq}`,{headers:{Authorization:`Bearer ${this.$cookies.get("accessToken")}`}}).then((e=>{this.comments=e.data.data}))},createComment(){null!=this.comment&&""!==this.comment.trim()?xc.post(`/api/comment/${this.groupSeq}/${this.postSeq}`,{comment:this.comment},{headers:{Authorization:`Bearer ${this.$cookies.get("accessToken")}`}}).then((()=>{this.getCommentList(),this.comment=null})):this.$toastr.warning("댓글을 먼저 입력해주세요")},editComment(e){this.isEditingSeq=e,this.$nextTick((()=>{Array.isArray(this.$refs.editInput)?this.$refs.editInput[0].focus():this.$refs.editInput.focus()}))},completeEdit(e){this.isEditingSeq=null,xc.post(`/api/comment/${this.groupSeq}/${this.postSeq}/${e.commentSeq}`,{comment:e.comment},{headers:{Authorization:`Bearer ${this.$cookies.get("accessToken")}`}})},deleteComment(e){xc.delete(`/api/comment/${this.groupSeq}/${this.postSeq}/${e}`,{headers:{Authorization:`Bearer ${this.$cookies.get("accessToken")}`}}).then((()=>{this.getCommentList()}))}}};const al=(0,v.A)(tl,[["render",sl]]);var ol=al,il={components:{ImageBox:an,CommentList:ol},data(){return{board:{},isEditing:!1,previewImage:null,isPreviewOpen:!1,imageMap:{},imageAddKey:null,imageAddSeq:null,nickNameMap:{},deleteSeqs:new Set,userInGroup:{},selectedUser:null,content:"",cursorPosition:null,postContent:String}},props:{postSeq:Number,isLogin:{type:Boolean,required:!0}},created(){var e=this.$cookies.get("group");this.isLogin?null==e?(this.$toastr.warning("메세지를 작성할 그룹을 먼저 선택해주세요"),this.$router.push("/")):xc.get(`/api/post/${e.groupSequence}/${this.postSeq}`,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.board=e.data.data,this.content=e.data.data.content.content,this.postContent=this.content})):(this.$toastr.warning("로그인 후 게시글 작성이 가능합니다."),this.$router.push("/login"))},methods:{editMode(){this.isEditing=!0,this.$nextTick((()=>{this.$refs.postArea.innerHTML=this.content}))},editModeComplate(){this.isEditing=!1;const e=new FormData;Object.entries(this.imageMap).forEach((([s,t])=>{t instanceof File?e.append(s,t):e.append(s,os(t))}));var s=this.postContent.replace(/<img([^>]+)src="([^"]+)"([^>]*)>/g,((e,s,t,a)=>{const o=Object.keys(this.imageMap).find((e=>this.imageMap[e]===t));return o?`<img${s}src="${o}"${a}>`:e}));const t=this.$cookies.get("group").groupSequence,a={title:this.board.title,content:s};e.append("data",JSON.stringify(a)),xc.post(`/api/post/board/${t}/${this.postSeq}`,e,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.content=e.data.data}))},openPreview(e){this.previewImage=e,this.isPreviewOpen=!0},closePreview(){this.isPreviewOpen=!1,this.previewImage=null},selectImageKey(e,s){this.imageAddKey=e,this.imageAddSeq=s},syncPostContent(){this.postContent=this.$refs.postArea.innerHTML;const e=window.getSelection();e.rangeCount>0&&(this.cursorPosition=e.getRangeAt(0))},handleImageMapUpdate(e){this.imageMap=e},addImageAtCursor(e){e.forEach((e=>{const s=this.imageMap[e],t=`<br><img src="${s}" alt="image" width="200" height="auto"/>`;document.execCommand("insertHTML",!1,t)})),this.postContent=this.$refs.postArea.innerHTML,this.moveCursorToEnd()},moveCursorToEnd(){const e=this.$refs.postArea,s=window.getSelection(),t=document.createRange();t.selectNodeContents(e),t.collapse(!1),s.removeAllRanges(),s.addRange(t),e.focus()}}};const nl=(0,v.A)(il,[["render",Gn]]);var ll=nl;const rl={class:"b-container"},cl={key:0},dl={key:1},ul={class:"title"},pl={class:"create-user"},gl={key:2,class:"editModeOpen"},ml={key:3,class:"editMode"},hl={class:"modal fade",id:"nickNameMapping",tabindex:"-1","aria-labelledby":"nickNameMapping","aria-hidden":"true"},kl={class:"modal-dialog modal-dialog-centered"},bl={class:"modal-content"},yl={class:"modal-body"},fl={key:0},vl={key:0,class:"btn btn-dark btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Cl={key:1,class:"btn btn-dark btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Ll={class:"dropdown-menu",style:{"max-height":"200px","overflow-y":"auto"}},wl=["onClick"],Sl=["onClick"],Il={key:0,class:"nickNameAdd"},Nl={class:"btn btn-dark btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},El={class:"dropdown-menu",style:{"max-height":"200px","overflow-y":"auto"}},ql=["onClick"],Ml={class:"modal-footer"},Ul={class:"card card-body"},Rl={class:"chat-room"},Xl={key:0,class:"chat-message mt-3"},$l=["onClick","id"],Al={class:"info-container"},Pl={key:0,class:"button-container"},Tl=["onClick"],xl=["onClick"],Ol=["onClick"],Gl=["onClick"],Jl=["onClick"],Dl=["onClick"],Kl=["onClick"],Bl={class:"send-date"},Vl=["onBlur"],Fl=["onUpdate:modelValue"],Ql=["onUpdate:modelValue"],jl=["onUpdate:modelValue"],zl={class:"image-gallery"},Hl=["src","onClick"],Wl=["src","onClick"],Zl={key:1,class:"from-me"},Yl=["value","onInput"],_l=["onClick"],er={class:"reply-header"},sr={class:"reply-message"},tr={class:"image-gallery"},ar=["src","onClick"],or=["src","onClick"],ir={key:1,class:"chat-message mt-3"},nr={class:"info-container"},lr={key:0},rr={key:0},cr={key:0,class:"btn btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},dr={key:1,class:"btn btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},ur={class:"dropdown-menu",style:{"max-height":"200px","overflow-y":"auto"}},pr=["onClick"],gr={key:0},mr={key:1},hr={key:0},kr={key:0},br={class:"send-user"},yr={key:1},fr={class:"send-user"},vr={key:2,class:"button-container"},Cr=["onClick"],Lr=["onClick"],wr=["onClick"],Sr=["onClick"],Ir=["onClick"],Nr=["id","onClick"],Er=["onBlur"],qr=["onUpdate:modelValue"],Mr=["onUpdate:modelValue"],Ur=["onUpdate:modelValue","onBlur"],Rr={class:"image-gallery"},Xr=["src","onClick"],$r=["src","onClick"],Ar={key:1,class:"from-them"},Pr={class:"reply-header-them"},Tr=["onClick"],xr={class:"reply-message-them"},Or=["value","onInput"],Gr={class:"image-gallery"},Jr=["src","onClick"],Dr=["src","onClick"],Kr={class:"info-container-them"},Br={class:"send-date"},Vr={key:0,class:"button-container"},Fr=["onClick"],Qr=["onClick"],jr=["onClick"],zr=["onClick"],Hr=["onClick"],Wr=["onClick"],Zr={class:"image-preview-container"},Yr=["src"],_r=["src"];function ec(e,s,t,i,n,l){const c=(0,o.g2)("image-box"),d=(0,o.g2)("comment-list");return(0,o.uX)(),(0,o.CE)("div",rl,[n.isEditing?((0,o.uX)(),(0,o.CE)("div",cl,[(0,o.bo)((0,o.Lk)("input",{class:"title",type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>n.message.title=e),style:{width:"100%"}},null,512),[[a.Jo,n.message.title]])])):((0,o.uX)(),(0,o.CE)("div",dl,[(0,o.Lk)("h1",ul,(0,r.v_)(n.message.title),1)])),(0,o.Lk)("div",pl,"작성자: "+(0,r.v_)(n.message.createdUserNickName),1),null==n.isEditing&&n.message.createdUserSequence==e.$cookies.get("sequence")?((0,o.uX)(),(0,o.CE)("div",gl,[(0,o.Lk)("button",{onClick:s[1]||(s[1]=(...e)=>l.editMode&&l.editMode(...e)),class:"btn btn-dark"},"수정하기")])):(0,o.Q3)("",!0),null!=n.isEditing&&n.message.createdUserSequence==e.$cookies.get("sequence")?((0,o.uX)(),(0,o.CE)("div",ml,[s[13]||(s[13]=(0,o.Lk)("button",{type:"button",class:"btn btn-dark","data-bs-toggle":"modal","data-bs-target":"#imageModal"},"이미지 보관함",-1)),(0,o.bF)(c,{type:"MSG",imageKey:this.imageAddKey,imageSeq:this.imageAddSeq,message:this.messageResponse,imageUidMap:this.imageMap,onImageMap:e.handleImageMapUpdate,onMessageImage:e.messageUpdate},null,8,["imageKey","imageSeq","message","imageUidMap","onImageMap","onMessageImage"]),(0,o.Lk)("button",{class:"btn btn-dark","data-bs-toggle":"modal","data-bs-target":"#nickNameMapping",onClick:s[2]||(s[2]=e=>l.groupNickNameInfo())},"닉네임"),(0,o.Lk)("div",hl,[(0,o.Lk)("div",kl,[(0,o.Lk)("div",bl,[s[12]||(s[12]=(0,o.Lk)("div",{class:"modal-header"},[(0,o.Lk)("h1",{class:"modal-title fs-5",id:"nickNameMapping"},"닉네임"),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,o.Lk)("div",yl,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(Object.entries(this.nickNameMap),(([e,s])=>((0,o.uX)(),(0,o.CE)("div",{key:e},[null!=s&&null!=s.nickName?((0,o.uX)(),(0,o.CE)("div",fl,[(0,o.eW)((0,r.v_)(s.nickName)+" : ",1),null==s.userSeqInGroup?((0,o.uX)(),(0,o.CE)("button",vl," 해당 회원과 매핑할 그룹 내 유저가 있다면 선택해주세요 ")):((0,o.uX)(),(0,o.CE)("button",Cl,(0,r.v_)(s.userNameInGroup),1)),(0,o.Lk)("ul",Ll,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.userInGroup,(s=>((0,o.uX)(),(0,o.CE)("li",{key:s.groupUserSequence,onClick:t=>l.userInGroupSet(e,s),style:{padding:"8px",cursor:"pointer"}},(0,r.v_)(s.nickname),9,wl)))),128))]),(0,o.Lk)("span",{class:"remove-butto",onClick:s=>l.removeNickname(e)},"X",8,Sl)])):(0,o.Q3)("",!0)])))),128)),n.nickNameEditMod?((0,o.uX)(),(0,o.CE)("div",Il,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":s[3]||(s[3]=e=>n.nicknameInput=e),placeholder:"닉네임 입력"},null,512),[[a.Jo,n.nicknameInput]]),(0,o.Lk)("button",Nl,(0,r.v_)(n.selectedUser?.nickname||"사용자 선택"),1),(0,o.Lk)("ul",El,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.userInGroup,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e.groupUserSequence,onClick:s=>n.selectedUser=e,style:{padding:"8px",cursor:"pointer"}},(0,r.v_)(e.nickname),9,ql)))),128))]),(0,o.Lk)("button",{class:"btn btn-dark btn-sm",onClick:s[4]||(s[4]=(...e)=>l.nickNameAddComplate&&l.nickNameAddComplate(...e))}," 저장 ")])):(0,o.Q3)("",!0),(0,o.Lk)("button",{class:"btn btn-dark",onClick:s[5]||(s[5]=(...e)=>l.nickNameAdd&&l.nickNameAdd(...e))},s[10]||(s[10]=[(0,o.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-plus-square",viewBox:"0 0 16 16"},[(0,o.Lk)("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"}),(0,o.Lk)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"})],-1),(0,o.eW)(" 닉네임 추가 ")]))]),(0,o.Lk)("div",Ml,[(0,o.Lk)("button",{type:"button",class:"btn btn-dark",onClick:s[6]||(s[6]=(...e)=>l.updateNickNameInfo&&l.updateNickNameInfo(...e))},"반영하기"),s[11]||(s[11]=(0,o.Lk)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal","aria-label":"Close"},"닫기",-1))])])])]),n.replyMode?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-dark",onClick:s[7]||(s[7]=(...e)=>l.saveReplyTarget&&l.saveReplyTarget(...e))}," 답장 수정완료 ")):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:s[8]||(s[8]=(...e)=>l.editModeClose&&l.editModeClose(...e)),class:"btn btn-dark"},"수정완료")])):(0,o.Q3)("",!0),(0,o.Lk)("div",Ul,[(0,o.Lk)("div",Rl,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(Object.entries(this.messageResponse),(([e,t])=>((0,o.uX)(),(0,o.CE)("div",{key:e},[t.myMessage?((0,o.uX)(),(0,o.CE)("div",Xl,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.message,(i=>((0,o.uX)(),(0,o.CE)("div",{key:i.seq,class:"message-container-me",onClick:e=>l.scrollToMessage(i),id:"message-"+(null!=i.messageSeq?i.messageSeq:e+"_"+i.seq)},[(0,o.Lk)("div",Al,[null!=this.isEditing?((0,o.uX)(),(0,o.CE)("div",Pl,[(0,o.Lk)("button",{class:"circle-btn add",onClick:s=>l.addEmptyMessage(e,i.seq)},s[14]||(s[14]=[(0,o.Lk)("i",{class:"fas fa-plus"},null,-1)]),8,Tl),(0,o.Lk)("button",{class:"circle-btn up-arrow",onClick:s=>l.moveMessageUp(e,i.seq)},s[15]||(s[15]=[(0,o.Lk)("i",{class:"fas fa-arrow-up"},null,-1)]),8,xl),(0,o.Lk)("button",{class:"circle-btn down-arrow",onClick:s=>l.moveMessageDown(e,i.seq)},s[16]||(s[16]=[(0,o.Lk)("i",{class:"fas fa-arrow-down"},null,-1)]),8,Ol),(0,o.Lk)("button",{class:"circle-btn edit",onClick:s=>l.editMessage(e,i.seq)},s[17]||(s[17]=[(0,o.Lk)("i",{class:"fas fa-pencil-alt"},null,-1)]),8,Gl),(0,o.Lk)("button",{class:"circle-btn delete",onClick:s=>l.removeMessageSeq(e,i.seq,i.messageSeq)},s[18]||(s[18]=[(0,o.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,Jl),(0,o.Lk)("button",{class:"circle-btn camera","data-bs-toggle":"modal","data-bs-target":"#imageModal",onClick:s=>l.selectImageKey(e,i.seq)},s[19]||(s[19]=[(0,o.Lk)("i",{class:"fas fa-camera"},null,-1)]),8,Dl),(0,o.Lk)("button",{class:"circle-btn left",onClick:s=>l.moveLeft(e,i.seq)},s[20]||(s[20]=[(0,o.Lk)("i",{class:"fas fa-arrow-left"},null,-1)]),8,Kl)])):(0,o.Q3)("",!0),(0,o.Lk)("span",Bl,(0,r.v_)(t.sendDate),1)]),null!=this.isEditing&&this.isEditing[e]&&this.isEditing[e][i.seq]?((0,o.uX)(),(0,o.CE)("p",{key:0,class:"from-me",onBlur:s=>l.saveMessage(e)},[i.isReply?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.bo)((0,o.Lk)("input",{class:"reply-header","onUpdate:modelValue":e=>i.replyTo=e},null,8,Fl),[[a.Jo,i.replyTo]]),s[21]||(s[21]=(0,o.Lk)("br",null,null,-1)),(0,o.bo)((0,o.Lk)("input",{class:"reply-message","onUpdate:modelValue":e=>i.replyMessage=e},null,8,Ql),[[a.Jo,i.replyMessage]]),s[22]||(s[22]=(0,o.Lk)("hr",null,null,-1))],64)):(0,o.Q3)("",!0),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>i.message=e,class:"from-me"},null,8,jl),[[a.Jo,i.message]]),(0,o.Lk)("span",zl,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.imageUri,((e,s)=>((0,o.uX)(),(0,o.CE)("img",{key:s,src:l.imageUrl(e.second),class:"small-image",onClick:s=>l.openPreview(e.second),alt:"Uploaded Image"},null,8,Hl)))),128)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.imageKey,((e,s)=>((0,o.uX)(),(0,o.CE)("img",{key:s,src:this.imageMap[e],class:"small-image",onClick:s=>l.openPreview(e),alt:"Uploaded Image"},null,8,Wl)))),128))])],40,Vl)):((0,o.uX)(),(0,o.CE)("p",Zl,[n.replyMode?((0,o.uX)(),(0,o.CE)("input",{key:0,type:"radio",name:"replySelect",value:e||",",onInput:s=>l.updateReplySeq(i.messageSeq,e,i.seq),class:"form-check-input mt-1"},null,40,Yl)):(0,o.Q3)("",!0),i.isReply?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[null!=this.isEditing?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-sm btn-link me-2",onClick:e=>l.toggleReplyMode(i),title:"답장 연결"}," 🔗 ",8,_l)):(0,o.Q3)("",!0),(0,o.Lk)("span",er,(0,r.v_)(i.replyTo),1),s[23]||(s[23]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("span",sr,(0,r.v_)(i.replyMessage),1),s[24]||(s[24]=(0,o.Lk)("hr",null,null,-1))],64)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,r.v_)(i.message)+" ",1),(0,o.Lk)("span",tr,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.imageUri,((e,s)=>((0,o.uX)(),(0,o.CE)("img",{key:s,src:l.imageUrl(e.second),class:"small-image",onClick:s=>l.openPreview(e.second),alt:"Uploaded Image"},null,8,ar)))),128)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.imageKey,((e,s)=>((0,o.uX)(),(0,o.CE)("img",{key:s,src:this.imageMap[e],class:"small-image",onClick:s=>l.openPreview(e),alt:"Uploaded Image"},null,8,or)))),128))])]))],8,$l)))),128))])):((0,o.uX)(),(0,o.CE)("div",ir,[(0,o.Lk)("div",nr,[n.nickNameEdit[e]?((0,o.uX)(),(0,o.CE)("div",lr,[null!=this.nickNameMap[t.sendUserSeq]?((0,o.uX)(),(0,o.CE)("div",rr,[null!=this.nickNameMap[t.sendUserSeq].userNameInGroup?((0,o.uX)(),(0,o.CE)("button",cr,(0,r.v_)(this.nickNameMap[t.sendUserSeq].userNameInGroup),1)):((0,o.uX)(),(0,o.CE)("button",dr,(0,r.v_)(this.nickNameMap[t.sendUserSeq].nickName),1)),(0,o.Lk)("ul",ur,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(Object.entries(n.nickNameMap),(([s,t])=>((0,o.uX)(),(0,o.CE)("li",{key:s,onClick:a=>l.editNickNameComplate(e,s,t),style:{padding:"8px",cursor:"pointer"}},[(0,o.eW)((0,r.v_)(t.nickName)+" ",1),t.userNameInGroup?((0,o.uX)(),(0,o.CE)("span",gr,"| "+(0,r.v_)(t.userNameInGroup),1)):(0,o.Q3)("",!0)],8,pr)))),128))])])):(0,o.Q3)("",!0)])):((0,o.uX)(),(0,o.CE)("div",mr,[null!=this.nickNameMap[t.sendUserSeq]?((0,o.uX)(),(0,o.CE)("div",hr,[null!=this.nickNameMap[t.sendUserSeq].userNameInGroup?((0,o.uX)(),(0,o.CE)("div",kr,[(0,o.Lk)("div",br,(0,r.v_)(this.nickNameMap[t.sendUserSeq].userNameInGroup),1)])):((0,o.uX)(),(0,o.CE)("div",yr,[(0,o.Lk)("div",fr,(0,r.v_)(this.nickNameMap[t.sendUserSeq].nickName),1)]))])):(0,o.Q3)("",!0)])),null!=this.isEditing?((0,o.uX)(),(0,o.CE)("div",vr,[(0,o.Lk)("button",{class:"circle-btn up-arrow",onClick:s=>l.moveSendUserUp(e)},s[25]||(s[25]=[(0,o.Lk)("i",{class:"fas fa-arrow-up"},null,-1)]),8,Cr),(0,o.Lk)("button",{class:"circle-btn down-arrow",onClick:s=>l.moveSendUserDown(e)},s[26]||(s[26]=[(0,o.Lk)("i",{class:"fas fa-arrow-down"},null,-1)]),8,Lr),(0,o.Lk)("button",{class:"circle-btn edit",onClick:s=>l.editNickName(e)},s[27]||(s[27]=[(0,o.Lk)("i",{class:"fas fa-pencil-alt"},null,-1)]),8,wr),(0,o.Lk)("button",{class:"circle-btn delete",onClick:s=>l.removeSendUser(e)},s[28]||(s[28]=[(0,o.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,Sr),(0,o.Lk)("button",{class:"circle-btn right",onClick:s=>l.moveRight(e)},s[29]||(s[29]=[(0,o.Lk)("i",{class:"fas fa-arrow-right"},null,-1)]),8,Ir)])):(0,o.Q3)("",!0)]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.message,(i=>((0,o.uX)(),(0,o.CE)("div",{key:i.seq,class:"message-container",id:"message-"+(null!=i.messageSeq?i.messageSeq:e+"_"+i.seq),onClick:e=>l.scrollToMessage(i)},[null!=this.isEditing&&this.isEditing[e]&&this.isEditing[e][i.seq]?((0,o.uX)(),(0,o.CE)("p",{key:0,class:"from-them",onBlur:s=>l.saveMessage(e,i)},[i.isReply?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.bo)((0,o.Lk)("input",{class:"reply-header-them","onUpdate:modelValue":e=>i.replyTo=e},null,8,qr),[[a.Jo,i.replyTo]]),s[30]||(s[30]=(0,o.Lk)("br",null,null,-1)),(0,o.bo)((0,o.Lk)("input",{class:"reply-message-them","onUpdate:modelValue":e=>i.replyMessage=e},null,8,Mr),[[a.Jo,i.replyMessage]]),s[31]||(s[31]=(0,o.Lk)("hr",null,null,-1))],64)):(0,o.Q3)("",!0),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>i.message=e,onBlur:s=>l.saveMessage(e,i),class:"from-them"},null,40,Ur),[[a.Jo,i.message]]),(0,o.Lk)("span",Rr,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.imageKey,((e,s)=>((0,o.uX)(),(0,o.CE)("img",{key:s,src:l.imageUrl(e),class:"small-image",onClick:s=>l.openPreview(e),alt:"Uploaded Image"},null,8,Xr)))),128)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.imageKey,((e,s)=>((0,o.uX)(),(0,o.CE)("img",{key:s,src:this.imageMap[e],class:"small-image",onClick:s=>l.openPreview(e),alt:"Uploaded Image"},null,8,$r)))),128))])],40,Er)):((0,o.uX)(),(0,o.CE)("p",Ar,[i.isReply?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.Lk)("span",Pr,(0,r.v_)(i.replyTo),1),null!=this.isEditing?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-sm btn-link me-2",onClick:e=>l.toggleReplyMode(i),title:"답장 연결"}," 🔗 ",8,Tr)):(0,o.Q3)("",!0),s[32]||(s[32]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("span",xr,(0,r.v_)(i.replyMessage),1),s[33]||(s[33]=(0,o.Lk)("hr",null,null,-1))],64)):(0,o.Q3)("",!0),n.replyMode?((0,o.uX)(),(0,o.CE)("input",{key:1,type:"radio",name:"replySelect",value:e||",",onInput:s=>l.updateReplySeq(i.messageSeq,e,i.seq),class:"form-check-input mt-1"},null,40,Or)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,r.v_)(i.message)+" ",1),(0,o.Lk)("span",Gr,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.imageKey,((e,s)=>((0,o.uX)(),(0,o.CE)("img",{key:s,src:l.imageUrl(e),class:"small-image",onClick:s=>l.openPreview(e),alt:"Uploaded Image"},null,8,Jr)))),128)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.imageKey,((e,s)=>((0,o.uX)(),(0,o.CE)("img",{key:s,src:this.imageMap[e],class:"small-image",onClick:s=>l.openPreview(e),alt:"Uploaded Image"},null,8,Dr)))),128))])])),(0,o.Lk)("div",Kr,[(0,o.Lk)("span",Br,(0,r.v_)(t.sendDate),1),null!=this.isEditing?((0,o.uX)(),(0,o.CE)("div",Vr,[(0,o.Lk)("button",{class:"circle-btn add",onClick:s=>l.addEmptyMessage(e,i.seq)},s[34]||(s[34]=[(0,o.Lk)("i",{class:"fas fa-plus"},null,-1)]),8,Fr),(0,o.Lk)("button",{class:"circle-btn up-arrow",onClick:s=>l.moveMessageUp(e,i.seq)},s[35]||(s[35]=[(0,o.Lk)("i",{class:"fas fa-arrow-up"},null,-1)]),8,Qr),(0,o.Lk)("button",{class:"circle-btn down-arrow",onClick:s=>l.moveMessageDown(e,i.seq)},s[36]||(s[36]=[(0,o.Lk)("i",{class:"fas fa-arrow-down"},null,-1)]),8,jr),(0,o.Lk)("button",{class:"circle-btn edit",onClick:s=>l.editMessage(e,i.seq)},s[37]||(s[37]=[(0,o.Lk)("i",{class:"fas fa-pencil-alt"},null,-1)]),8,zr),(0,o.Lk)("button",{class:"circle-btn delete",onClick:s=>l.removeMessageSeq(e,i.seq,i.messageSeq)},s[38]||(s[38]=[(0,o.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,Hr),(0,o.Lk)("button",{class:"circle-btn camera","data-bs-toggle":"modal","data-bs-target":"#imageModal",onClick:s=>l.selectImageKey(e,i.seq)},s[39]||(s[39]=[(0,o.Lk)("i",{class:"fas fa-camera"},null,-1)]),8,Wr)])):(0,o.Q3)("",!0)])],8,Nr)))),128))]))])))),128))])]),n.isPreviewOpen?((0,o.uX)(),(0,o.CE)("div",{key:4,class:"image-preview-overlay",onClick:s[9]||(s[9]=(...e)=>l.closePreview&&l.closePreview(...e))},[(0,o.Lk)("div",Zr,[n.imageMap[n.previewImage]?((0,o.uX)(),(0,o.CE)("img",{key:0,src:this.imageMap[n.previewImage],alt:"Preview Image",class:"large-image"},null,8,Yr)):((0,o.uX)(),(0,o.CE)("img",{key:1,src:l.imageUrl(n.previewImage),alt:"Preview Image",class:"large-image"},null,8,_r))])])):(0,o.Q3)("",!0),(0,o.bF)(d,{class:"comment",postSeq:t.postSeq},null,8,["postSeq"])])}var sc={components:{ImageBox:an,CommentList:ol},data(){return{message:{},messageResponse:{},isEditing:null,previewImage:null,isPreviewOpen:!1,imageMap:{},imageAddKey:null,imageAddSeq:null,nickNameMap:{},deleteSeqs:new Set,userInGroup:{},nickNameEditMod:!1,nicknameInput:"",selectedUser:null,deleteNickNames:new Set,replyMode:!1,selectedReplyMessageSeq:null,selectedReplyKey:null,selectedReplySeq:null,nickNameEdit:{}}},props:{postSeq:Number,isLogin:{type:Boolean,required:!0}},created(){var e=this.$cookies.get("group");this.isLogin?null==e?(this.$toastr.warning("메세지를 작성할 그룹을 먼저 선택해주세요"),this.$router.push("/")):xc.get(`/api/post/${e.groupSequence}/${this.postSeq}`,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.message=e.data.data,this.messageResponse=e.data.data.content.message,this.nickNameMap=e.data.data.content.nickName})):(this.$toastr.warning("로그인 후 게시글 작성이 가능합니다."),this.$router.push("/login"))},methods:{imageUrl:is,editMode(){this.isEditing={}},editModeClose(){const e=new FormData;Object.entries(this.imageMap).forEach((([s,t])=>{t instanceof File?e.append(s,t):e.append(s,os(t))}));const s=this.$cookies.get("group").groupSequence,t={title:this.message.title,message:this.messageResponse,nickName:this.nickNameMap,deleteMessage:Array.from(this.deleteSeqs)};e.append("data",JSON.stringify(t)),xc.post(`/api/post/message/${s}/${this.postSeq}`,e,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}),this.isEditing=null},editMessage(e,s){this.isEditing[e]||(this.isEditing[e]={}),this.isEditing[e][s]?this.isEditing[e][s]=!1:this.isEditing[e][s]=!0},saveMessage(e){this.isEditing[e]=!1},removeMessageSeq(e,s,t){null!=t&&this.deleteSeqs.add(t),this.messageResponse[e]&&Array.isArray(this.messageResponse[e].message)&&(this.messageResponse[e].message=this.messageResponse[e].message.filter((e=>e.seq!==s)),this.messageResponse[e].message.forEach((e=>{e.seq>s&&(e.seq=e.seq-1)})),this.isEditing[e]||(this.isEditing[e]={}),this.isEditing[e][s]=!1);var a=1,o=new Map;for(let[i,n]of Object.entries(this.messageResponse))0!=n.message.length&&(console.log(i),o[a++]=n);this.messageResponse=o},addEmptyMessage(e,s){if(this.messageResponse[e]&&Array.isArray(this.messageResponse[e].message)){this.messageResponse[e].message.forEach((e=>{e.seq>s&&(e.seq=e.seq+1)}));for(let[s,t]of Object.entries(this.messageResponse))s>e&&t.message.forEach((e=>{e.seq=e.seq+1}));this.messageResponse[e].message.push({seq:s+1,message:"."}),this.messageResponse[e].message.sort(((e,s)=>e.seq-s.seq)),this.isEditing[s+1]&&this.editMessage(e,s+1+1),this.editMessage(e,s+1)}},moveMessageUp(e,s){const t=this.messageResponse[e].message.reduce(((e,s)=>s.seq<e?s.seq:e),1/0);if(1==e&&s==t)return;const a=this.messageResponse[e].message;if(s===t){var o=this.messageResponse[e],i=JSON.parse(JSON.stringify(o.message.filter((e=>e.seq==t))));console.log("why:"+JSON.stringify(i)),o.message=o.message.filter((e=>e.seq!=s));var n=1;0!=o.message.length&&o.message.forEach((e=>{e.seq=n++}));var l=JSON.parse(JSON.stringify(o)),r=JSON.parse(JSON.stringify(this.messageResponse[e-1]));if(r.sendUserSeq==o.sendUserSeq){const s=r.message.reduce(((e,s)=>s.seq>e?s.seq:e),0);var c=r.message.pop(),d=i.pop();console.log(JSON.stringify(i)),r.message.push({seq:s,message:d.message,imageKey:d.imageKey,imageUri:d.imageUri,isReply:d.isReply,replyMessage:d.replyMessage,replyTo:d.replyTo,sendUserSeq:d.sendUserSeq}),r.message.push({seq:s+1,message:c.message,imageKey:c.imageKey,imageUri:c.imageUri,isReply:c.isReply,replyMessage:c.replyMessage,replyTo:c.replyTo,sendUserSeq:c.sendUserSeq}),this.messageResponse[e-1].message=[]}else r.message=[r.message.pop()],l.message=i,l.sendDate=null;const a=r.message.reduce(((e,s)=>s.seq>e?s.seq:e),0);this.messageResponse[e-1].message=this.messageResponse[e-1].message.filter((e=>e.seq!=a));var u=new Map,p=1;for(let[s,t]of Object.entries(this.messageResponse))s==e?(0!=l.message.length&&(u[p++]=l),0!=r.message.length&&(u[p++]=r),0!=t.message.length&&(u[p++]=t)):0!=t.message.length&&(u[p++]=t);var g=new Map,m=null;p=1;for(let[e,s]of Object.entries(u))if(1!=e){if(s.sendUserSeq==m){var h=g[p-1].message.reduce(((e,s)=>s.seq>e?s.seq:e),0);s.message.forEach((e=>g[p-1].message.push({seq:++h,message:e.message,imageKey:e.imageKey,imageUri:e.imageUri,isReply:e.isReply,replyMessage:e.replyMessage,replyTo:e.replyTo})))}else g[p++]=s;m=s.sendUserSeq}else m=s.sendUserSeq,g[p++]=s;this.messageResponse=JSON.parse(JSON.stringify(g))}else{const e=a.findIndex((e=>e.seq===s));e>0&&([a[e-1],a[e]]=[a[e],a[e-1]],a[e-1].seq-=1,a[e].seq+=1)}},moveMessageDown(e,s){const t=Math.max(...Object.keys(this.messageResponse).map(Number)),a=this.messageResponse[t].message.reduce(((e,s)=>s.seq>e?s.seq:e),0);if(e==t&&s==a)return;const o=this.messageResponse[e].message,i=o.reduce(((e,s)=>s.seq>e?s.seq:e),0);if(console.log("editMapMaxSeq:"+i),s===i){var n=JSON.parse(JSON.stringify(this.messageResponse[e]));n.message=[];var l=this.messageResponse[e].message.pop();n.message.push({seq:1,message:l.message,imageKey:l.imageKey,imageUri:l.imageUri,isReply:l.isReply,replyMessage:l.replyMessage,replyTo:l.replyTo,sendUserSeq:l.sendUserSeq});var r=Number(e)+1,c=JSON.parse(JSON.stringify(this.messageResponse[r]));c.message=this.messageResponse[r].message.filter((e=>1==e.seq)),this.messageResponse[r].message=this.messageResponse[r].message.filter((e=>1!=e.seq));var d=1;0!=this.messageResponse[r].message.length&&this.messageResponse[r].message.forEach((e=>{e.seq=d++}));var u=new Map,p=1;for(let[s,t]of Object.entries(this.messageResponse))s==e?(0!=t.message.length&&(u[p++]=t),0!=c.message.length&&(u[p++]=c),0!=n.message.length&&(u[p++]=n)):0!=t.message.length&&(u[p++]=t);var g=new Map,m=null;p=1;for(let[e,s]of Object.entries(u))if(1!=e){if(s.sendUserSeq==m){var h=g[p-1].message.reduce(((e,s)=>s.seq>e?s.seq:e),0);s.message.forEach((e=>g[p-1].message.push({seq:++h,message:e.message,imageKey:e.imageKey,imageUri:e.imageUri,isReply:e.isReply,replyMessage:e.replyMessage,replyTo:e.replyTo})))}else g[p++]=s;m=s.sendUserSeq}else m=s.sendUserSeq,g[p++]=s;this.messageResponse=JSON.parse(JSON.stringify(g))}else{console.log("else");const e=o.findIndex((e=>e.seq===s));e<o.length-1&&([o[e],o[e+1]]=[o[e+1],o[e]],o[e].seq-=1,o[e+1].seq+=1)}},openPreview(e){this.previewImage=e,this.isPreviewOpen=!0},closePreview(){this.isPreviewOpen=!1,this.previewImage=null},selectImageKey(e,s){this.imageAddKey=e,this.imageAddSeq=s},nickNameAdd(){this.nickNameEditMod=!0},nickNameAddComplate(){const e=this.$cookies.get("group").groupSequence;xc.post(`/api/post/message/${e}/${this.postSeq}/nickNameAdd?nickName=${this.nicknameInput}&userSeqInGroup=${this.selectedUser.groupUserSequence}`,{},{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.nickNameMap[e.data.data]={nickName:this.nicknameInput,userSeqInGroup:this.selectedUser.groupUserSequence,userNameInGroup:this.selectedUser.nickname,imageUrl:this.selectedUser.imageUrl},this.nicknameInput=null,this.selectedUser=null})),this.nickNameEditMod=!1},groupNickNameInfo(){xc.get("/api/group/users/"+this.$cookies.get("group").groupSequence,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.userInGroup=e.data.data}))},userInGroupSet(e,s){console.log(s),this.nickNameMap[e]={nickName:this.nickNameMap[e].nickName,userSeqInGroup:s.groupUserSequence,userNameInGroup:s.nickname,imageUri:s.imageUrl}},updateNickNameInfo(){const e=this.$cookies.get("group").groupSequence;var s=new Map;for(let[t,a]of Object.entries(this.nickNameMap))null!=a.nickName&&(s[t]=a);xc.post(`/api/post/message/${e}/${this.postSeq}/nickName`,{updateInfo:s,deleteMessageNickNameSeqs:Array.from(this.deleteNickNames)},{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{console.log(e),this.deleteNickNames=new Set}))},removeNickname(e){this.deleteNickNames.add(e),this.nickNameMap[e]={userNameInGroup:this.nickNameMap[e].nickName}},toggleReplyMode(e){this.replyMode=!this.replyMode,this.replyMode?this.replyOriginMessage=e:(this.selectedReplyKey=null,this.selectedReplySeq=null,this.replyOriginMessage=null)},updateReplySeq(e,s,t){console.log(e),null!=e?(console.log("1"),this.selectedReplyMessageSeq=e):(console.log("2"),this.selectedReplyKey=s,this.selectedReplySeq=t)},saveReplyTarget(){null!=this.selectedReplyMessageSeq||null!=this.selectedReplyKey&&null!=this.selectedReplySeq?(null!=this.selectedReplyMessageSeq?(this.replyOriginMessage.replyMessageSeq=this.selectedReplyMessageSeq,this.selectedReplyMessageSeq=null):(this.replyOriginMessage.replyToKey=this.selectedReplyKey,this.replyOriginMessage.replyToSeq=this.selectedReplySeq,this.replyOriginMessage.replyMessageSeq=null,this.selectedReplyKey=null,this.selectedReplySeq=null),this.replyMode=!1):this.$toastr.warning("연결할 메세지를 선택해주세요")},scrollToMessage(e){if(null==e.replyMessageSeq&&(void 0==e.replyToKey||null==e.replyToKey)&&(void 0==e.replyToSeq||null==e.replyToSeq))return void console.log("end");var s="";s=null!=e.replyMessageSeq?`message-${e.replyMessageSeq}`:`message-${e.replyToKey}_${e.replyToSeq}`,console.log(s);const t=document.getElementById(s);t&&(t.scrollIntoView({behavior:"smooth",block:"start"}),t.classList.add("shake"),setTimeout((()=>{t.classList.remove("shake")}),500))},moveSendUserUp(e){if(1==e)return;const s=Number(e)-Number(1),t=JSON.parse(JSON.stringify(this.messageResponse[e])),a=JSON.parse(JSON.stringify(this.messageResponse[s]));this.messageResponse[e]=a,this.messageResponse[s]=t,this.messageResponseTempRemove(this.messageResponse)},moveSendUserDown(e){const s=Math.max(...Object.keys(this.messageResponse).map(Number));if(e==s)return;const t=Number(e)+Number(1),a=JSON.parse(JSON.stringify(this.messageResponse[t])),o=JSON.parse(JSON.stringify(this.messageResponse[e]));this.messageResponse[e]=a,this.messageResponse[t]=o,this.messageResponseTempRemove(this.messageResponse)},removeSendUser(e){delete this.messageResponse[e],this.messageResponseTempRemove(this.messageResponse)},moveRight(e){this.messageResponse[e]={...this.messageResponse[e],sendUser:null,sendUserSeq:null,myMessage:!0},this.messageResponseTempRemove(this.messageResponse)},editNickName(e){console.log("!!"),this.nickNameEdit[e]=!0,console.log("??")},editNickNameComplate(e,s,t){this.nickNameEdit[e]=!1,this.messageResponse[e].sendUser=t.nickName,this.messageResponse[e].sendUserSeq=s},messageResponseTempRemove(e){var s=new Map,t=null,a=1;for(let[i,n]of Object.entries(e))if(1!=i){if(n.sendUserSeq==t){var o=s[a-1].message.reduce(((e,s)=>s.seq>e?s.seq:e),0);n.message.forEach((e=>s[a-1].message.push({...e,seq:++o})))}else s[a++]=n;t=n.sendUserSeq}else t=n.sendUserSeq,s[a++]=n;this.messageResponse=JSON.parse(JSON.stringify(s))},moveLeft(e,s){console.log(`start - key=${e}, seq=${s}`);const t=this.messageResponse[e]?.message||[],a=t.findIndex((e=>e.seq===s));if(-1===a)return void console.error("해당 seq를 가진 메시지가 없습니다.");const[o]=t.splice(a,1);console.log(o);var i=new Map,n=1;for(let[g,m]of Object.entries(this.messageResponse))if(g==e){var l=[],r=1,c=[];0==m.message.length&&(n+=2);for(const e of m.message)e.seq>s?(console.log("downCheck"+e.message),l.push({...e,seq:r++}),console.log("addCheck"+JSON.stringify(l))):(console.log("originCheck"+JSON.stringify(e.message)),c.push(e));0!=c.length&&(i[n++]={...m,message:c},console.log("origin"+JSON.stringify(c))),0!=l.length&&(n+=2,i[n++]={...m,message:l},console.log("down:"+JSON.stringify(l)))}else Number(g)>Number(e)?(console.log(`id=${g}, key=${e}`),console.log("2down"+JSON.stringify(m)),n+=2,i[n++]=m):(console.log("std"+n+JSON.stringify(m)),i[n++]=m);console.log(JSON.stringify(i)),this.messageResponse=i;const d=Number(e)+1;o.seq=1;var u="임시",p=null;if(console.log(this.nickNameMap),null!=this.nickNameMap&&Object.keys(this.nickNameMap).length>0){const e=Object.entries(this.nickNameMap)[0];if(e){const[s,t]=e;p=s,u=t.nickName,console.log("첫 번째 키:",s),console.log("첫 번째 값:",t)}}console.log(d),this.messageResponse[d]={sendUserSeq:p,sendUser:u,message:[]},this.messageResponse[d].message.unshift(o),console.log(o),console.log(this.messageResponse[d].message),this.messageResponseTempRemove(this.messageResponse)}}};const tc=(0,v.A)(sc,[["render",ec]]);var ac=tc;const oc={class:"b-container"},ic={class:"user-info-box"},nc={class:"user-id"},lc={class:"user-info-box"},rc={class:"password-check"},cc={class:"change-password"},dc={key:0,class:"btn btn-dark",disabled:""};function uc(e,s,t,i,n,l){return(0,o.uX)(),(0,o.CE)("div",oc,[s[5]||(s[5]=(0,o.Lk)("h2",{class:"title"}," 사용자 정보 수정 ",-1)),s[6]||(s[6]=(0,o.Lk)("br",null,null,-1)),s[7]||(s[7]=(0,o.Lk)("div",{class:"data-title"},"아이디",-1)),(0,o.Lk)("div",ic,[(0,o.Lk)("span",nc,(0,r.v_)(n.userInfo.id),1)]),s[8]||(s[8]=(0,o.Lk)("div",{class:"data-title"},"이메일",-1)),(0,o.Lk)("div",lc,(0,r.v_)(n.userInfo.email),1),s[9]||(s[9]=(0,o.Lk)("div",{class:"data-title"},"비밀번호 변경",-1)),s[10]||(s[10]=(0,o.Lk)("div",{class:"data-sub-title"},"비밀번호 확인",-1)),(0,o.Lk)("div",rc,[(0,o.bo)((0,o.Lk)("input",{id:"originPassword",type:"password",class:"form-control",placeholder:" ","onUpdate:modelValue":s[0]||(s[0]=e=>n.originPassword=e)},null,512),[[a.Jo,n.originPassword]]),(0,o.Lk)("button",{class:"btn btn-dark",onClick:s[1]||(s[1]=(...e)=>l.passwordCheck&&l.passwordCheck(...e))},"비밀번호 확인")]),s[11]||(s[11]=(0,o.Lk)("div",{class:"data-sub-title"},"새로운 비밀번호",-1)),(0,o.Lk)("div",cc,[n.passwordChecked?(0,o.bo)(((0,o.uX)(),(0,o.CE)("input",{key:0,id:"newPassword",type:"password",class:"form-control",placeholder:" ","onUpdate:modelValue":s[2]||(s[2]=e=>n.newPassword=e)},null,512)),[[a.Jo,n.newPassword]]):(0,o.bo)(((0,o.uX)(),(0,o.CE)("input",{key:1,type:"password",id:"password",class:"form-control",placeholder:" ","onUpdate:modelValue":s[3]||(s[3]=e=>n.newPassword=e),disabled:""},null,512)),[[a.Jo,n.newPassword]])]),null==this.newPassword?((0,o.uX)(),(0,o.CE)("button",dc,"비밀번호 변경")):((0,o.uX)(),(0,o.CE)("button",{key:1,class:"btn btn-dark",onClick:s[4]||(s[4]=(...e)=>l.changePassword&&l.changePassword(...e))},"비밀번호 변경"))])}var pc={data(){return{userInfo:{},originPassword:null,passwordChecked:!1,newPassword:null}},props:{isLogin:{require:!0}},watch:{originPassword(){this.passwordChecked=!1}},created(){if(!this.isLogin)return this.$toastr.warning("로그인 후 접속가능한 페이지입니다."),void this.$router.push("/login");xc.get("/api/user",{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.userInfo=e.data.data}))},methods:{passwordCheck(){null!=this.originPassword?xc.post("/api/user/password/check",{password:this.originPassword},{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((()=>{this.passwordChecked=!0})).catch((e=>{this.$toastr.error(e.response.data.message)})):this.$toastr.warning("비밀번호를 입력해주세요")},changePassword(){null!=this.newPassword?xc.patch("/api/user",{newPassword:this.newPassword,oldPassword:this.originPassword},{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((()=>{this.$toastr.success("비밀번호 변경 성공"),this.$router.push("/")})).catch((e=>{this.$toastr.error(e.response.data.message)})):this.$toastr.warning("변경할 비밀번호를 입력해주세요")}}};const gc=(0,v.A)(pc,[["render",uc]]);var mc=gc;const hc={class:"b-container"},kc={key:1,class:"btn btn-dark notifyBox",disabled:""},bc=["onClick"],yc={key:0,class:"btn btn-dark read-button btn-sm",disabled:""},fc=["onClick"],vc={class:"message-content"},Cc={class:"message-date"},Lc={class:"action-buttons"},wc=["onClick"],Sc=["onClick"],Ic={key:2};function Nc(e,s,t,a,i,n){return(0,o.uX)(),(0,o.CE)("div",hc,[s[2]||(s[2]=(0,o.Lk)("div",{class:"title"},"쪽지함",-1)),s[3]||(s[3]=(0,o.Lk)("div",{class:"descript"},"모든 알람은 한달 뒤 삭제됩니다",-1)),i.isNoRead?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-dark notifyBox",onClick:s[0]||(s[0]=(...e)=>n.allNotifyRead&&n.allNotifyRead(...e))},"모두 읽기")):((0,o.uX)(),(0,o.CE)("button",kc,"모두 읽기")),(0,o.Lk)("button",{class:"btn btn-dark notifyBox",onClick:s[1]||(s[1]=(...e)=>n.allReadNotifyDelete&&n.allReadNotifyDelete(...e))},"읽은 쪽지 삭제"),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.notifyList,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.notifySeq,class:"message-item"},[(0,o.Lk)("button",{class:"close-btn",onClick:s=>n.deleteNotify(e.notifySeq)},"✖",8,bc),e.isRead?((0,o.uX)(),(0,o.CE)("button",yc,"읽기")):((0,o.uX)(),(0,o.CE)("button",{key:1,class:"btn btn-dark read-button btn-sm",onClick:s=>n.readNotify(e.notifySeq)},"읽기",8,fc)),(0,o.Lk)("div",vc,(0,r.v_)(e.message),1),(0,o.Lk)("div",Cc,(0,r.v_)(e.createDate),1),(0,o.Lk)("div",Lc,[null!=e.groupSeq?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-dark group-button btn-sm",onClick:s=>n.goToGroup(e.groupSeq)},"그룹 가기",8,wc)):(0,o.Q3)("",!0),null!=e.postSeq?((0,o.uX)(),(0,o.CE)("button",{key:1,class:"btn btn-dark post-button btn-sm",onClick:s=>n.goToPost(e.groupSeq,e.postSeq)},"게시글 가기",8,Sc)):(0,o.Q3)("",!0)])])))),128)),0==i.notifyList.length?((0,o.uX)(),(0,o.CE)("div",Ic)):(0,o.Q3)("",!0)])}var Ec={data(){return{notifyList:[],isNoRead:!1}},created(){this.getNotiftList()},methods:{getNotiftList(){xc.get("/api/user/notify",{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.notifyList=e.data.data,0==this.notifyList.length?this.isNoRead=!1:this.notifyList.forEach((e=>{e.isRead||(this.isNoRead=!0)}))}))},readNotify(e){xc.post("/api/user/notify/"+e.notifySeq,{},{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((()=>{e.isRead=!0}))},goToGroup(e){this.$router.push("/group"+e)},goToPost(e,s){xc.get(`/api/post/title/${e}/${s}`,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{const s=e.data.data;"MSG"==s.type?this.$router.push("/jamye/message"+s.postSequence):this.$router.push("/jamye/board"+s.postSequence)})),this.$router.push("/post"+s)},allNotifyRead(){xc.post("/api/user/notify/read/all",{},{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((()=>{this.isNoRead=!1,this.getNotiftList()}))},allReadNotifyDelete(){xc.delete("/api/user/notify/read/delete",{},{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((()=>{this.getNotiftList()}))},deleteNotify(e){xc.delete("/api/user/notify/delete/"+e,{},{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((()=>{this.getNotiftList()}))}}};const qc=(0,v.A)(Ec,[["render",Nc]]);var Mc=qc;const Uc=[{path:"/",name:"home",component:W},{path:"/login",name:"login",component:ne},{path:"/my",name:"my",component:us},{path:"/join",name:"join",component:Os},{path:"/groups",name:"groups",component:_s},{path:"/add",name:"add",component:aa},{path:"/group:seq",name:"groupInfo",component:eo,props:!0},{path:"/create/message:seq",name:"messageCreate",component:ln,props:!0},{path:"/create/post:seq",name:"postCreate",component:hn,props:!0},{path:"/image-box:imageKey&imageSeq",name:"imageBox",component:an,props:!0},{path:"/jamye-list",name:"jamyeList",component:Mn},{path:"/jamye/message:postSeq",name:"messageJamye",component:ac,props:!0},{path:"/jamye/board:postSeq",name:"boardJamye",component:ll,props:!0},{path:"/leave-group",name:"leaveGroup",component:Je,props:!0},{path:"/edit-profile",name:"editProfile",component:rs,props:!0},{path:"/user-info",name:"userInfoEdit",component:mc},{path:"/notify-box",name:"notifyBox",component:Mc},{path:"/image-preview-open",name:"imagePreviewOpen",component:Za,props:!0},{path:"/comment-list:postSeq",name:"comment-list",component:ol,props:!0}],Rc=(0,S.aE)({history:(0,S.LA)("/"),routes:Uc});var Xc=Rc;let $c=0,Ac=null;console.log(as);const Pc=w.A.create({baseURL:as}),Tc=e=>{Ac=e};Pc.interceptors.request.use((e=>($c++,Ac&&Ac(!0),e)),(e=>Promise.reject(e))),Pc.interceptors.response.use((e=>($c--,0===$c&&Ac&&Ac(!1),e)),(async e=>{if($c--,console.log(e.response),e.response&&403===e.response.status){const a=document.cookie.match("(^|;) ?refreshToken=([^;]*)(;|$)")[2];try{const t=await Pc.post("/api/user/refresh",{refreshToken:a});var s=new Date;return s.setTime(s.getTime()+864e5),document.cookie=encodeURIComponent("accessToken")+"="+encodeURIComponent(t.data.data.accessToken)+";expires="+s.toUTCString()+";path=/",e.config.headers["Authorization"]=`Bearer ${t.data.data.accessToken}`,Pc.request(e.config)}catch(t){document.cookie=encodeURIComponent("accessToken")+"=; expires=Thu, 01 JAN 1999 00:00:10 GMT",document.cookie=encodeURIComponent("refreshToken")+"=; expires=Thu, 01 JAN 1999 00:00:10 GMT",document.cookie=encodeURIComponent("id")+"=; expires=Thu, 01 JAN 1999 00:00:10 GMT",document.cookie=encodeURIComponent("sequence")+"=; expires=Thu, 01 JAN 1999 00:00:10 GMT",document.cookie=encodeURIComponent("group")+"=; expires=Thu, 01 JAN 1999 00:00:10 GMT",Xc.push("/login")}}else e.response&&"NON_EXISTENT_USER"==e.response.data.code&&((void 0).$toastr.error("잘못된 접근입니다. 다시 로그인해주세요"),document.cookie=encodeURIComponent("accessToken")+"=; expires=Thu, 01 JAN 1999 00:00:10 GMT",document.cookie=encodeURIComponent("refreshToken")+"=; expires=Thu, 01 JAN 1999 00:00:10 GMT",document.cookie=encodeURIComponent("id")+"=; expires=Thu, 01 JAN 1999 00:00:10 GMT",document.cookie=encodeURIComponent("sequence")+"=; expires=Thu, 01 JAN 1999 00:00:10 GMT",document.cookie=encodeURIComponent("group")+"=; expires=Thu, 01 JAN 1999 00:00:10 GMT",Xc.push("/login"));return 0===$c&&Ac&&Ac(!1),Promise.reject(e)}));var xc=Pc,Oc=t(4587),Gc=t.n(Oc),Jc=t(5273),Dc={name:"App",data(){return{isLogin:null,currentGroup:null,loading:!1,unreadCount:0}},created(){this.isLogin=null!==this.$cookies.get("accessToken"),this.currentGroup=this.$cookies.get("group"),this.isLogin&&xc.get("/api/user/no-read",{headers:{Authorization:`Bearer ${this.$cookies.get("accessToken")}`}}).then((e=>{this.unreadCount=e.data.data})).catch((e=>{console.error("안 읽은 쪽지 수 가져오기 실패:",e)})),Tc((e=>{this.loading=e}))},mounted(){this.stompClient&&this.stompClient.active||this.connectWebSocket()},beforeUnmount(){this.stompClient&&this.stompClient.deactivate()},methods:{isLoginChange(e){this.isLogin=e},groupSelect(e){this.currentGroup=e},connectWebSocket(){console.log("🔹 WebSocket 연결 시도...");const e=new(Gc())(as+"/ws");this.stompClient=Jc.q.over(e);const s=this.$cookies.get("sequence");this.stompClient.connect({},(()=>{try{this.connected=!0,this.stompClient.subscribe(`/alarm/receive/${s}`,(e=>{const s=JSON.parse(e.body);this.unreadCount=s}))}catch(e){console.error("❌ WebSocket 연결 처리 중 오류 발생:",e)}}),(e=>{console.error("❌ WebSocket 연결 실패:",e)})),this.stompClient.activate()}},components:{Navbar:L}};const Kc=(0,v.A)(Dc,[["render",l]]);var Bc=Kc,Vc=t(4570),Fc=t.n(Vc),Qc=t(2382),jc=t.n(Qc);const zc=(0,a.Ef)(Bc);zc.use(Xc).use(y["default"]),zc.config.globalProperties.$http=w.A,zc.use(Fc()),zc.$cookies.config("7d"),zc.mount("#app"),jc().options={positionClass:"toast-top-center"},zc.config.globalProperties.$toastr=jc(),w.A.defaults.baseURL=as}},s={};function t(a){var o=s[a];if(void 0!==o)return o.exports;var i=s[a]={exports:{}};return e[a].call(i.exports,i,i.exports,t),i.exports}t.m=e,function(){t.amdD=function(){throw new Error("define cannot be used indirect")}}(),function(){var e=[];t.O=function(s,a,o,i){if(!a){var n=1/0;for(d=0;d<e.length;d++){a=e[d][0],o=e[d][1],i=e[d][2];for(var l=!0,r=0;r<a.length;r++)(!1&i||n>=i)&&Object.keys(t.O).every((function(e){return t.O[e](a[r])}))?a.splice(r--,1):(l=!1,i<n&&(n=i));if(l){e.splice(d--,1);var c=o();void 0!==c&&(s=c)}}return s}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[a,o,i]}}(),function(){t.n=function(e){var s=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(s,{a:s}),s}}(),function(){t.d=function(e,s){for(var a in s)t.o(s,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:s[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/"}(),function(){var e={524:0};t.O.j=function(s){return 0===e[s]};var s=function(s,a){var o,i,n=a[0],l=a[1],r=a[2],c=0;if(n.some((function(s){return 0!==e[s]}))){for(o in l)t.o(l,o)&&(t.m[o]=l[o]);if(r)var d=r(t)}for(s&&s(a);c<n.length;c++)i=n[c],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(d)},a=self["webpackChunkjamye_frontend"]=self["webpackChunkjamye_frontend"]||[];a.forEach(s.bind(null,0)),a.push=s.bind(null,a.push.bind(a))}();var a=t.O(void 0,[504],(function(){return t(1528)}));a=t.O(a)})();
//# sourceMappingURL=app.a6e4ea5c.js.map