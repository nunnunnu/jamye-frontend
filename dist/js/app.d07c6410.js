(function(){"use strict";var e={1583:function(e,s,a){var t=a(6660),o=a(285);const i={id:"app"},n={key:0,class:"loading-overlay"};function l(e,s,a,t,l,r){const c=(0,o.g2)("Navbar"),d=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(c,{isLogin:l.isLogin,currentGroup:l.currentGroup,onGroupSelect:r.groupSelect,unreadCount:l.unreadCount},null,8,["isLogin","currentGroup","onGroupSelect","unreadCount"]),(0,o.Lk)("div",i,[l.loading?((0,o.uX)(),(0,o.CE)("div",n,s[0]||(s[0]=[(0,o.Lk)("div",{class:"spinner"},null,-1)]))):(0,o.Q3)("",!0)]),((0,o.uX)(),(0,o.Wv)(d,{isLogin:l.isLogin,onIsLoginChange:r.isLoginChange,key:l.currentGroup,onGroupSelect:r.groupSelect},null,8,["isLogin","onIsLoginChange","onGroupSelect"]))],64)}var r=a(9132);const c={class:"navbar navbar-expand-lg navbar-light fixed-top shadow-sm",id:"mainNav"},d={class:"container px-5"},u={class:"collapse navbar-collapse",id:"navbarResponsive"},p={class:"navbar-nav ms-auto me-4 my-3 my-lg-0"},g={class:"nav-item"},m={key:0},k={key:0,class:"badge position-absolute"},h={key:1};function b(e,s,a,t,i,n){return(0,o.uX)(),(0,o.CE)("nav",c,[(0,o.Lk)("div",d,[(0,o.Lk)("a",{class:"navbar-brand fw-bold",href:"#page-top",onClick:s[0]||(s[0]=(...e)=>n.home&&n.home(...e))},"잼얘 가챠"),s[6]||(s[6]=(0,o.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,o.eW)(" Menu "),(0,o.Lk)("i",{class:"bi-list"})],-1)),(0,o.Lk)("div",u,[(0,o.Lk)("ul",p,[(0,o.Lk)("li",g,[(0,o.Lk)("a",{class:"nav-link me-lg-3",onClick:s[1]||(s[1]=(...e)=>n.groups&&n.groups(...e))},"그룹 정보")])]),a.isLogin?((0,o.uX)(),(0,o.CE)("div",m,[(0,o.Lk)("button",{type:"button",class:"btn position-relative",onClick:s[2]||(s[2]=(...e)=>n.notify&&n.notify(...e))},[s[5]||(s[5]=(0,o.eW)(" 쪽지함 ")),a.unreadCount>0?((0,o.uX)(),(0,o.CE)("span",k,(0,r.v_)(a.unreadCount),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{type:"button",class:"btn btn-light",onClick:s[3]||(s[3]=(...e)=>n.myPage&&n.myPage(...e))},"MY")])):(0,o.Q3)("",!0),a.isLogin?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",h,[(0,o.Lk)("button",{type:"button",class:"btn btn-primary",onClick:s[4]||(s[4]=(...e)=>n.login&&n.login(...e))},"로그인")]))])])])}a(9138);var v=a(4343),f={name:"NavBar",data(){return{groupInfos:null,stompClient:null}},props:{isLogin:{type:Boolean,required:!0},currentGroup:{require:!1},unreadCount:{type:Number}},setup(){(0,o.sV)((()=>{const e=document.body.querySelector("#mainNav");e&&new v.I6(document.body,{target:"#mainNav",offset:74});const s=document.body.querySelector(".navbar-toggler"),a=[].slice.call(document.querySelectorAll("#navbarResponsive .nav-link"));a.forEach((function(e){e.addEventListener("click",(()=>{"none"!==window.getComputedStyle(s).display&&s.click()}))}))}))},created(){},methods:{login(){this.$router.push("/login")},home(){this.$router.push("/")},myPage(){this.$router.push("/my")},groups(){this.$router.push("/groups")},notify(){this.$router.push("/notify-box")}}},y=a(4307);const C=(0,y.A)(f,[["render",b]]);var L=C,w=a(3854),I=a(443),S=a.p+"media/demo-screen.c9d07d68.mp4";const N={class:"masthead"},M={class:"container px-5"},E={key:0,class:"btn btn-dark dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},q={key:1,class:"btn btn-dark dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},U={class:"dropdown-menu"},R={key:0},X=["onClick"],P={key:1},T={class:"row gx-5 align-items-center"},A={class:"col-lg-6"},x={class:"mb-5 mb-lg-0 text-center text-lg-start"},O={key:0},G={key:1},J={key:0,class:"mt-3 d-flex justify-content-between"},D={class:"modal fade",id:"jamye-create",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},K={class:"modal-dialog modal-dialog-centered"},$={class:"modal-content"},B={class:"modal-header"},V={class:"modal-body"},F={class:"group-add"},Q={key:1,class:"mt-3 d-flex justify-content-between"};function j(e,s,a,i,n,l){const c=(0,o.g2)("inviteGroup"),d=(0,o.g2)("router-link"),u=(0,o.g2)("b-container");return(0,o.uX)(),(0,o.Wv)(u,null,{default:(0,o.k6)((()=>[(0,o.Lk)("header",N,[(0,o.Lk)("div",M,[a.isLogin?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"dropdown",onClick:s[0]||(s[0]=(...e)=>l.groupList&&l.groupList(...e))},[null==n.currentGroup?((0,o.uX)(),(0,o.CE)("a",E," 그룹을 선택해주세요. ")):((0,o.uX)(),(0,o.CE)("a",q,(0,r.v_)(n.currentGroup.name),1)),(0,o.Lk)("ul",U,[0!=n.groupInfos.length?((0,o.uX)(),(0,o.CE)("div",R,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.groupInfos,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.sequence},[(0,o.Lk)("li",null,[(0,o.Lk)("a",{class:"dropdown-item",href:"#",onClick:s=>l.groupSelect(e)},(0,r.v_)(e.name),9,X)])])))),128))])):((0,o.uX)(),(0,o.CE)("div",P,s[6]||(s[6]=[(0,o.Lk)("li",null,[(0,o.Lk)("a",null," 가입된 그룹이 없습니다 ")],-1)])))])])):(0,o.Q3)("",!0),(0,o.Lk)("div",T,[(0,o.Lk)("div",A,[(0,o.Lk)("div",x,[s[11]||(s[11]=(0,o.Lk)("h1",{class:"display-1 lh-1 mb-3",style:{"font-weight":"bold"}},"잼얘 가챠",-1)),s[12]||(s[12]=(0,o.Lk)("p",{class:"lead fw-normal text-muted mb-5"},[(0,o.eW)("Talk Funny(잼얘해봐)"),(0,o.Lk)("br"),(0,o.eW)("U GO GIRL(님선하세요 소녀여)")],-1)),this.isLogin?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",O,[(0,o.Lk)("button",{type:"button",class:"btn btn-dark",onClick:s[1]||(s[1]=(...e)=>l.login&&l.login(...e))},"로그인 후 뽑기")])),this.isLogin?((0,o.uX)(),(0,o.CE)("div",G,[null!=n.currentGroup?((0,o.uX)(),(0,o.CE)("div",J,[(0,o.Lk)("button",{type:"button",class:"btn btn-dark custom-btn",onClick:s[2]||(s[2]=(...e)=>l.luckyDraw&&l.luckyDraw(...e))},"뽑기"),s[9]||(s[9]=(0,o.Lk)("button",{type:"button",class:"btn btn-dark custom-btn","data-bs-toggle":"modal","data-bs-target":"#jamye-create"},"잼얘 넣기",-1)),(0,o.Lk)("div",D,[(0,o.Lk)("div",K,[(0,o.Lk)("div",$,[(0,o.Lk)("div",B,[s[7]||(s[7]=(0,o.Lk)("h1",{class:"modal-title fs-5",id:"jamye-create1"},"잼얘 생성",-1)),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:s[3]||(s[3]=(0,t.D$)((()=>{}),["stop"]))})]),(0,o.Lk)("div",V,[(0,o.Lk)("div",F,[(0,o.Lk)("button",{class:"btn btn-dark btn-block btn-group","data-bs-dismiss":"modal","aria-label":"Close",onClick:s[4]||(s[4]=e=>l.routerMessage())},"메세지 형식"),(0,o.Lk)("button",{class:"btn btn-dark btn-block btn-group","data-bs-dismiss":"modal","aria-label":"Close",onClick:s[5]||(s[5]=e=>l.routerPost())}," 게시글 형식 "),(0,o.bF)(c,{onInviteModalClose:e.inviteModalClose},null,8,["onInviteModalClose"])])])])])]),(0,o.bF)(d,{class:"btn btn-dark custom-btn",to:{name:"jamyeList"}},{default:(0,o.k6)((()=>s[8]||(s[8]=[(0,o.eW)("잼얘 목록")]))),_:1})])):(0,o.Q3)("",!0),null==n.currentGroup?((0,o.uX)(),(0,o.CE)("div",Q,s[10]||(s[10]=[(0,o.Lk)("button",{type:"button",class:"btn btn-dark custom-btn",disabled:""},"뽑기",-1),(0,o.Lk)("button",{type:"button",class:"btn btn-dark custom-btn",disabled:""},"잼얘 넣기",-1),(0,o.Lk)("button",{class:"btn btn-dark custom-btn",disabled:""},"잼얘 목록",-1)]))):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)])]),s[13]||(s[13]=(0,o.Lk)("div",{class:"col-lg-6"},[(0,o.Lk)("div",{class:"masthead-device-mockup"},[(0,o.Lk)("svg",{class:"circle",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},[(0,o.Lk)("defs",null,[(0,o.Lk)("linearGradient",{id:"circleGradient",gradientTransform:"rotate(45)"},[(0,o.Lk)("stop",{class:"gradient-start-color",offset:"0%"}),(0,o.Lk)("stop",{class:"gradient-end-color",offset:"100%"})])]),(0,o.Lk)("circle",{cx:"50",cy:"50",r:"50"})]),(0,o.Lk)("svg",{class:"shape-1 d-none d-sm-block",viewBox:"0 0 240.83 240.83",xmlns:"http://www.w3.org/2000/svg"},[(0,o.Lk)("rect",{x:"-32.54",y:"78.39",width:"305.92",height:"84.05",rx:"42.03",transform:"translate(120.42 -49.88) rotate(45)"}),(0,o.Lk)("rect",{x:"-32.54",y:"78.39",width:"305.92",height:"84.05",rx:"42.03",transform:"translate(-49.88 120.42) rotate(-45)"})]),(0,o.Lk)("svg",{class:"shape-2 d-none d-sm-block",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},[(0,o.Lk)("circle",{cx:"50",cy:"50",r:"50"})]),(0,o.Lk)("div",{class:"device-wrapper"},[(0,o.Lk)("div",{class:"device","data-device":"iPhoneX","data-orientation":"portrait","data-color":"black"},[(0,o.Lk)("div",{class:"screen bg-black"},[(0,o.Lk)("video",{muted:"muted",autoplay:"",loop:"",style:{"max-width":"100%",height:"100%"}},[(0,o.Lk)("source",{src:S,type:"video/mp4"})])])])])])],-1))])])])])),_:1})}var H={name:"MainHome",data(){return{currentGroup:null,groupInfos:{}}},methods:{login(){this.$router.push("/login")},routerMessage(){(0,o.dY)((()=>{this.$router.push({name:"messageCreate",params:{seq:this.currentGroup.groupSequence}})}))},routerPost(){(0,o.dY)((()=>{this.$router.push({name:"postCreate",params:{seq:this.currentGroup.groupSequence}})}))},groupSelect(e){this.$emit("groupSelect",e),this.$cookies.set("group",e)},groupList(){pc.get("/api/group/list",{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.groupInfos=e.data.data}))},luckyDraw(){const e=this.$cookies.get("group");if(null!=e){var s=e.groupSequence;pc.get("/api/post/lucky-draw/"+s,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{const s=e.data.data;"MSG"==s.type?this.$router.push("/jamye/message"+s.postSequence):this.$router.push("/jamye/board"+s.postSequence)})).catch((e=>{alert(e.response.data.message)}))}else alert("잼얘를 뽑을 그룹을 먼저 선택해주세요.")}},props:{isLogin:{type:Boolean,required:!0}},created(){this.currentGroup=this.$cookies.get("group")}};const z=(0,y.A)(H,[["render",j]]);var W=z;const Z={class:"b-container"},Y={class:"input-group mb-3"},_={class:"input-group mb-3"},ee={class:"d-flex justify-content-between align-items-center"},se={class:"d-flex align-items-center"},ae={class:"d-flex align-items-center"};function te(e,s,a,i,n,l){return(0,o.uX)(),(0,o.CE)("div",Z,[s[11]||(s[11]=(0,o.Lk)("h2",{class:"title pb-4 mb-4 fst-italic border-bottom"},"로그인",-1)),(0,o.Lk)("form",{onSubmit:s[2]||(s[2]=(0,t.D$)(((...e)=>l.submitForm&&l.submitForm(...e)),["prevent"]))},[(0,o.Lk)("div",Y,[s[5]||(s[5]=(0,o.Lk)("span",{class:"input-group-text",id:"basic-addon1"},"아이디",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=e=>n.id=e),"aria-describedby":"basic-addon1"},null,512),[[t.Jo,n.id]])]),(0,o.Lk)("div",_,[s[6]||(s[6]=(0,o.Lk)("span",{class:"input-group-text",id:"basic-addon1"},"비밀번호",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=e=>n.pwd=e),"aria-describedby":"basic-addon1"},null,512),[[t.Jo,n.pwd]])]),s[7]||(s[7]=(0,o.Lk)("button",{type:"submit",class:"btn btn-dark btn-block"},"로그인",-1)),s[8]||(s[8]=(0,o.Lk)("br",null,null,-1))],32),(0,o.Lk)("div",ee,[(0,o.Lk)("div",se,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",id:"saveId",class:"form-check-input me-2","onUpdate:modelValue":s[3]||(s[3]=e=>n.idSave=e)},null,512),[[t.lH,n.idSave]]),s[9]||(s[9]=(0,o.Lk)("label",{for:"saveId"},"아이디 저장",-1))]),s[10]||(s[10]=(0,o.Lk)("div",null,[(0,o.Lk)("span",{class:"clickable-text mx-3"},"아이디 찾기"),(0,o.Lk)("span",{class:"clickable-text"},"비밀번호 찾기")],-1))]),(0,o.Lk)("div",ae,[(0,o.Lk)("span",{class:"clickable-text join",onClick:s[4]||(s[4]=(...e)=>l.join&&l.join(...e))},"회원 가입")])])}var oe={name:"loginPage",data(){return{id:null,pwd:null,returnUrl:null,idSave:null}},created(){null!=this.$cookies.get("accessToken")&&(alert("이미 로그인되었습니다."),this.$router.go(-1)),null!==this.$cookies.get("saveId")&&(this.idSave=!0,this.id=this.$cookies.get("saveId"))},methods:{submitForm(){if(null==this.id||void 0===this.id||null==this.pwd||void 0===this.pwd)alert("아이디 혹은 비밀번호를 입력하지 않으셨습니다.");else{const e={id:this.id,password:this.pwd};w.A.post("/api/user/login",e).then((e=>{const s=e.data.data.token,a=s.accessToken,t=s.refreshToken;a&&t?(this.$cookies.set("accessToken",a),this.$cookies.set("refreshToken",t),this.$cookies.set("id",e.data.data.id),this.$cookies.set("sequence",e.data.data.sequence),this.idSave?this.$cookies.set("saveId",e.data.data.id):this.$cookies.remove("saveId"),this.$emit("isLoginChange",!0),this.id=null,this.pwd=null,null!=this.$cookies.get("beforePage")?(this.$cookies.remove("beforePage"),this.$router.push("/")):this.$router.go(-1)):alert("토큰을 받아오는 데 실패했습니다.")})).catch((e=>{e.response?(alert(e.response.data.message),this.id=this.$cookies.get("saveId"),this.pwd=null):alert("네트워크 오류가 발생했습니다. 다시 시도해 주세요.")}))}},join(){this.$router.push("/join")}}};const ie=(0,y.A)(oe,[["render",te]]);var ne=ie,le="data:image/png;base64,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";const re={class:"b-container"},ce={class:"user-info-box"},de={class:"user-id"},ue={class:"mt-3 d-flex justify-content-between"},pe={class:"modal fade",id:"deleteUser",tabindex:"-1","aria-labelledby":"exampleModalLabel1","aria-hidden":"true"},ge={class:"modal-dialog modal-dialog-centered"},me={class:"modal-content"},ke={class:"modal-body"},he={class:"modal-footer"},be={class:"custom-btn"},ve={class:"group-header"},fe={key:0},ye={key:1},Ce={class:"group-info-box-container"},Le={class:"group-image"},we={key:0,src:le,class:"img-thumbnail",alt:"..."},Ie=["src"],Se={class:"group-details"},Ne={class:"group-name"},Me={class:"small-font"},Ee={class:"group-actions"},qe=["onClick"];function Ue(e,s,a,i,n,l){const c=(0,o.g2)("router-link"),d=(0,o.g2)("EditProfile"),u=(0,o.g2)("leave-group");return(0,o.uX)(),(0,o.CE)("div",re,[s[20]||(s[20]=(0,o.Lk)("h2",{class:"title"}," 사용자 정보 ",-1)),s[21]||(s[21]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("div",ce,[(0,o.Lk)("span",de,(0,r.v_)(n.id),1),(0,o.bF)(c,{class:"edit-btn",to:{name:"userInfoEdit"}},{default:(0,o.k6)((()=>s[5]||(s[5]=[(0,o.eW)("회원정보 수정")]))),_:1})]),(0,o.Lk)("div",ue,[s[16]||(s[16]=(0,o.Lk)("div",{class:"custom-btn"},[(0,o.Lk)("button",{class:"btn btn-dark btn-sm btn-block text-danger","data-bs-toggle":"modal","data-bs-target":"#deleteUser"},"회원탈퇴")],-1)),(0,o.Lk)("div",pe,[(0,o.Lk)("div",ge,[(0,o.Lk)("div",me,[s[15]||(s[15]=(0,o.Lk)("div",{class:"modal-header"}," 회원 탈퇴 ",-1)),(0,o.Lk)("div",ke,[s[6]||(s[6]=(0,o.eW)(" 정말 탈퇴하시겠습니까?")),s[7]||(s[7]=(0,o.Lk)("br",null,null,-1)),s[8]||(s[8]=(0,o.eW)(" 탈퇴 시 소속 그룹에서 자동 탈퇴되며 모든 운영자 권한은 그룹 별 가장 오래 활동한 회원에게 자동 양도됩니다.")),s[9]||(s[9]=(0,o.Lk)("br",null,null,-1)),s[10]||(s[10]=(0,o.eW)(" 탈퇴시 작성한 잼얘는 자동 삭제되지않습니다.")),s[11]||(s[11]=(0,o.Lk)("br",null,null,-1)),s[12]||(s[12]=(0,o.Lk)("br",null,null,-1)),s[13]||(s[13]=(0,o.eW)(" 비밀번호 인증 ")),(0,o.bo)((0,o.Lk)("input",{type:"password",id:"passwordCheck",class:"nickName form-control",placeholder:" ","onUpdate:modelValue":s[0]||(s[0]=e=>n.passwordCheck=e)},null,512),[[t.Jo,n.passwordCheck]])]),(0,o.Lk)("div",he,[s[14]||(s[14]=(0,o.Lk)("button",{class:"btn btn-dark","data-bs-dismiss":"modal","aria-label":"Close"},"닫기",-1)),null==n.passwordCheck?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-dark",onClick:s[1]||(s[1]=(...e)=>l.deleteUser&&l.deleteUser(...e)),"data-bs-dismiss":"modal","aria-label":"Close",disabled:""},"탈퇴")):((0,o.uX)(),(0,o.CE)("button",{key:1,class:"btn btn-dark",onClick:s[2]||(s[2]=(...e)=>l.deleteUser&&l.deleteUser(...e)),"data-bs-dismiss":"modal","aria-label":"Close"},"탈퇴"))])])])]),(0,o.Lk)("div",be,[(0,o.Lk)("button",{class:"btn btn-dark btn-sm btn-block",onClick:s[3]||(s[3]=(...e)=>l.logout&&l.logout(...e))},"로그아웃")])]),s[22]||(s[22]=(0,o.Lk)("br",null,null,-1)),s[23]||(s[23]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("div",ve,[s[17]||(s[17]=(0,o.Lk)("h2",{class:"title"},"내 그룹",-1)),(0,o.Lk)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:s[4]||(s[4]=(...e)=>l.groupAdd&&l.groupAdd(...e))},"+")]),(0,o.Lk)("div",null,[0==n.groups?((0,o.uX)(),(0,o.CE)("div",fe," 아직 소속된 그룹이 없습니다.")):((0,o.uX)(),(0,o.CE)("div",ye,[(0,o.Lk)("div",Ce,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.groups,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"group-info-box",key:e.groupSequence},[(0,o.Lk)("div",Le,[null==e||null==e.imageUrl?((0,o.uX)(),(0,o.CE)("img",we)):((0,o.uX)(),(0,o.CE)("img",{key:1,src:l.imageUrl(e.imageUrl),class:"img-thumbnail",alt:"Group Image"},null,8,Ie))]),(0,o.Lk)("div",Se,[(0,o.Lk)("span",Ne,(0,r.v_)(e.name),1),(0,o.Lk)("div",Me," 인원: "+(0,r.v_)(e.totalUsers),1)]),(0,o.Lk)("div",Ee,[(0,o.Lk)("button",{class:"edit-btn",onClick:s=>l.editGroupProfile(e),"data-bs-toggle":"modal","data-bs-target":"#editGroupProfile"},"프로필 수정",8,qe),(0,o.bF)(d,{selectGroup:n.selectGroup,groupNickNameInfo:n.groupNickNameInfo,onResetGroup:l.resetGroup},null,8,["selectGroup","groupNickNameInfo","onResetGroup"]),s[18]||(s[18]=(0,o.Lk)("button",{class:"delete-btn","data-bs-toggle":"modal","data-bs-target":"#leaveGroup"},"그룹 탈퇴",-1)),(0,o.bF)(u,{group:e},null,8,["group"])])])))),128)),s[19]||(s[19]=(0,o.Lk)("br",null,null,-1))])]))])])}const Re={class:"modal fade",id:"leaveGroup",tabindex:"-1","aria-labelledby":"exampleModalLabel1","aria-hidden":"true"},Xe={class:"modal-dialog modal-dialog-centered"},Pe={class:"modal-content"},Te={class:"modal-header"},Ae={class:"modal-body"},xe={class:"modal-footer"};function Oe(e,s,a,t,i,n){return(0,o.uX)(),(0,o.CE)("div",Re,[(0,o.Lk)("div",Xe,[(0,o.Lk)("div",Pe,[(0,o.Lk)("div",Te,[(0,o.eW)((0,r.v_)(a.group.name)+" 탈퇴 ",1),s[1]||(s[1]=(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),(0,o.Lk)("div",Ae,[(0,o.eW)(" 정말 "+(0,r.v_)(a.group.name)+" 그룹을 떠나시겠습니까?",1),s[2]||(s[2]=(0,o.Lk)("br",null,null,-1)),s[3]||(s[3]=(0,o.eW)(" 탈퇴 후 인원이 남지않은 그룹은 자동 삭제됩니다")),s[4]||(s[4]=(0,o.Lk)("br",null,null,-1)),s[5]||(s[5]=(0,o.eW)(" (해당 그룹의 운영자라면 탈퇴 후 운영자 권리는 가장 오래된 회원에게 자동 양도됩니다.) "))]),(0,o.Lk)("div",xe,[(0,o.Lk)("button",{class:"btn btn-dark","data-bs-dismiss":"modal","aria-label":"Close",onClick:s[0]||(s[0]=(...e)=>n.leaveGroup&&n.leaveGroup(...e))},"탈퇴"),s[6]||(s[6]=(0,o.Lk)("button",{class:"btn btn-dark","data-bs-dismiss":"modal","aria-label":"Close"},"취소",-1))])])])])}var Ge={data(){return{}},props:{group:{type:Object,required:!0}},created(){},methods:{leaveGroup(){w.A.post("/api/group/leave/"+this.group.groupSequence,{},{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((()=>{this.$cookies.get("group").groupSequence==this.group.groupSequence&&this.$cookies.remove("group");const e=v.aF.getInstance(document.getElementById("leaveGroup"));e&&e.hide(),this.$router.push("/groups")}))}}};const Je=(0,y.A)(Ge,[["render",Oe]]);var De=Je;const Ke={class:"modal fade",id:"editGroupProfile",tabindex:"-1","aria-labelledby":"exampleModalLabel1","aria-hidden":"true"},$e={class:"modal-dialog modal-dialog-centered"},Be={key:0,class:"modal-content"},Ve={class:"modal-header"},Fe={class:"modal-body"},Qe={class:"upload-container"},je={class:"inputFile"},He={for:"profileImageUpload",class:"upload-label group-image"},ze=["src"],We=["src"],Ze={key:2,src:le,class:"img-thumbnail",alt:"user In Group Image"},Ye={key:0},_e={key:0},es={key:1},ss={class:"modal-footer"};function as(e,s,a,i,n,l){return(0,o.uX)(),(0,o.CE)("div",Ke,[(0,o.Lk)("div",$e,[null!=a.selectGroup?((0,o.uX)(),(0,o.CE)("div",Be,[(0,o.Lk)("div",Ve,[(0,o.eW)((0,r.v_)(a.selectGroup.name)+" 프로필 수정 ",1),s[3]||(s[3]=(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),(0,o.Lk)("div",Fe,[(0,o.Lk)("div",Qe,[(0,o.Lk)("div",je,[(0,o.Lk)("input",{type:"file",id:"profileImageUpload",accept:"image/*",onChange:s[0]||(s[0]=(...e)=>l.previewImage&&l.previewImage(...e)),style:{display:"none"}},null,32),(0,o.Lk)("label",He,[null!=n.imageSrc?((0,o.uX)(),(0,o.CE)("img",{key:0,src:n.imageSrc,alt:"profile Preview",class:"profile-preview"},null,8,ze)):null!=a.groupNickNameInfo&&null!=a.groupNickNameInfo.imageUrl?((0,o.uX)(),(0,o.CE)("img",{key:1,src:l.imageUrl(a.groupNickNameInfo.imageUrl),class:"image-preview"},null,8,We)):((0,o.uX)(),(0,o.CE)("img",Ze))])])]),null!=a.groupNickNameInfo?((0,o.uX)(),(0,o.CE)("div",Ye,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"groupName",class:"nickName form-control",placeholder:" ","onUpdate:modelValue":s[1]||(s[1]=e=>n.newNickName=e)},null,512),[[t.Jo,n.newNickName]]),"NORMAL"==a.groupNickNameInfo.grade?((0,o.uX)(),(0,o.CE)("div",_e,"일반 회원")):((0,o.uX)(),(0,o.CE)("div",es,"운영자")),(0,o.Lk)("div",null,(0,r.v_)(a.groupNickNameInfo.createDate),1)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",ss,[s[4]||(s[4]=(0,o.Lk)("button",{class:"btn btn-dark","data-bs-dismiss":"modal","aria-label":"Close"},"닫기",-1)),(0,o.Lk)("button",{class:"btn btn-dark",onClick:s[2]||(s[2]=(...e)=>l.updateUserInGroupInfo&&l.updateUserInGroupInfo(...e)),"data-bs-dismiss":"modal","aria-label":"Close"},"저장")])])):(0,o.Q3)("",!0)])])}a(9261),a(3700),a(3632),a(1579),a(6236),a(1913),a(6403);const ts="http://13.124.129.247:8080";function os(e){const s=atob(e.split(",")[1]),a=new ArrayBuffer(s.length),t=new Uint8Array(a);for(let c=0;c<s.length;c++)t[c]=s.charCodeAt(c);const o=e.match(/data:(.*?);base64,/);var i="png";o&&o[1]&&(i=o[1].split("/")[1]);const n=new Date,l=`${n.getFullYear()}${String(n.getMonth()+1).padStart(2,"0")}${String(n.getDate()).padStart(2,"0")}${String(n.getHours()).padStart(2,"0")}${String(n.getMinutes()).padStart(2,"0")}${String(n.getSeconds()).padStart(2,"0")}`,r=Math.random().toString(36).substring(2,7);return new File([t],`${l}_${r}.${i}`,{type:"image/jpeg"})}function is(e){return`${ts}/api/file/${e}`}var ns={props:{selectGroup:{require:!0,type:Object},groupNickNameInfo:{require:!1,type:Object}},data(){return{imageSrc:null,profileImage:null,data:null,newNickName:null}},created(){this.data=this.groupNickNameInfo},mounted(){const e=document.getElementById("imageUpload");console.log("input 태그 확인:",e),e&&console.log("이벤트 리스너 존재 여부:",e.onchange)},methods:{previewImage(e){const s=this.$refs.imgbox;e.target.files&&e.target.files[0]?this.profileImage=e.target.files[0]:s.style.backgroundImage="";const a=e.target.files[0];if(a){const e=new FileReader;e.onload=e=>{this.imageSrc=e.target.result},e.readAsDataURL(a)}},updateUserInGroupInfo(){if(console.log("aa"),null==this.newNickName)return void alert("변경할 닉네임을 입력해주세요");const e=new FormData;this.profileImage&&e.append("profile",this.profileImage),pc.post(`/api/group/${this.selectGroup.groupSequence}/${this.groupNickNameInfo.groupUserSequence}?nickName=${this.newNickName}`,e,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((()=>{this.profileImage=null,this.imageSrc=null,this.$emit("resetGroup")})).catch((e=>{alert(e.response.data.message)})),this.newNickName=null},imageUrl:is}};const ls=(0,y.A)(ns,[["render",as]]);var rs=ls,cs={components:{LeaveGroup:De,EditProfile:rs},data(){return{id:null,groups:null,selectGroup:{},groupNickNameInfo:{},passwordCheck:null}},props:{isLogin:{type:Boolean,required:!0}},created(){if(!this.isLogin)return alert("로그인 후 접속가능한 페이지입니다."),void this.$router.push("/login");this.id=this.$cookies.get("id"),this.loadMyGroupList()},methods:{imageUrl:is,logout(){this.$cookies.remove("accessToken"),this.$cookies.remove("refreshToken"),this.$cookies.remove("id"),this.$cookies.remove("sequence"),this.$cookies.remove("group"),this.$router.push("/"),this.$emit("groupSelect",null),this.$emit("isLoginChange",!1)},loadMyGroupList(){pc.get("/api/group/list",{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.groups=e.data.data}))},groupAdd(){this.$router.push("/add")},editGroupProfile(e){this.selectGroup=e,pc.get("/api/group/user/"+e.groupSequence,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.groupNickNameInfo=e.data.data}))},deleteUser(){null==this.passwordCheck&&alert("비밀번호를 먼저 입력해주세요"),pc.post("/api/user",{password:this.passwordCheck},{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((()=>{alert("탈퇴되었습니다."),this.$cookies.keys().forEach((e=>{this.$cookies.remove(e)})),this.$emit("isLoginChange",!1),this.$router.push("/")})).catch((e=>{alert(e.response.data.message)}))},moveGroup(e){this.$router.push("/group"+e)},resetGroup(){this.selectGroup=null,this.groupNickNameInfo=null}}};const ds=(0,y.A)(cs,[["render",Ue],["__scopeId","data-v-05e73b12"]]);var us=ds;const ps={class:"b-container"},gs={key:0,class:"duplicateMessage-error"},ms={key:1,class:"duplicateMessage-success"},ks={key:2},hs={class:"form-group verification-group"},bs={class:"message"},vs={key:0,class:"success"},fs={key:1,class:"error"},ys={class:"form-group"},Cs={key:3},Ls={key:4,class:"duplicateMessage-error"},ws={class:"form-group"},Is={key:5,class:"duplicateMessage-error"},Ss={key:6,class:"duplicateMessage-error"},Ns={key:7,class:"duplicateMessage-success"},Ms={key:8,class:"duplicate-message-space"},Es={class:"form-group verification-group"},qs={key:9,class:"duplicateMessage-success"},Us={key:10,class:"duplicateMessage-error"},Rs={key:11,class:"duplicate-message-space"},Xs={class:"form-group verification-group"},Ps={key:12},Ts={key:13};function As(e,s,a,i,n,l){return(0,o.uX)(),(0,o.CE)("div",ps,[s[16]||(s[16]=(0,o.Lk)("h2",{class:"title pb-4 mb-4 fst-italic border-bottom"},"회원 가입",-1)),null!=n.idIsDuplicate&&n.idIsDuplicate?((0,o.uX)(),(0,o.CE)("div",gs,"이미 가입된 ID입니다.")):(0,o.Q3)("",!0),null==n.idIsDuplicate||n.idIsDuplicate?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",ms,"사용 가능한 ID입니다.")),null==n.idIsDuplicate?((0,o.uX)(),(0,o.CE)("div",ks,s[13]||(s[13]=[(0,o.Lk)("div",{class:"duplicate-message-space"},null,-1)]))):(0,o.Q3)("",!0),(0,o.Lk)("div",hs,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"userId","onUpdate:modelValue":s[0]||(s[0]=e=>n.userId=e),class:"form-control",placeholder:"사용자ID"},null,512),[[t.Jo,n.userId]]),(0,o.Lk)("button",{onClick:s[1]||(s[1]=(...e)=>l.idCheck&&l.idCheck(...e)),class:"btn btn-dark btn-sm"},"중복 확인")]),(0,o.Lk)("div",bs,[s[14]||(s[14]=(0,o.eW)("비밀번호는 8자리 이상 입력해주세요.")),null!=n.password&&n.password.length>=8?((0,o.uX)(),(0,o.CE)("span",vs,"적합")):(0,o.Q3)("",!0),null!=n.password&&n.password.length<8?((0,o.uX)(),(0,o.CE)("span",fs,"부적합")):(0,o.Q3)("",!0)]),(0,o.Lk)("div",ys,[(0,o.bo)((0,o.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":s[2]||(s[2]=e=>n.password=e),class:"form-control",placeholder:"비밀번호"},null,512),[[t.Jo,n.password]])]),null==n.passwordConfirmError||0==n.passwordConfirmError?((0,o.uX)(),(0,o.CE)("div",Cs,s[15]||(s[15]=[(0,o.Lk)("div",{class:"duplicate-message-space"},null,-1)]))):(0,o.Q3)("",!0),n.passwordConfirmError?((0,o.uX)(),(0,o.CE)("div",Ls,"비밀번호가 일치하지 않습니다.")):(0,o.Q3)("",!0),(0,o.Lk)("div",ws,[(0,o.bo)((0,o.Lk)("input",{type:"password",id:"comfirmPassword","onUpdate:modelValue":s[3]||(s[3]=e=>n.comfirmPassword=e),class:"form-control",placeholder:"비밀번호 확인"},null,512),[[t.Jo,n.comfirmPassword]])]),null!=n.emailConfirmError&&n.emailConfirmError?((0,o.uX)(),(0,o.CE)("div",Is,"이메일 형식이 아닙니다.")):(0,o.Q3)("",!0),null!=n.emailIsDuplicate&&n.emailIsDuplicate?((0,o.uX)(),(0,o.CE)("div",Ss,"이미 가입된 이메일입니다.")):(0,o.Q3)("",!0),null==n.emailIsDuplicate||n.emailIsDuplicate?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Ns,"인증코드가 전송되었습니다. 이메일이 도착하지않았다면 재발송 버튼을 눌러주세요")),null!=n.emailIsDuplicate||null!=n.emailConfirmError&&n.emailConfirmError?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Ms)),(0,o.Lk)("div",Es,[(0,o.bo)((0,o.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":s[4]||(s[4]=e=>n.email=e),class:"form-control",placeholder:"이메일"},null,512),[[t.Jo,n.email]]),n.emailCodeSend?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:s[5]||(s[5]=(...e)=>l.emailCheck&&l.emailCheck(...e)),class:"btn btn-dark btn-sm"},"이메일 검증")),n.emailCodeSend&&!n.verifcationSuccess?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:s[6]||(s[6]=(...e)=>l.emailCheck&&l.emailCheck(...e)),class:"btn btn-dark btn-sm"},"재발송")):(0,o.Q3)("",!0),n.emailCodeSend&&n.verifcationSuccess?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:s[7]||(s[7]=(...e)=>l.emailCheck&&l.emailCheck(...e)),class:"btn btn-dark btn-sm",disabled:""},"재발송")):(0,o.Q3)("",!0)]),null!=n.verifcationSuccess&&n.verifcationSuccess?((0,o.uX)(),(0,o.CE)("div",qs,"인증 성공")):(0,o.Q3)("",!0),null==n.verifcationSuccess||n.verifcationSuccess?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Us,"인증실패. 인증코드를 재확인해주세요.")),null==n.verifcationSuccess?((0,o.uX)(),(0,o.CE)("div",Rs)):(0,o.Q3)("",!0),(0,o.Lk)("div",Xs,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"verificationCode","onUpdate:modelValue":s[8]||(s[8]=e=>n.verificationCode=e),class:"form-control",placeholder:"인증코드"},null,512),[[t.Jo,n.verificationCode]]),null!=this.emailCodeSend&0!=this.emailCodeSend&!this.verifcationSuccess?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:s[9]||(s[9]=(...e)=>l.sendVerification&&l.sendVerification(...e)),class:"btn btn-dark btn-sm"},"인증")):(0,o.Q3)("",!0),1!=this.emailCodeSend|this.verifcationSuccess?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:s[10]||(s[10]=(...e)=>l.sendVerification&&l.sendVerification(...e)),class:"btn btn-dark btn-sm",disabled:""},"인증")):(0,o.Q3)("",!0)]),null!=n.verifcationSuccess&n.verifcationSuccess&&null!=n.idIsDuplicate&!n.idIsDuplicate&&null!=n.emailIsDuplicate&!n.emailIsDuplicate&&null!=n.passwordConfirmError&!n.passwordConfirmError?((0,o.uX)(),(0,o.CE)("div",Ps,[(0,o.Lk)("button",{onClick:s[11]||(s[11]=(...e)=>l.signup&&l.signup(...e)),class:"btn btn-dark signup-btn"},"회원가입")])):((0,o.uX)(),(0,o.CE)("div",Ts,[(0,o.Lk)("button",{onClick:s[12]||(s[12]=(...e)=>l.signup&&l.signup(...e)),class:"btn btn-dark signup-btn",disabled:""},"회원가입")]))])}var xs={data(){return{userId:null,password:null,comfirmPassword:null,email:null,verificationCode:null,verifcationSuccess:null,idIsDuplicate:null,emailIsDuplicate:null,passwordConfirmError:!1,emailConfirmError:null,emailCodeSend:!1}},props:{isLogin:{type:Boolean,required:!0}},created(){this.isLogin&&(this.$router.push("/"),alert("이미 로그인중입니다."))},watch:{userId(){this.idIsDuplicate=null},comfirmPassword(){this.comfirmPassword!=this.password?this.passwordConfirmError=!0:this.passwordConfirmError=!1},email(){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;e.test(this.email)?this.emailConfirmError=!1:this.emailConfirmError=!0,this.emailIsDuplicate=null,this.verifcationSuccess=null,this.emailCodeSend=!1},password(){this.comfirmPassword!=this.password?this.passwordConfirmError=!0:this.passwordConfirmError=!1}},methods:{signup(){!this.verifcationSuccess|this.idIsDuplicate||this.emailIsDuplicate||this.passwordConfirmError?alert("모든 인증을 성공한 후 회원가입이 가능합니다."):(pc.post("/api/user/join",{id:this.userId,password:this.password,email:this.email}),alert("회원가입이 완료되었습니다."),this.$router.push("/"))},idCheck(){void 0==this.userId||null==this.userId||""==this.userId||" "==this.userId?alert("아이디를 입력하지않으셨습니다"):pc.get("/api/user/check/id/"+this.userId).then((e=>{e.data.data?this.idIsDuplicate=!1:this.idIsDuplicate=!0}))},emailCheck(){void 0==this.email||null==this.email||""==this.email||" "==this.email?alert("이메일을 입력하지않으셨습니다"):this.emailConfirmError?alert("이메일 형식이 올바르지 않습니다."):this.verifcationSuccess?alert("이미 이메일 인증이 완료되었습니다."):pc.get("/api/user/check/email/"+this.email).then((e=>{e.data.data?(this.emailIsDuplicate=!1,this.emailCodeSend=!0,pc.post("/api/email/send?email="+this.email)):this.emailIsDuplicate=!0}))},sendVerification(){null==this.verificationCode?alert("인증코드를 입력하지않으셨습니다."):this.emailConfirmError||this.emailIsDuplicate?alert("이메일 검증을 먼저 진행해주세요."):this.verifcationSuccess?alert("이미 인증을 완료하셨습니다."):pc.post("/api/email/verify",{email:this.email,verifyCode:this.verificationCode}).then((e=>{e.data.data?this.verifcationSuccess=!0:this.verifcationSuccess=!1}))}}};const Os=(0,y.A)(xs,[["render",As],["__scopeId","data-v-6a551caf"]]);var Gs=Os;const Js={class:"b-container"},Ds={class:"group-header"},Ks={key:0,class:"group-info-box-container"},$s={class:"group-image"},Bs={key:0,src:le,class:"img-thumbnail",alt:"..."},Vs=["src"],Fs={class:"group-details"},Qs={class:"group-name"},js={class:"small-font"},Hs={class:"group-actions"},zs={key:1};function Ws(e,s,a,t,i,n){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",Js,[s[4]||(s[4]=(0,o.Lk)("h2",{class:"title"},"그룹 정보",-1)),(0,o.Lk)("div",null,[(0,o.Lk)("div",Ds,[s[1]||(s[1]=(0,o.Lk)("h4",{class:"title"},"내 그룹",-1)),(0,o.Lk)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:s[0]||(s[0]=(...e)=>n.groupAdd&&n.groupAdd(...e))},"+")])]),0!=i.groups.length?((0,o.uX)(),(0,o.CE)("div",Ks,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.groups,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"group-info-box",key:e.groupSequence},[(0,o.Lk)("div",$s,[null==e.imageUrl?((0,o.uX)(),(0,o.CE)("img",Bs)):((0,o.uX)(),(0,o.CE)("img",{key:1,src:n.imageUrl(e.imageUrl),class:"img-thumbnail",alt:"Group Image"},null,8,Vs))]),(0,o.Lk)("div",Fs,[(0,o.Lk)("span",Qs,(0,r.v_)(e.name),1),(0,o.Lk)("div",js," 인원: "+(0,r.v_)(e.totalUsers),1)]),(0,o.Lk)("div",Hs,[(0,o.bF)(l,{class:"btn btn-dark edit-button",to:{name:"groupInfo",params:{seq:e.groupSequence}}},{default:(0,o.k6)((()=>s[2]||(s[2]=[(0,o.eW)("선택")]))),_:2},1032,["to"])])])))),128)),s[3]||(s[3]=(0,o.Lk)("br",null,null,-1))])):((0,o.uX)(),(0,o.CE)("div",zs," 가입된 그룹이 없습니다. "))])}var Zs={components:{},data(){return{groups:{},groupinfo:null,userSequence:null}},props:{isLogin:{type:Boolean,required:!0}},created(){if(!this.isLogin)return alert("로그인 후 접근 가능한 페이지입니다."),void this.$router.go("/");this.loadMyGroupList(),0==this.groups&&(alert("소속된 그룹이 없습니다. 그룹 생성 페이지로 이동합니다."),this.$router.push("/add"))},methods:{imageUrl:is,loadMyGroupList(){pc.get("/api/group/list",{headers:{Authorization:`Bearer ${this.$cookies.get("accessToken")}`}}).then((e=>{this.groups=e.data.data}))},previewImage(e){const s=e.target.files[0];if(s){const e=new FileReader;e.onload=e=>{this.imageSrc=e.target.result},e.readAsDataURL(s)}},groupAdd(){this.$router.push("/add")}}};const Ys=(0,y.A)(Zs,[["render",Ws],["__scopeId","data-v-4c52ac41"]]);var _s=Ys;const ea={class:"b-container"},sa={class:"group-add"};function aa(e,s,a,t,i,n){const l=(0,o.g2)("GroupCreate"),r=(0,o.g2)("inviteGroup");return(0,o.uX)(),(0,o.CE)("div",ea,[s[2]||(s[2]=(0,o.Lk)("h2",{class:"title"},"그룹 추가",-1)),(0,o.Lk)("div",sa,[s[0]||(s[0]=(0,o.Lk)("button",{type:"button",class:"btn btn-dark btn-block btn-group","data-bs-toggle":"modal","data-bs-target":"#exampleModal1"}," 그룹 생성 ",-1)),(0,o.bF)(l,{onCreateModalClose:n.createModalClose},null,8,["onCreateModalClose"]),s[1]||(s[1]=(0,o.Lk)("button",{type:"button",class:"btn btn-dark btn-block btn-group","data-bs-toggle":"modal","data-bs-target":"#exampleModal2"}," 초대코드 입력 ",-1)),(0,o.bF)(r,{onInviteModalClose:n.inviteModalClose},null,8,["onInviteModalClose"])])])}const ta={class:"modal fade",id:"exampleModal1",tabindex:"-1","aria-labelledby":"exampleModalLabel1","aria-hidden":"true"},oa={class:"modal-dialog modal-dialog-centered"},ia={class:"modal-content"},na={class:"modal-header"},la={key:0,class:"modal-title fs-5",id:"exampleModalLabel1"},ra={key:1,class:"modal-title fs-5",id:"exampleModalLabel1"},ca={class:"modal-body"},da={class:"upload-container"},ua={for:"imageUpload",class:"upload-label"},pa=["src"],ga={key:1,class:"upload-icon"},ma={class:"form-group"},ka={class:"form-group"},ha={class:"upload-container"},ba={for:"profileImageUpload",class:"upload-label"},va=["src"],fa={key:1,class:"upload-icon"},ya={class:"form-group"},Ca={class:"modal-footer"};function La(e,s,a,i,n,l){return(0,o.uX)(),(0,o.CE)("div",ta,[(0,o.Lk)("div",oa,[(0,o.Lk)("div",ia,[(0,o.Lk)("div",na,[1===n.step?((0,o.uX)(),(0,o.CE)("h1",la,"그룹 생성 - 그룹 정보 입력")):(0,o.Q3)("",!0),2===n.step?((0,o.uX)(),(0,o.CE)("h1",ra,"그룹 생성 - 내 프로필 생성")):(0,o.Q3)("",!0),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:s[0]||(s[0]=(...e)=>l.modalClose&&l.modalClose(...e))})]),(0,o.Lk)("div",ca,[1===n.step?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.Lk)("div",da,[(0,o.Lk)("input",{type:"file",id:"imageUpload",accept:"image/*",onChange:s[1]||(s[1]=(...e)=>l.previewImage&&l.previewImage(...e)),style:{display:"none"}},null,32),(0,o.Lk)("label",ua,[n.imageSrc?((0,o.uX)(),(0,o.CE)("img",{key:0,src:n.imageSrc,alt:"Image Preview",class:"image-preview"},null,8,pa)):((0,o.uX)(),(0,o.CE)("span",ga,"+"))])]),(0,o.Lk)("div",ma,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"groupName",class:"group-name form-control",placeholder:" ","onUpdate:modelValue":s[2]||(s[2]=e=>n.groupName=e)},null,512),[[t.Jo,n.groupName]]),s[8]||(s[8]=(0,o.Lk)("label",{for:"groupName",class:"placeholder-label"},[(0,o.eW)("그룹 명"),(0,o.Lk)("span",{class:"required"},"*")],-1))]),(0,o.Lk)("div",ka,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"groupDescription","onUpdate:modelValue":s[3]||(s[3]=e=>n.groupDescription=e),class:"group-description form-control group-description",placeholder:" "},null,512),[[t.Jo,n.groupDescription]]),s[9]||(s[9]=(0,o.Lk)("label",{for:"groupDescription",class:"placeholder-label2"},"그룹 설명(200자)",-1))])],64)):(0,o.Q3)("",!0),2===n.step?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.Lk)("div",ha,[(0,o.Lk)("input",{type:"file",id:"profileImageUpload",accept:"image/*",onChange:s[4]||(s[4]=(...e)=>l.profilePreviewImage&&l.profilePreviewImage(...e)),style:{display:"none"}},null,32),(0,o.Lk)("label",ba,[n.profileimageSrc?((0,o.uX)(),(0,o.CE)("img",{key:0,src:n.profileimageSrc,alt:"Image Preview",class:"image-preview"},null,8,va)):((0,o.uX)(),(0,o.CE)("span",fa,"+"))])]),(0,o.Lk)("div",ya,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"nickname",class:"nickname group-name form-control",placeholder:" ","onUpdate:modelValue":s[5]||(s[5]=e=>n.nickname=e)},null,512),[[t.Jo,n.nickname]]),s[10]||(s[10]=(0,o.Lk)("label",{for:"nickname",class:"placeholder-label3"},[(0,o.eW)("닉네임"),(0,o.Lk)("span",{class:"required"},"*")],-1))])],64)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Ca,[1===n.step?((0,o.uX)(),(0,o.CE)("button",{key:0,type:"button",class:"btn btn-dark btn-block",onClick:s[6]||(s[6]=(...e)=>l.next&&l.next(...e))},"다음")):(0,o.Q3)("",!0),2===n.step?((0,o.uX)(),(0,o.CE)("button",{key:1,type:"button",class:"btn btn-dark btn-block",onClick:s[7]||(s[7]=(...e)=>l.create&&l.create(...e))},"생성")):(0,o.Q3)("",!0)])])])])}var wa={data(){return{imageSrc:null,groupDescription:"",groupName:"",nickname:"",step:1,profileimageSrc:null}},methods:{next(){""!=this.groupName&&null!=this.groupName&&void 0!=this.groupName?this.step=2:alert("그룹 명을 입력하지않으셨습니다.")},create(){if(""==this.nickname||null==this.nickname||void 0==this.nickname)return void alert("닉네임을 입력하지않으셨습니다.");const e=new FormData,s={name:this.groupName,description:this.groupDescription,nickname:this.nickname};e.append("data",JSON.stringify(s)),null!=this.imageSrc&&e.append("imageUrl",os(this.imageSrc)),null!=this.profileimageSrc&&e.append("profileImageUrl",os(this.profileimageSrc)),pc.post("/api/group",e,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((()=>{const e=v.aF.getInstance(document.getElementById("exampleModal1"));e&&e.hide(),this.modalClose(),alert("생성 완료!"),this.$router.push("/groups")}))},modalClose(){this.$emit("createModalClose",!1)},previewImage(e){const s=e.target.files[0];if(s){const e=new FileReader;e.onload=e=>{this.imageSrc=e.target.result},e.readAsDataURL(s)}},profilePreviewImage(e){const s=e.target.files[0];if(s){const e=new FileReader;e.onload=e=>{this.profileimageSrc=e.target.result},e.readAsDataURL(s)}},resetForm(){this.groupDescription="",this.groupName="",this.nickname="",this.imageSrc=null}}};const Ia=(0,y.A)(wa,[["render",La],["__scopeId","data-v-030a8b1f"]]);var Sa=Ia;const Na={class:"modal fade",id:"exampleModal2",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Ma={class:"modal-dialog modal-dialog-centered"},Ea={class:"modal-content"},qa={class:"modal-header"},Ua={key:0,class:"modal-title fs-5",id:"exampleModalLabel"},Ra={key:1,class:"modal-title fs-5",id:"exampleModalLabel"},Xa={key:2,class:"modal-title fs-5",id:"exampleModalLabel"},Pa={class:"modal-body"},Ta={key:0,class:"form-group"},Aa={class:"upload-container"},xa={for:"profileImageUpload",class:"upload-label"},Oa=["src"],Ga={class:"form-group"},Ja={for:"nickname",class:"placeholder-label3"},Da={class:"form-group"},Ka={for:"groupDescription",class:"placeholder-label2"},$a={class:"upload-container"},Ba={for:"profileImageUpload",class:"upload-label"},Va=["src"],Fa={key:1,class:"upload-icon"},Qa={class:"form-group"},ja={class:"modal-footer"},Ha={key:1,class:"mt-3 d-flex justify-content-between"},za={key:2},Wa={key:1,type:"button",class:"btn btn-dark btn-block",disabled:""};function Za(e,s,a,i,n,l){return(0,o.uX)(),(0,o.CE)("div",Na,[(0,o.Lk)("div",Ma,[(0,o.Lk)("div",Ea,[(0,o.Lk)("div",qa,[1===n.step?((0,o.uX)(),(0,o.CE)("h1",Ua,"초대코드 입력")):(0,o.Q3)("",!0),2===n.step?((0,o.uX)(),(0,o.CE)("h1",Ra,"초대코드 입력 - 그룹 정보 확인")):(0,o.Q3)("",!0),3===n.step?((0,o.uX)(),(0,o.CE)("h1",Xa,"초대코드 입력 - 내 프로필 생성")):(0,o.Q3)("",!0),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:s[0]||(s[0]=(...e)=>l.modalClose&&l.modalClose(...e))})]),(0,o.Lk)("div",Pa,[1===n.step?((0,o.uX)(),(0,o.CE)("div",Ta,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"groupName",class:"group-name form-control",placeholder:" ","onUpdate:modelValue":s[1]||(s[1]=e=>n.inviteCode=e)},null,512),[[t.Jo,n.inviteCode]]),s[11]||(s[11]=(0,o.Lk)("label",{for:"groupName",class:"placeholder-label"},[(0,o.eW)("초대코드"),(0,o.Lk)("span",{class:"required"},"*")],-1))])):(0,o.Q3)("",!0),2===n.step?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.Lk)("div",Aa,[(0,o.Lk)("label",xa,[null!=n.groupInfo.imageUrl?((0,o.uX)(),(0,o.CE)("img",{key:0,src:n.groupInfo.imageUrl,alt:"Image Preview",class:"image-preview"},null,8,Oa)):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",Ga,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"nickname",class:"nickname group-name form-control",placeholder:" ","onUpdate:modelValue":s[2]||(s[2]=e=>n.groupInfo.name=e),disabled:""},null,512),[[t.Jo,n.groupInfo.name]]),(0,o.Lk)("label",Ja,(0,r.v_)(n.groupInfo.name),1)]),(0,o.Lk)("div",Da,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"groupDescription","onUpdate:modelValue":s[3]||(s[3]=e=>n.groupDescription=e),class:"group-description form-control group-description",placeholder:" ",disabled:""},null,512),[[t.Jo,n.groupDescription]]),(0,o.Lk)("label",Ka,(0,r.v_)(n.groupInfo.description),1)])],64)):(0,o.Q3)("",!0),3===n.step?((0,o.uX)(),(0,o.CE)(o.FK,{key:2},[(0,o.Lk)("div",$a,[(0,o.Lk)("input",{type:"file",id:"profileImageUpload",accept:"image/*",onChange:s[4]||(s[4]=(...e)=>l.profilePreviewImage&&l.profilePreviewImage(...e)),style:{display:"none"}},null,32),(0,o.Lk)("label",Ba,[n.profileimageSrc?((0,o.uX)(),(0,o.CE)("img",{key:0,src:n.profileimageSrc,alt:"Image Preview",class:"image-preview"},null,8,Va)):((0,o.uX)(),(0,o.CE)("span",Fa,"+"))])]),(0,o.Lk)("div",Qa,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"nickname",class:"nickname group-name form-control",placeholder:" ","onUpdate:modelValue":s[5]||(s[5]=e=>n.nickname=e)},null,512),[[t.Jo,n.nickname]]),s[12]||(s[12]=(0,o.Lk)("label",{for:"nickname",class:"placeholder-label3"},[(0,o.eW)("닉네임"),(0,o.Lk)("span",{class:"required"},"*")],-1)),(0,o.Lk)("button",{class:"btn btn-dark",onClick:s[6]||(s[6]=(...e)=>l.nickNameCheck&&l.nickNameCheck(...e))},"중복 체크")])],64)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",ja,[1===n.step?((0,o.uX)(),(0,o.CE)("button",{key:0,type:"button",class:"btn btn-dark btn-block",onClick:s[7]||(s[7]=(...e)=>l.nextOne&&l.nextOne(...e))},"다음")):(0,o.Q3)("",!0),2===n.step?((0,o.uX)(),(0,o.CE)("div",Ha,[(0,o.Lk)("button",{type:"button",class:"btn btn-dark btn-block",onClick:s[8]||(s[8]=(...e)=>l.back&&l.back(...e))},"이전"),(0,o.Lk)("button",{type:"button",class:"btn btn-dark btn-block",onClick:s[9]||(s[9]=(...e)=>l.nextTwo&&l.nextTwo(...e))},"다음")])):(0,o.Q3)("",!0),3===n.step?((0,o.uX)(),(0,o.CE)("div",za,[n.nickNameDupCheck?((0,o.uX)(),(0,o.CE)("button",{key:0,type:"button",class:"btn btn-dark btn-block","data-bs-dismiss":"modal","aria-label":"Close",onClick:s[10]||(s[10]=(...e)=>l.create&&l.create(...e))},"가입")):((0,o.uX)(),(0,o.CE)("button",Wa,"가입"))])):(0,o.Q3)("",!0)])])])])}var Ya={data(){return{imageSrc:null,groupDescription:"",groupName:"",nickname:"",step:1,profileimageSrc:null,groupInfo:null,inviteCode:null,nickNameDupCheck:!1}},methods:{nextOne(){""!=this.inviteCode&&null!=this.inviteCode&&void 0!=this.inviteCode?pc.get("/api/group/group-info/"+this.inviteCode,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.groupInfo=e.data.data,this.step=2})).catch((e=>{alert(e.response.data.message)})):alert("그룹 명을 입력하지않으셨습니다.")},nextTwo(){this.step=3},back(){this.step=1,this.inviteCode=null,this.groupInfo=null},previewImage(e){const s=e.target.files[0];if(s){const e=new FileReader;e.onload=e=>{this.imageSrc=e.target.result},e.readAsDataURL(s)}},profilePreviewImage(e){const s=e.target.files[0];if(s){const e=new FileReader;e.onload=e=>{this.profileimageSrc=e.target.result},e.readAsDataURL(s)}},resetForm(){this.groupDescription="",this.groupName="",this.nickname="",this.imageSrc=null},modalClose(){this.$emit("inviteModalClose",!1)},create(){null!=this.nickname?pc.post("/api/group/invite",{groupSequence:this.groupInfo.groupSequence,inviteCode:this.inviteCode,nickName:this.nickname,profileImageUrl:this.profileimageSrc},{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((()=>{this.modalClose();const e=v.aF.getInstance(document.getElementById("exampleModal2"));e&&e.hide(),this.$router.push("/groups")})).catch((e=>{alert(e.response.data.message)})):alert("가입할 그룹에서 사용할 프로필을 작성해주세요")},nickNameCheck(){pc.get(`/api/group/${this.groupInfo.groupSequence}/nick-name?nickName=${this.nickname}`,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((()=>{this.nickNameDupCheck=!0})).catch((e=>{alert(e.response.data.message)}))}}};const _a=(0,y.A)(Ya,[["render",Za],["__scopeId","data-v-59977799"]]);var et=_a,st={components:{GroupCreate:Sa,InviteGroup:et},data(){return{groupCreateModal:null,groupInviteModal:null,groupAdd:null}},props:{isLogin:{type:Boolean,required:!0}},created(){if(!this.isLogin)return alert("로그인 후 접근 가능한 페이지입니다."),void this.$router.go("/")},methods:{previewImage(e){const s=e.target.files[0];if(s){const e=new FileReader;e.onload=e=>{this.imageSrc=e.target.result},e.readAsDataURL(s)}},createModalClose(){this.groupCreateModal=!1},inviteModalClose(){this.groupInviteModal=!1}}};const at=(0,y.A)(st,[["render",aa],["__scopeId","data-v-137d76fe"]]);var tt=at;const ot={class:"b-container"},it={key:0,class:"group-container"},nt={class:"group-header"},lt=["src"],rt={key:2,class:"preview"},ct={class:"group-info"},dt={class:"group-info-name"},ut={class:"modal fade",id:"editGroupInfo",tabindex:"-1","aria-labelledby":"exampleModalLabel1","aria-hidden":"true"},pt={class:"modal-dialog modal-dialog-centered"},gt={class:"modal-content"},mt={class:"modal-header"},kt={class:"modal-body"},ht={class:"upload-container"},bt={for:"groupProfileImageUpload",class:"upload-label group-image"},vt=["src"],ft=["src"],yt={key:2,src:le,class:"img-thumbnail",alt:"user In Group Image"},Ct={key:0},Lt={class:"modal-footer"},wt={key:0,class:"btn btn-dark",disabled:""},It={class:"user-list"},St={key:0,src:le,alt:"User Profile",class:"user-profile-img"},Nt=["src"],Mt={class:"user-info"},Et={class:"user-name"},qt={key:0,class:"master-badge"},Ut={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Rt={class:"modal-dialog modal-dialog-centered"},Xt={class:"modal-content"},Pt={class:"modal-body"},Tt={class:"modal fade",id:"deleteVoteModal",tabindex:"-1","aria-labelledby":"deleteVoteModalLabel","aria-hidden":"true"},At={class:"modal-dialog modal-dialog-centered"},xt={class:"modal-content"},Ot={class:"modal-body"},Gt={key:0},Jt={key:0},Dt={key:0},Kt={key:1},$t={key:1},Bt={class:"modal-footer"};function Vt(e,s,a,i,n,l){const c=(0,o.g2)("image-preview-open"),d=(0,o.g2)("EditProfile"),u=(0,o.g2)("leave-group");return(0,o.uX)(),(0,o.CE)("div",ot,[s[30]||(s[30]=(0,o.Lk)("h2",{class:"title"},"그룹 상세 정보",-1)),null!=n.groupInfo?((0,o.uX)(),(0,o.CE)("div",it,[(0,o.Lk)("div",nt,[null==n.groupInfo.imageUrl?((0,o.uX)(),(0,o.CE)("img",{key:0,src:le,alt:"Group Profile",class:"group-profile-img",onClick:s[0]||(s[0]=(...e)=>l.imagePreviewOpen&&l.imagePreviewOpen(...e))})):((0,o.uX)(),(0,o.CE)("img",{key:1,src:l.imageUrl(n.groupInfo.imageUrl),alt:"Group Profile",class:"group-profile-img",onClick:s[1]||(s[1]=(...e)=>l.imagePreviewOpen&&l.imagePreviewOpen(...e))},null,8,lt)),n.isPreviewOpen?((0,o.uX)(),(0,o.CE)("div",rt,[(0,o.bF)(c,{imageUrl:n.groupInfo.imageUrl,onClosePreview:l.closePreview},null,8,["imageUrl","onClosePreview"])])):(0,o.Q3)("",!0),(0,o.Lk)("div",ct,[(0,o.Lk)("span",dt,(0,r.v_)(n.groupInfo.name),1),n.groupInfo.isMaster?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-dark edit-button",onClick:s[2]||(s[2]=(...s)=>e.editGroupName&&e.editGroupName(...s)),"data-bs-toggle":"modal","data-bs-target":"#editGroupInfo"},"수정")):(0,o.Q3)("",!0),(0,o.Lk)("div",ut,[(0,o.Lk)("div",pt,[(0,o.Lk)("div",gt,[(0,o.Lk)("div",mt,[(0,o.eW)((0,r.v_)(n.groupInfo.name)+" 프로필 수정 ",1),s[12]||(s[12]=(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),(0,o.Lk)("div",kt,[(0,o.Lk)("div",ht,[(0,o.Lk)("input",{type:"file",id:"groupProfileImageUpload",accept:"image/*",onChange:s[3]||(s[3]=(...e)=>l.previewImage&&l.previewImage(...e)),style:{display:"none"}},null,32),(0,o.Lk)("label",bt,[null!=n.imageSrc?((0,o.uX)(),(0,o.CE)("img",{key:0,src:n.imageSrc,alt:"Image Preview",class:"image-preview"},null,8,vt)):null!=n.groupInfo&&null!=n.groupInfo.imageUrl?((0,o.uX)(),(0,o.CE)("img",{key:1,src:l.imageUrl(n.groupInfo.imageUrl),class:"image-preview"},null,8,ft)):((0,o.uX)(),(0,o.CE)("img",yt))])]),null!=n.groupInfo?((0,o.uX)(),(0,o.CE)("div",Ct,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"groupName",class:"nickName form-control",placeholder:" ","onUpdate:modelValue":s[4]||(s[4]=e=>n.groupNewName=e)},null,512),[[t.Jo,n.groupNewName]]),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"groupDesc",class:"desc form-control",placeholder:" ","onUpdate:modelValue":s[5]||(s[5]=e=>n.groupDescript=e)},null,512),[[t.Jo,n.groupDescript]])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Lt,[s[13]||(s[13]=(0,o.Lk)("button",{class:"btn btn-dark","data-bs-dismiss":"modal","aria-label":"Close"},"닫기",-1)),null==this.groupNewName||void 0==this.groupNewName||""==this.groupNewName?((0,o.uX)(),(0,o.CE)("button",wt,"저장")):((0,o.uX)(),(0,o.CE)("button",{key:1,class:"btn btn-dark",onClick:s[6]||(s[6]=(...e)=>l.updateGroupInfo&&l.updateGroupInfo(...e)),"data-bs-dismiss":"modal","aria-label":"Close"},"저장"))])])])])])]),(0,o.Lk)("div",null,(0,r.v_)(n.groupInfo.description),1),(0,o.Lk)("div",It,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.groupInfo.users,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"user-item",key:e.userSequence},[null==e.imageUrl?((0,o.uX)(),(0,o.CE)("img",St)):((0,o.uX)(),(0,o.CE)("img",{key:1,src:l.imageUrl(e.imageUrl),alt:"Group Profile",class:"group-profile-img"},null,8,Nt)),(0,o.Lk)("div",Mt,[(0,o.Lk)("span",Et,[(0,o.eW)((0,r.v_)(e.nickname)+" ",1),"MASTER"==e.grade?((0,o.uX)(),(0,o.CE)("span",qt,"(마스터)")):(0,o.Q3)("",!0)]),e.userSequence==n.userSequence?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-dark edit-button",onClick:s[7]||(s[7]=(...e)=>l.editUserName&&l.editUserName(...e)),"data-bs-toggle":"modal","data-bs-target":"#editGroupProfile"},"수정")):(0,o.Q3)("",!0),(0,o.bF)(d,{selectGroup:n.groupInfo,groupNickNameInfo:n.groupNickNameInfo,onResetGroup:l.resetGroup},null,8,["selectGroup","groupNickNameInfo","onResetGroup"])])])))),128))]),s[29]||(s[29]=(0,o.Lk)("button",{class:"btn btn-dark btn-block group-btn","data-bs-toggle":"modal","data-bs-target":"#leaveGroup"},"그룹 탈퇴",-1)),(0,o.bF)(u,{group:n.groupInfo},null,8,["group"]),(0,o.Lk)("button",{class:"btn btn-dark btn-block group-btn","data-bs-toggle":"modal","data-bs-target":"#exampleModal",onClick:s[8]||(s[8]=(...e)=>l.getInviteCode&&l.getInviteCode(...e))},"초대코드 발급"),(0,o.Lk)("div",Ut,[(0,o.Lk)("div",Rt,[(0,o.Lk)("div",Xt,[s[15]||(s[15]=(0,o.Lk)("div",{class:"modal-header"},[(0,o.Lk)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"초대코드 발급"),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,o.Lk)("div",Pt,[(0,o.bo)((0,o.Lk)("input",{class:"invite-code",type:"text","onUpdate:modelValue":s[9]||(s[9]=e=>n.inviteCode=e),disabled:""},null,512),[[t.Jo,n.inviteCode]]),s[14]||(s[14]=(0,o.Lk)("div",null,"발급된 초대코드는 한시간 후 만료됩니다.",-1))]),s[16]||(s[16]=(0,o.Lk)("div",{class:"modal-footer"},[(0,o.Lk)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal","aria-label":"Close"},"닫기")],-1))])])]),n.groupInfo.isMaster?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-dark btn-block group-btn",onClick:s[10]||(s[10]=(...e)=>l.isGroupDeletionVoteInProgress&&l.isGroupDeletionVoteInProgress(...e)),"data-bs-toggle":"modal","data-bs-target":"#deleteVoteModal"},"그룹 삭제 투표 진행")):(0,o.Q3)("",!0),(0,o.Lk)("div",Tt,[(0,o.Lk)("div",At,[(0,o.Lk)("div",xt,[s[28]||(s[28]=(0,o.Lk)("div",{class:"modal-header"},[(0,o.Lk)("h1",{class:"modal-title fs-5",id:"deleteVoteModalLabel"},"그룹 삭제 투표 개시"),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,o.Lk)("div",Ot,[s[17]||(s[17]=(0,o.eW)(" 그룹 삭제 투표가 진행됩니다.")),s[18]||(s[18]=(0,o.Lk)("br",null,null,-1)),s[19]||(s[19]=(0,o.eW)(" 그룹 내 회원이 과반수 이상이 찬성한다면 즉시 삭제됩니다.")),s[20]||(s[20]=(0,o.Lk)("br",null,null,-1)),s[21]||(s[21]=(0,o.eW)(" 과반수가 동의하지 않았다면 삭제는 무산됩니다.")),s[22]||(s[22]=(0,o.Lk)("br",null,null,-1)),s[23]||(s[23]=(0,o.eW)(" 일주일 내로 투표가 재 진행된다면 2차 투표가 시작됩니다.")),s[24]||(s[24]=(0,o.Lk)("br",null,null,-1)),s[25]||(s[25]=(0,o.eW)(" 2차 투표에서도 과반수가 동의하지 않는다면 재투표에서 그룹 삭제에 동의한 인원은 그룹에서 탈퇴됩니다(작성한 잼얘도 함께 삭제됩니다) ")),s[26]||(s[26]=(0,o.Lk)("br",null,null,-1)),null!=n.voteInfo?((0,o.uX)(),(0,o.CE)("div",Gt,[n.voteInfo.isNowVoting?((0,o.uX)(),(0,o.CE)("div",Jt,[n.voteInfo.hasRevoted?((0,o.uX)(),(0,o.CE)("span",Dt,"현재 2차 투표 진행 중 입니다.")):((0,o.uX)(),(0,o.CE)("span",Kt,"현재 1차 투표 진행 중 입니다.")),(0,o.eW)(" 동의 인원 : "+(0,r.v_)(n.voteInfo.agreeUserSeqs.length)+" 비동의 인원 : "+(0,r.v_)(n.voteInfo.disagreeUserSeqs.length),1)])):n.voteInfo.isWaitingDeleteReVoted?((0,o.uX)(),(0,o.CE)("div",$t," 1차 투표에서 과반수의 삭제 승인을 얻지못해 2차 투표 대기중입니다. 삭제를 누르면 2차 투표가 진행됩니다. 만약 재투표에서도 과반수의 동의를 얻지못한다면 운영자는 자동 그룹탈퇴처리되며 운영자 권한은 가입 기간이 가장 오래된 유저에게 자동 양도됩니다. ")):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Bt,[(0,o.Lk)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal","aria-label":"Close",onClick:s[11]||(s[11]=(...e)=>l.deleteGroupVote&&l.deleteGroupVote(...e))},"삭제"),s[27]||(s[27]=(0,o.Lk)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal","aria-label":"Close"},"닫기",-1))])])])])])):(0,o.Q3)("",!0)])}const Ft={class:"image-preview-container"},Qt=["src"],jt=["src"];function Ht(e,s,a,t,i,n){return(0,o.uX)(),(0,o.CE)("div",{class:"image-preview-overlay",onClick:s[0]||(s[0]=(...e)=>n.closePreview&&n.closePreview(...e))},[(0,o.Lk)("div",Ft,[a.image?((0,o.uX)(),(0,o.CE)("img",{key:0,src:a.image,alt:"Preview Image",class:"large-image"},null,8,Qt)):null!=a.imageUrlLink?((0,o.uX)(),(0,o.CE)("img",{key:1,src:n.imageUrl(a.imageUrlLink),alt:"Preview Image",class:"large-image"},null,8,jt)):(0,o.Q3)("",!0)])])}var zt={data(){return{}},props:{image:{type:File,require:!1},imageUrlLink:{type:String,require:!1}},methods:{imageUrl:is,closePreview(){this.$emit("closePreview",!1)}}};const Wt=(0,y.A)(zt,[["render",Ht]]);var Zt=Wt,Yt={name:"groupInfo",components:{LeaveGroup:De,EditProfile:rs,ImagePreviewOpen:Zt},data(){return{groupInfo:null,userSequence:null,inviteCode:null,voteInfo:null,groupNickNameInfo:{},imageSrc:null,groupNewName:null,groupDescript:null,isPreviewOpen:!1}},props:{seq:Number,isLogin:{require:!0}},created(){if(!this.isLogin)return alert("로그인 후 접속가능한 페이지입니다."),void this.$router.push("/login");this.userSequence=this.$cookies.get("sequence"),pc.get("/api/group/"+this.seq,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.groupInfo=e.data.data,this.groupNewName=this.groupInfo.name,this.groupDescript=this.groupInfo.description})).catch((e=>{alert(e.response.data.message),this.$router.push("/groups")}))},methods:{imageUrl:is,deleteGroupVote(){pc.delete("/api/group/"+this.seq,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{e.data.data?(alert("그룹이 삭제 완료되었습니다"),this.$cookies.get("group").groupSequence==this.seq&&this.$cookies.remove("group"),this.$router.push("groups")):alert("삭제 투표가 시작되었습니다. 과반수 이상 동의시 모든 그룹 내 모든 게시글이 삭제됩니다.")})).catch((e=>{alert(e.response.data.message)}))},getInviteCode(){pc.get("/api/group/invite/"+this.seq,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.inviteCode=e.data.data})).catch((e=>{alert(e.response.data.message+": 잠시 후 다시 시도해주세요.")}))},isGroupDeletionVoteInProgress(){pc.get("/api/group/vote-info/"+this.seq,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.voteInfo=e.data.data}))},editUserName(){pc.get("/api/group/user/"+this.groupInfo.groupSequence,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.groupNickNameInfo=e.data.data}))},resetGroup(){pc.get("/api/group/"+this.seq,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.groupInfo=e.data.data})).catch((e=>{alert(e.response.data.message),this.$router.push("/groups")}))},updateGroupInfo(){null==this.groupNewName&&alert("그룹 명은 비워둘 수 없습니다.");const e=new FormData,s={name:this.groupNewName,description:this.groupDescript};e.append("data",JSON.stringify(s)),null!=this.imageSrc&&e.append("file",os(this.imageSrc)),pc.post("/api/group/"+this.seq,e,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{const s=e.data.data;this.groupInfo.name=s.name,this.groupInfo.description=s.description,this.groupInfo.imageUrl=s.imageUrl}))},previewImage(e){const s=this.$refs.imgbox;e.target.files&&e.target.files[0]?this.profileImage=e.target.files[0]:s.style.backgroundImage="";const a=e.target.files[0];if(a){const e=new FileReader;e.onload=e=>{this.imageSrc=e.target.result},e.readAsDataURL(a)}},imagePreviewOpen(){this.isPreviewOpen=!0},closePreview(){this.isPreviewOpen=!1}}};const _t=(0,y.A)(Yt,[["render",Vt],["__scopeId","data-v-31f00d29"]]);var eo=_t;const so={class:"b-container"},ao={class:"title fs-5",id:"jamye-create1"},to={class:"form-group"},oo={class:"col-auto"},io={class:"modal fade",id:"nicknameAdd",tabindex:"-1","aria-labelledby":"nicknameAdd","aria-hidden":"true"},no={class:"modal-dialog modal-dialog-centered"},lo={class:"modal-content"},ro={class:"modal-header"},co={class:"modal-body"},uo={key:0},po={key:0,class:"btn btn-dark btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},go={key:1,class:"btn btn-dark btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},mo={class:"dropdown-menu",style:{"max-height":"200px","overflow-y":"auto"}},ko=["onClick"],ho={class:"modal-footer"},bo={class:"nicknames-container"},vo=["onClick"],fo={class:"row g-2"},yo={class:"col-auto"},Co={class:"col-auto"},Lo={class:"card card-body"},wo={class:"chat-room"},Io={key:0,class:"chat-message mt-3"},So=["onClick","id"],No={class:"info-container"},Mo={class:"button-container"},Eo=["onClick"],qo=["onClick"],Uo=["onClick"],Ro=["onClick"],Xo=["onClick"],Po=["onClick"],To=["onClick"],Ao={class:"send-date"},xo=["onBlur"],Oo=["onUpdate:modelValue"],Go=["onUpdate:modelValue"],Jo=["onUpdate:modelValue"],Do={class:"image-gallery"},Ko=["src","onClick"],$o={key:1,class:"from-me"},Bo=["value","onInput"],Vo=["onClick"],Fo={class:"reply-header"},Qo={class:"reply-message"},jo={class:"image-gallery"},Ho=["src","onClick"],zo={key:1,class:"chat-message mt-3"},Wo={class:"info-container"},Zo={key:0},Yo={key:0,class:"btn btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},_o={key:1,class:"btn btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},ei={class:"dropdown-menu",style:{"max-height":"200px","overflow-y":"auto"}},si=["onClick"],ai={key:0},ti={key:1},oi={key:0},ii={class:"send-user"},ni={key:1,class:"send-user"},li={class:"button-container"},ri=["onClick"],ci=["onClick"],di=["onClick"],ui=["onClick"],pi=["onClick"],gi=["id","onClick"],mi=["onBlur"],ki=["onUpdate:modelValue"],hi=["onUpdate:modelValue"],bi=["onUpdate:modelValue","onBlur"],vi={class:"image-gallery"},fi=["src","onClick"],yi={key:1,class:"from-them"},Ci={class:"reply-header-them"},Li=["onClick"],wi={class:"reply-message-them"},Ii=["value","onInput"],Si={class:"image-gallery"},Ni=["src","onClick"],Mi={class:"info-container-them"},Ei={class:"send-date"},qi={class:"button-container"},Ui=["onClick"],Ri=["onClick"],Xi=["onClick"],Pi=["onClick"],Ti=["onClick"],Ai=["onClick"],xi=["onClick"],Oi={class:"image-preview-container"},Gi=["src"];function Ji(e,s,a,i,n,l){const c=(0,o.g2)("image-box");return(0,o.uX)(),(0,o.CE)("div",so,[(0,o.Lk)("h1",ao,(0,r.v_)(n.groupName)+"가챠 잼얘 넣기 - 메세지 타입",1),(0,o.Lk)("div",to,[(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control",name:"post-title",id:"post-title","onUpdate:modelValue":s[0]||(s[0]=e=>n.postTitle=e),placeholder:"게시글 제목"},null,512),[[t.Jo,n.postTitle]])]),s[40]||(s[40]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("div",oo,[(0,o.Lk)("button",{type:"button",class:"btn btn-dark mb-3","data-bs-toggle":"modal","data-bs-target":"#nicknameAdd",onClick:s[1]||(s[1]=e=>l.groupUserList())},"프로필 닉네임 추가")]),(0,o.Lk)("div",io,[(0,o.Lk)("div",no,[(0,o.Lk)("div",lo,[(0,o.Lk)("div",ro,[s[10]||(s[10]=(0,o.Lk)("h1",{class:"modal-title fs-5",id:"jamye-create1"},"프로필 닉네임 추가",-1)),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:s[2]||(s[2]=(0,t.D$)((()=>{}),["stop"]))})]),(0,o.Lk)("div",co,[(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control",placeholder:"업로드할 메세지 이미지에 캡쳐된 상대의 이름을 입력해주세요","onUpdate:modelValue":s[3]||(s[3]=e=>n.nickname=e)},null,512),[[t.Jo,n.nickname]]),0!=n.userInGroup?((0,o.uX)(),(0,o.CE)("div",uo,[s[11]||(s[11]=(0,o.Lk)("br",null,null,-1)),null==n.userInGroupInfo?((0,o.uX)(),(0,o.CE)("button",po," 해당 회원과 매핑할 그룹 내 유저가 있다면 선택해주세요 ")):((0,o.uX)(),(0,o.CE)("button",go,(0,r.v_)(n.userInGroupInfo.nickname),1)),(0,o.Lk)("ul",mo,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.userInGroup,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e.groupUserSequence,onClick:s=>l.userInGroupSet(e),style:{padding:"8px",cursor:"pointer"}},(0,r.v_)(e.nickname),9,ko)))),128))])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",ho,[(0,o.Lk)("button",{class:"btn btn-dark",onClick:s[4]||(s[4]=(...e)=>l.nicknameAdd&&l.nicknameAdd(...e))},"추가")])])])]),(0,o.Lk)("div",bo,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.nicknames,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:"nickname"},[(0,o.eW)((0,r.v_)(e)+" ",1),(0,o.Lk)("span",{class:"remove-button",onClick:s=>l.removeNickname(e)},"X",8,vo)])))),128))]),(0,o.Lk)("div",null,[(0,o.Lk)("div",fo,[(0,o.Lk)("div",yo,[(0,o.Lk)("input",{type:"file",accept:"image/*",class:"form-control",id:"inputPassword2",placeholder:"",onChange:s[5]||(s[5]=(...e)=>l.messageImageChange&&l.messageImageChange(...e))},null,32)]),(0,o.Lk)("div",Co,[(0,o.Lk)("button",{type:"submit",class:"btn btn-dark mb-3",onClick:s[6]||(s[6]=(...e)=>l.messageListGet&&l.messageListGet(...e))},"메세지 변환")])]),s[12]||(s[12]=(0,o.Lk)("button",{type:"button",class:"btn btn-dark mb-3","data-bs-toggle":"modal","data-bs-target":"#imageModal"},"이미지 보관함",-1)),(0,o.bF)(c,{type:"MSG",imageKey:this.imageAddKey,imageSeq:this.imageAddSeq,message:this.messageResponse,imageUidMap:this.imageMap,onImageMap:l.handleImageMapUpdate,onMessageImage:l.messageUpdate},null,8,["imageKey","imageSeq","message","imageUidMap","onImageMap","onMessageImage"])]),n.replyMode?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-dark mt-3",onClick:s[7]||(s[7]=(...e)=>l.saveReplyTarget&&l.saveReplyTarget(...e))}," 저장 ")):(0,o.Q3)("",!0),(0,o.Lk)("div",Lo,[(0,o.Lk)("div",wo,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(Object.entries(n.messageResponse),(([e,a])=>((0,o.uX)(),(0,o.CE)("div",{key:e},[a.myMessage?((0,o.uX)(),(0,o.CE)("div",Io,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.message,(i=>((0,o.uX)(),(0,o.CE)("div",{key:i.seq,class:"message-container-me",onClick:e=>l.scrollToMessage(i),id:"message-"+e+"_"+i.seq},[(0,o.Lk)("div",No,[(0,o.Lk)("div",Mo,[(0,o.Lk)("button",{class:"circle-btn add",onClick:s=>l.addEmptyMessage(e,i.seq)},s[13]||(s[13]=[(0,o.Lk)("i",{class:"fas fa-plus"},null,-1)]),8,Eo),(0,o.Lk)("button",{class:"circle-btn up-arrow",onClick:s=>l.moveMessageUp(e,i.seq)},s[14]||(s[14]=[(0,o.Lk)("i",{class:"fas fa-arrow-up"},null,-1)]),8,qo),(0,o.Lk)("button",{class:"circle-btn down-arrow",onClick:s=>l.moveMessageDown(e,i.seq)},s[15]||(s[15]=[(0,o.Lk)("i",{class:"fas fa-arrow-down"},null,-1)]),8,Uo),(0,o.Lk)("button",{class:"circle-btn edit",onClick:s=>l.editMessage(e,i.seq)},s[16]||(s[16]=[(0,o.Lk)("i",{class:"fas fa-pencil-alt"},null,-1)]),8,Ro),(0,o.Lk)("button",{class:"circle-btn delete",onClick:s=>l.removeMessageSeq(e,i.seq)},s[17]||(s[17]=[(0,o.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,Xo),(0,o.Lk)("button",{class:"circle-btn camera","data-bs-toggle":"modal","data-bs-target":"#imageModal",onClick:s=>l.selectImageKey(e,i.seq)},s[18]||(s[18]=[(0,o.Lk)("i",{class:"fas fa-camera"},null,-1)]),8,Po),(0,o.Lk)("button",{class:"circle-btn left",onClick:s=>l.moveLeft(e,i.seq)},s[19]||(s[19]=[(0,o.Lk)("i",{class:"fas fa-arrow-left"},null,-1)]),8,To)]),(0,o.Lk)("span",Ao,(0,r.v_)(a.sendDate),1)]),this.isEditing[e]&&this.isEditing[e][i.seq]?((0,o.uX)(),(0,o.CE)("p",{key:0,class:"from-me",onBlur:s=>l.saveMessage(e)},[i.isReply?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.bo)((0,o.Lk)("input",{class:"reply-header","onUpdate:modelValue":e=>i.replyTo=e},null,8,Oo),[[t.Jo,i.replyTo]]),s[20]||(s[20]=(0,o.Lk)("br",null,null,-1)),(0,o.bo)((0,o.Lk)("input",{class:"reply-message","onUpdate:modelValue":e=>i.replyMessage=e},null,8,Go),[[t.Jo,i.replyMessage]]),s[21]||(s[21]=(0,o.Lk)("hr",null,null,-1))],64)):(0,o.Q3)("",!0),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>i.message=e,class:"from-me"},null,8,Jo),[[t.Jo,i.message]]),(0,o.Lk)("span",Do,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.imageKey,((e,s)=>((0,o.uX)(),(0,o.CE)("img",{key:s,src:this.imageMap[e],class:"small-image",onClick:s=>l.openPreview(e),alt:"Uploaded Image"},null,8,Ko)))),128))])],40,xo)):((0,o.uX)(),(0,o.CE)("p",$o,[n.replyMode?((0,o.uX)(),(0,o.CE)("input",{key:0,type:"radio",name:"replySelect",value:e||",",onInput:s=>l.updateReplySeq(e,i.seq),class:"form-check-input mt-1"},null,40,Bo)):(0,o.Q3)("",!0),i.isReply?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.Lk)("button",{class:"btn btn-sm btn-link me-2",onClick:e=>l.toggleReplyMode(i),title:"답장 연결"}," 🔗 ",8,Vo),(0,o.Lk)("span",Fo,(0,r.v_)(i.replyTo),1),s[22]||(s[22]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("span",Qo,(0,r.v_)(i.replyMessage),1),s[23]||(s[23]=(0,o.Lk)("hr",null,null,-1))],64)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,r.v_)(i.message)+" ",1),(0,o.Lk)("span",jo,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.imageKey,((e,s)=>((0,o.uX)(),(0,o.CE)("img",{key:s,src:this.imageMap[e],class:"small-image",onClick:s=>l.openPreview(e),alt:"Uploaded Image"},null,8,Ho)))),128))])]))],8,So)))),128))])):((0,o.uX)(),(0,o.CE)("div",zo,[(0,o.Lk)("div",Wo,[n.nickNameEdit[e]?((0,o.uX)(),(0,o.CE)("div",Zo,[null!=n.userNameMap[a.sendUser]?((0,o.uX)(),(0,o.CE)("button",Yo,(0,r.v_)(n.userNameMap[a.sendUser].nickname),1)):((0,o.uX)(),(0,o.CE)("button",_o,(0,r.v_)(a.sendUser),1)),(0,o.Lk)("ul",ei,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.nicknames,(s=>((0,o.uX)(),(0,o.CE)("li",{key:s,onClick:a=>l.editNickNameComplate(e,s),style:{padding:"8px",cursor:"pointer"}},[(0,o.eW)((0,r.v_)(s)+" ",1),n.userNameMap[s]?((0,o.uX)(),(0,o.CE)("span",ai,"| "+(0,r.v_)(n.userNameMap[s].nickname),1)):(0,o.Q3)("",!0)],8,si)))),128))])])):((0,o.uX)(),(0,o.CE)("div",ti,[null!=n.userNameMap[a.sendUser]?((0,o.uX)(),(0,o.CE)("div",oi,[(0,o.Lk)("div",ii,(0,r.v_)(n.userNameMap[a.sendUser].nickname),1)])):((0,o.uX)(),(0,o.CE)("div",ni,(0,r.v_)(a.sendUser),1))])),(0,o.Lk)("div",li,[(0,o.Lk)("button",{class:"circle-btn up-arrow",onClick:s=>l.moveSendUserUp(e)},s[24]||(s[24]=[(0,o.Lk)("i",{class:"fas fa-arrow-up"},null,-1)]),8,ri),(0,o.Lk)("button",{class:"circle-btn down-arrow",onClick:s=>l.moveSendUserDown(e)},s[25]||(s[25]=[(0,o.Lk)("i",{class:"fas fa-arrow-down"},null,-1)]),8,ci),(0,o.Lk)("button",{class:"circle-btn edit",onClick:s=>l.editNickName(e)},s[26]||(s[26]=[(0,o.Lk)("i",{class:"fas fa-pencil-alt"},null,-1)]),8,di),(0,o.Lk)("button",{class:"circle-btn delete",onClick:s=>l.removeSendUser(e)},s[27]||(s[27]=[(0,o.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,ui),(0,o.Lk)("button",{class:"circle-btn right",onClick:s=>l.moveRight(e)},s[28]||(s[28]=[(0,o.Lk)("i",{class:"fas fa-arrow-right"},null,-1)]),8,pi)])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.message,(i=>((0,o.uX)(),(0,o.CE)("div",{key:i.seq,class:"message-container",id:"message-"+e+"_"+i.seq,onClick:e=>l.scrollToMessage(i)},[this.isEditing[e]&&this.isEditing[e][i.seq]?((0,o.uX)(),(0,o.CE)("p",{key:0,class:"from-them",onBlur:s=>l.saveMessage(e,i)},[i.isReply?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.bo)((0,o.Lk)("input",{class:"reply-header-them","onUpdate:modelValue":e=>i.replyTo=e},null,8,ki),[[t.Jo,i.replyTo]]),s[29]||(s[29]=(0,o.Lk)("br",null,null,-1)),(0,o.bo)((0,o.Lk)("input",{class:"reply-message-them","onUpdate:modelValue":e=>i.replyMessage=e},null,8,hi),[[t.Jo,i.replyMessage]]),s[30]||(s[30]=(0,o.Lk)("hr",null,null,-1))],64)):(0,o.Q3)("",!0),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>i.message=e,onBlur:s=>l.saveMessage(e,i),class:"from-them"},null,40,bi),[[t.Jo,i.message]]),(0,o.Lk)("span",vi,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.imageKey,((e,s)=>((0,o.uX)(),(0,o.CE)("img",{key:s,src:this.imageMap[e],class:"small-image",onClick:s=>l.openPreview(e),alt:"Uploaded Image"},null,8,fi)))),128))])],40,mi)):((0,o.uX)(),(0,o.CE)("p",yi,[i.isReply?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.Lk)("span",Ci,(0,r.v_)(i.replyTo),1),(0,o.Lk)("button",{class:"btn btn-sm btn-link me-2",onClick:e=>l.toggleReplyMode(i),title:"답장 연결"}," 🔗 ",8,Li),s[31]||(s[31]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("span",wi,(0,r.v_)(i.replyMessage),1),s[32]||(s[32]=(0,o.Lk)("hr",null,null,-1))],64)):(0,o.Q3)("",!0),n.replyMode?((0,o.uX)(),(0,o.CE)("input",{key:1,type:"radio",name:"replySelect",value:e||",",onInput:s=>l.updateReplySeq(e,i.seq),class:"form-check-input mt-1"},null,40,Ii)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,r.v_)(i.message)+" ",1),(0,o.Lk)("span",Si,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.imageKey,((e,s)=>((0,o.uX)(),(0,o.CE)("img",{key:s,src:this.imageMap[e],class:"small-image",onClick:s=>l.openPreview(e),alt:"Uploaded Image"},null,8,Ni)))),128))])])),(0,o.Lk)("div",Mi,[(0,o.Lk)("span",Ei,(0,r.v_)(a.sendDate),1),(0,o.Lk)("div",qi,[(0,o.Lk)("button",{class:"circle-btn add",onClick:s=>l.addEmptyMessage(e,i.seq)},s[33]||(s[33]=[(0,o.Lk)("i",{class:"fas fa-plus"},null,-1)]),8,Ui),(0,o.Lk)("button",{class:"circle-btn up-arrow",onClick:s=>l.moveMessageUp(e,i.seq)},s[34]||(s[34]=[(0,o.Lk)("i",{class:"fas fa-arrow-up"},null,-1)]),8,Ri),(0,o.Lk)("button",{class:"circle-btn down-arrow",onClick:s=>l.moveMessageDown(e,i.seq)},s[35]||(s[35]=[(0,o.Lk)("i",{class:"fas fa-arrow-down"},null,-1)]),8,Xi),(0,o.Lk)("button",{class:"circle-btn edit",onClick:s=>l.editMessage(e,i.seq)},s[36]||(s[36]=[(0,o.Lk)("i",{class:"fas fa-pencil-alt"},null,-1)]),8,Pi),(0,o.Lk)("button",{class:"circle-btn delete",onClick:s=>l.removeMessageSeq(e,i.seq)},s[37]||(s[37]=[(0,o.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,Ti),(0,o.Lk)("button",{class:"circle-btn camera","data-bs-toggle":"modal","data-bs-target":"#imageModal",onClick:s=>l.selectImageKey(e,i.seq)},s[38]||(s[38]=[(0,o.Lk)("i",{class:"fas fa-camera"},null,-1)]),8,Ai),(0,o.Lk)("button",{class:"circle-btn right",onClick:s=>l.moveLeft(e,i.seq)},s[39]||(s[39]=[(0,o.Lk)("i",{class:"fas fa-arrow-right"},null,-1)]),8,xi)])])],8,gi)))),128))]))])))),128))])]),n.isPreviewOpen?((0,o.uX)(),(0,o.CE)("div",{key:1,class:"image-preview-overlay",onClick:s[8]||(s[8]=(...e)=>l.closePreview&&l.closePreview(...e))},[(0,o.Lk)("div",Oi,[(0,o.Lk)("img",{src:this.imageMap[n.previewImage],alt:"Preview Image",class:"large-image"},null,8,Gi)])])):(0,o.Q3)("",!0),(0,o.Lk)("button",{class:"btn btn-dark btn-block",onClick:s[9]||(s[9]=e=>l.createPost())},"생성")])}const Di={class:"modal fade",id:"imageModal",tabindex:"-1","aria-labelledby":"imageModalLabel","aria-hidden":"true"},Ki={class:"modal-dialog modal-lg"},$i={class:"modal-content"},Bi={class:"modal-body"},Vi={class:"mb-3"},Fi={class:"row g-3",id:"imagePreviewContainer"},Qi=["onClick"],ji={key:0},Hi=["checked"],zi=["src"],Wi={class:"modal-footer"},Zi=["disabled"],Yi=["disabled"];function _i(e,s,a,t,i,n){return(0,o.uX)(),(0,o.CE)("div",Di,[(0,o.Lk)("div",Ki,[(0,o.Lk)("div",$i,[s[5]||(s[5]=(0,o.Lk)("div",{class:"modal-header"},[(0,o.Lk)("h5",{class:"modal-title",id:"imageModalLabel"},"이미지 임시보관함"),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,o.Lk)("div",Bi,[(0,o.Lk)("div",Vi,[s[3]||(s[3]=(0,o.Lk)("label",{for:"imageUploadInput",class:"form-label"},"이미지 업로드",-1)),(0,o.Lk)("input",{class:"form-control",accept:"image/*",type:"file",id:"imageUploadInput",onChange:s[0]||(s[0]=(...e)=>n.handleImageUpload&&n.handleImageUpload(...e)),multiple:""},null,32)]),(0,o.Lk)("div",Fi,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(Object.entries(this.localImageUidMap),(([e,s])=>((0,o.uX)(),(0,o.CE)("div",{class:"card position-relative",style:{width:"18rem",cursor:"pointer"},key:e,onClick:s=>n.toggleSelection(e)},[null!=s?((0,o.uX)(),(0,o.CE)("div",ji,[(0,o.Lk)("input",{type:"checkbox",class:"form-check-input position-absolute",style:{top:"10px",left:"10px","z-index":"1"},checked:i.selectedImages.includes(e),readonly:""},null,8,Hi),(0,o.Lk)("img",{src:s,class:"card-img-top",alt:"Uploaded Image"},null,8,zi)])):(0,o.Q3)("",!0)],8,Qi)))),128))])]),(0,o.Lk)("div",Wi,[null!=this.imageKey&&null!=this.imageSeq||null!=this.cursorPosition?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-primary me-2",disabled:0===i.selectedImages.length,onClick:s[1]||(s[1]=(...e)=>n.insertSelectedImages&&n.insertSelectedImages(...e))}," 삽입 ",8,Zi)):(0,o.Q3)("",!0),(0,o.Lk)("button",{class:"btn btn-danger",disabled:0===i.selectedImages.length,onClick:s[2]||(s[2]=(...e)=>n.deleteSelectedImages&&n.deleteSelectedImages(...e))}," 삭제 ",8,Yi),s[4]||(s[4]=(0,o.Lk)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"},"닫기",-1))])])])])}var en=a(7684),sn={data(){return{images:[],selectedImages:[],localMessage:this.message,localImageUidMap:this.imageUidMap}},props:{imageKey:Number,imageSeq:Number,message:Map,type:String,imageUidMap:{type:Object,required:!0},cursorPosition:Number},watch:{message:{deep:!0,handler(e){this.localMessage=e}}},setup(){},methods:{toggleSelection(e){const s=this.selectedImages.indexOf(e);-1===s?this.selectedImages.push(e):this.selectedImages.splice(s,1)},insertSelectedImages(){"MSG"==this.type?(this.localMessage[this.imageKey]&&Array.isArray(this.localMessage[this.imageKey].message)&&(this.localMessage[this.imageKey].message.forEach((e=>{e.seq>this.imageSeq&&(e.seq=e.seq+1)})),this.localMessage[this.imageKey].message.push({seq:this.imageSeq+1,imageKey:this.selectedImages}),this.localMessage[this.imageKey].message.sort(((e,s)=>e.seq-s.seq)),this.$emit("messageUpdate",this.localMessage)),this.selectedImages=[]):"POST"==this.type&&this.$emit("addImageAtCursor",this.selectedImages)},deleteSelectedImages(){const e=this.selectedImages.filter((e=>Object.values(this.localMessage).some((s=>s.message.some((s=>s.imageKey?.includes(e)))))));e.length>0?alert("선택한 이미지 중 사용 중인 이미지가 있어 삭제할 수 없습니다."):(this.selectedImages.forEach((e=>{this.localImageUidMap[e]=null})),this.selectedImages=[])},handleImageUpload(e){const s=Array.from(e.target.files);s.forEach((e=>{const s=new FileReader;s.onload=e=>{this.images.push(e.target.result);const s=(0,en.A)();this.localImageUidMap[s]=e.target.result},s.readAsDataURL(e)})),e.target.value="",this.$emit("imageMap",this.localImageUidMap)}}};const an=(0,y.A)(sn,[["render",_i]]);var tn=an,on={components:{ImageBox:tn},data(){return{groupName:null,nickname:null,nicknames:[],name:null,messageImage:null,isEditing:{},nickNameEdit:{},postType:null,postTitle:null,detail:null,userInGroup:[],userInGroupInfo:null,userNameMap:new Map,replyMode:!1,selectedReplyKey:null,selectedReplySeq:null,replyOriginMessage:null,selectedImages:[],imageAddKey:null,imageAddSeq:null,isPreviewOpen:!1,previewImage:null,imageMap:{},messageResponse:{}}},props:{seq:Number,isLogin:{type:Boolean,required:!0}},created(){var e=this.$cookies.get("group");this.isLogin?null==e?(alert("메세지를 작성할 그룹을 먼저 선택해주세요"),this.$router.push("/")):this.groupName=e.name:(alert("로그인 후 게시글 작성이 가능합니다."),this.$router.push("/login"))},methods:{nicknameAdd(){null!=this.nickname?(this.nicknames.push(this.nickname),this.userNameMap[this.nickname]=this.userInGroupInfo,this.nickname=null,this.userInGroupInfo=null):alert("프로필 이름을 먼저 입력해주세요")},removeNickname(e){this.nicknames=this.nicknames.filter((s=>s!==e))},messageListGet(){if(null==this.messageImage)return void alert("메세지 변환할 이미지를 첨부해주세요");const e=new FormData;e.append("image",this.messageImage);const s=[...this.nicknames].join(",");pc.post("/api/post/message-text?sendUser="+s,e,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{if(null!=this.messageResponse&&0!=Object.keys(this.messageResponse).length){const s=Math.max(...Object.keys(this.messageResponse).map(Number));for(let[a,t]of Object.entries(e.data.data))this.messageResponse[Number(s)+Number(a)]=t}else this.messageResponse=e.data.data})).catch((e=>{alert(e.data.message)}))},messageImageChange(e){const s=this.$refs.imgbox;e.target.files&&e.target.files[0]?this.messageImage=e.target.files[0]:s.style.backgroundImage=""},editMessage(e,s){this.isEditing[e]||(this.isEditing[e]={}),this.isEditing[e][s]?this.isEditing[e][s]=!1:this.isEditing[e][s]=!0},saveMessage(e){this.isEditing[e]=!1},removeMessageSeq(e,s){this.messageResponse[e]&&Array.isArray(this.messageResponse[e].message)&&(this.messageResponse[e].message=this.messageResponse[e].message.filter((e=>e.seq!==s)),this.messageResponse[e].message.forEach((e=>{e.seq>s&&(e.seq=e.seq-1)})),this.isEditing[e]||(this.isEditing[e]={}),this.isEditing[e][s]=!1);var a=1,t=new Map;for(let[,o]of Object.entries(this.messageResponse))0!=o.message.length&&(t[a++]=o);this.messageResponse=t},addEmptyMessage(e,s){this.messageResponse[e]&&Array.isArray(this.messageResponse[e].message)&&(this.messageResponse[e].message.forEach((e=>{e.seq>s&&(e.seq=e.seq+1)})),this.messageResponse[e].message.push({seq:s+1,message:"."}),this.messageResponse[e].message.sort(((e,s)=>e.seq-s.seq)),this.isEditing[s+1]&&this.editMessage(e,s+1+1),this.editMessage(e,s+1))},moveLeft(e,s){console.log(`start - key=${e}, seq=${s}`);const a=this.messageResponse[e]?.message||[],t=a.findIndex((e=>e.seq===s));if(-1===t)return void console.error("해당 seq를 가진 메시지가 없습니다.");const[o]=a.splice(t,1);console.log(o);var i=new Map,n=1;for(let[p,g]of Object.entries(this.messageResponse))if(p==e){var l=[],r=1,c=[];0==g.message.length&&(n+=2);for(const e of g.message)e.seq>s?(console.log("downCheck"+e.message),l.push({...e,seq:r++}),console.log("addCheck"+JSON.stringify(l))):(console.log("originCheck"+JSON.stringify(e.message)),c.push(e));0!=c.length&&(i[n++]={...g,message:c},console.log("origin"+JSON.stringify(c))),0!=l.length&&(n+=2,i[n++]={...g,message:l},console.log("down:"+JSON.stringify(l)))}else Number(p)>Number(e)?(console.log(`id=${p}, key=${e}`),console.log("2down"+JSON.stringify(g)),n+=2,i[n++]=g):(console.log("std"+n+JSON.stringify(g)),i[n++]=g);console.log(JSON.stringify(i)),this.messageResponse=i;const d=Number(e)+1;o.seq=1;var u="임시";console.log(this.nicknames),console.log(this.nicknames.length),null!=this.nicknames&&void 0!=this.nicknames.length&&0!=this.nicknames.length&&(console.log("??"),u=this.nicknames[0],console.log(u),console.log(this.userNameMap[u])),console.log(d),this.messageResponse[d]={sendUserSeq:this.userNameMap[u],sendUser:u,message:[]},this.messageResponse[d].message.unshift(o),this.messageResponseTempRemove(this.messageResponse)},moveMessageUp(e,s){if(1==e&&1==s)return;const a=this.messageResponse[e].message;if(1===s){var t=JSON.parse(JSON.stringify(this.messageResponse[e-1]));if(1==t.message.length){var o=JSON.parse(JSON.stringify(this.messageResponse[e])),i=o.message.shift();this.messageResponse[e-1]={...this.messageResponse[e],message:[i]},this.messageResponse[e]=t;var n=new Map,l=1;for(let[s,a]of Object.entries(this.messageResponse))console.log(l),0!=o.message.length&&s==Number(e)+1&&(n[l++]=o),n[l++]=a;return void this.messageResponseTempRemove(n)}var r=JSON.parse(JSON.stringify(this.messageResponse[e].message.filter((e=>e.seq==s))));this.messageResponse[e].message=this.messageResponse[e].message.filter((e=>e.seq!=s)),console.log(JSON.parse(JSON.stringify(r)));var c=1;0!=this.messageResponse[e].message.length&&this.messageResponse[e].message.forEach((e=>{e.seq=c++})),console.log(JSON.parse(JSON.stringify(this.messageResponse[e])));var d=JSON.parse(JSON.stringify(this.messageResponse[e]));if(console.log(JSON.parse(JSON.stringify(t))),t.sendUser==r.sendUser){const s=t.message.reduce(((e,s)=>s.seq>e?s.seq:e),0);var u=t.message.pop();console.log("maxMsg"),console.log(JSON.parse(JSON.stringify(u)));var p=r.pop();console.log("lastMessage"),console.log(JSON.parse(JSON.stringify(p))),t.message.push({seq:s,message:p.message,imageKey:p.imageKey,imageUri:p.imageUri,isReply:p.isReply,replyMessage:p.replyMessage,replyTo:p.replyTo}),t.message.push({seq:s+1,message:u.message,imageKey:u.imageKey,imageUri:u.imageUri,isReply:u.isReply,replyMessage:u.replyMessage,replyTo:u.replyTo}),console.log("mm"),console.log(JSON.parse(JSON.stringify(t))),this.messageResponse[e-1].message=[]}else t.message=[t.message.pop()],d.message=r,d.sendDate=null;const a=t.message.reduce(((e,s)=>s.seq>e?s.seq:e),0);this.messageResponse[e-1].message=this.messageResponse[e-1].message.filter((e=>e.seq!=a));var g=new Map,m=1;console.log(JSON.parse(JSON.stringify(d)));for(let[s,o]of Object.entries(this.messageResponse))s==e?(0!=d.message.length&&e==m&&(g[m++]=d,console.log("new"),console.log(m),console.log(JSON.parse(JSON.stringify(g)))),0!=t.message.length&&(g[m++]=t,console.log("pre"),console.log(m),console.log(JSON.parse(JSON.stringify(g)))),0!=o.message.length&&(g[m++]=o,console.log("length"),console.log(m),console.log(JSON.parse(JSON.stringify(g))))):0!=o.message.length&&(g[m++]=o);console.log("last"),console.log(JSON.parse(JSON.stringify(g))),this.messageResponseTempRemove(g)}else{const e=a.findIndex((e=>e.seq===s));e>0&&([a[e-1],a[e]]=[a[e],a[e-1]],a[e-1].seq-=1,a[e].seq+=1)}},moveMessageDown(e,s){const a=Math.max(...Object.keys(this.messageResponse).map(Number)),t=this.messageResponse[a].message.reduce(((e,s)=>s.seq>e?s.seq:e),0);if(e==a&&s==t)return;const o=this.messageResponse[e].message,i=o.reduce(((e,s)=>s.seq>e?s.seq:e),0);if(s===i){var n=JSON.parse(JSON.stringify(this.messageResponse[e]));n.message=[];var l=this.messageResponse[e].message.pop();n.message.push({seq:1,message:l.message,imageKey:l.imageKey,imageUri:l.imageUri,isReply:l.isReply,replyMessage:l.replyMessage,replyTo:l.replyTo});var r=Number(e)+1,c=JSON.parse(JSON.stringify(this.messageResponse[r]));c.message=this.messageResponse[r].message.filter((e=>1==e.seq)),this.messageResponse[r].message=this.messageResponse[r].message.filter((e=>1!=e.seq));var d=1;0!=this.messageResponse[r].message.length&&this.messageResponse[r].message.forEach((e=>{e.seq=d++}));var u=new Map,p=1;for(let[s,a]of Object.entries(this.messageResponse))s==e?(0!=a.message.length&&(u[p++]=a),0!=c.message.length&&(u[p++]=c),0!=n.message.length&&(u[p++]=n)):0!=a.message.length&&(u[p++]=a);this.messageResponseTempRemove(u)}else{const e=o.findIndex((e=>e.seq===s));e<o.length-1&&([o[e],o[e+1]]=[o[e+1],o[e]],o[e].seq-=1,o[e+1].seq+=1)}},createPost(){if(null==this.postTitle){alert("게시글 제목을 입력해주세요");const e=document.getElementById("post-title");return void(e&&e.scrollIntoView({behavior:"smooth",block:"start"}))}const e=new FormData;Object.entries(this.imageMap).forEach((([s,a])=>{a instanceof File?e.append(s,a):e.append(s,os(a))}));const s=this.$cookies.get("group").groupSequence,a={title:this.postTitle,groupSeq:s,content:this.messageResponse};e.append("data",JSON.stringify(a));var t=new Map;console.log(this.userNameMap);for(let[o,i]of Object.entries(this.userNameMap))t[o]=null!=i?i.groupUserSequence:null;e.append("nickNameMap",JSON.stringify(t)),pc.post("/api/post/message",e,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.$router.push("/jamye/message"+e.data.data)}))},groupUserList(){pc.get("/api/group/users/"+this.$cookies.get("group").groupSequence,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.userInGroup=e.data.data}))},userInGroupSet(e){this.userInGroupInfo=e},removeImage(){},toggleReplyMode(e){this.replyMode=!this.replyMode,this.replyMode?this.replyOriginMessage=e:(this.selectedReplyKey=null,this.selectedReplySeq=null,this.replyOriginMessage=null)},saveReplyTarget(){null!=this.selectedReplyKey&&null!=this.selectedReplySeq?(this.replyOriginMessage.replyToKey=this.selectedReplyKey,this.replyOriginMessage.replyToSeq=this.selectedReplySeq,this.replyMode=!1,this.selectedReplySeq=null,this.selectedReplyKey=null):alert("연결할 메세지를 선택해주세요")},scrollToMessage(e){if(void 0==e.replyToKey||null==e.replyToKey||void 0==e.replyToSeq||null==e.replyToSeq)return;const s=`message-${e.replyToKey}_${e.replyToSeq}`,a=document.getElementById(s);a&&(a.scrollIntoView({behavior:"smooth",block:"start"}),a.classList.add("shake"),setTimeout((()=>{a.classList.remove("shake")}),500))},updateReplySeq(e,s){this.selectedReplyKey=e,this.selectedReplySeq=s},selectImageKey(e,s){this.imageAddKey=e,this.imageAddSeq=s},openPreview(e){this.previewImage=e,this.isPreviewOpen=!0},closePreview(){this.isPreviewOpen=!1,this.previewImage=null},handleImageMapUpdate(e){this.imageMap=e},messageUpdate(e){this.messageResponse=e},messageResponseTempRemove(e){var s=new Map,a=null,t=1;for(let[i,n]of Object.entries(e))if(1!=i){if(n.sendUser==a){var o=s[t-1].message.reduce(((e,s)=>s.seq>e?s.seq:e),0);n.message.forEach((e=>s[t-1].message.push({seq:++o,message:e.message,imageKey:e.imageKey,imageUri:e.imageUri,isReply:e.isReply,replyMessage:e.replyMessage,replyTo:e.replyTo})))}else s[t++]=n;a=n.sendUser}else a=n.sendUser,s[t++]=n;this.messageResponse=JSON.parse(JSON.stringify(s))},moveSendUserUp(e){if(1==e)return;const s=Number(e)-Number(1),a=JSON.parse(JSON.stringify(this.messageResponse[e])),t=JSON.parse(JSON.stringify(this.messageResponse[s]));this.messageResponse[e]=t,this.messageResponse[s]=a,this.messageResponseTempRemove(this.messageResponse)},moveSendUserDown(e){const s=Math.max(...Object.keys(this.messageResponse).map(Number));if(e==s)return;const a=Number(e)+Number(1),t=JSON.parse(JSON.stringify(this.messageResponse[a])),o=JSON.parse(JSON.stringify(this.messageResponse[e]));this.messageResponse[e]=t,this.messageResponse[a]=o,this.messageResponseTempRemove(this.messageResponse)},removeSendUser(e){delete this.messageResponse[e],this.messageResponseTempRemove(this.messageResponse)},moveRight(e){this.messageResponse[e]={...this.messageResponse[e],sendUser:null,myMessage:!0},this.messageResponseTempRemove(this.messageResponse)},editNickName(e){this.nickNameEdit[e]=!0},editNickNameComplate(e,s){this.nickNameEdit[e]=!1,this.messageResponse[e].sendUser=s,null!=this.userNameMap[s]&&(this.messageResponse[e].sendUserSeq=this.userNameMap[s])}}};const nn=(0,y.A)(on,[["render",Ji]]);var ln=nn;const rn={class:"b-container"},cn={class:"title",id:"jamye-create1"},dn={class:"form-group"},un={class:"post-container"};function pn(e,s,a,i,n,l){const c=(0,o.g2)("image-box");return(0,o.uX)(),(0,o.CE)("div",rn,[(0,o.Lk)("h1",cn,(0,r.v_)(n.groupName)+"가챠 잼얘 넣기 - 게시글 타입",1),(0,o.Lk)("div",dn,[(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control",name:"post-title",id:"post-title","onUpdate:modelValue":s[0]||(s[0]=s=>e.postTitle=s),placeholder:"게시글 제목"},null,512),[[t.Jo,e.postTitle]])]),s[3]||(s[3]=(0,o.Lk)("button",{type:"button",class:"btn btn-dark mb-3 btn-imgbox","data-bs-toggle":"modal","data-bs-target":"#imageModal"},"이미지 보관함",-1)),(0,o.bF)(c,{type:"POST",cursorPosition:this.cursorPosition,imageUidMap:this.imageMap,onImageMap:l.handleImageMapUpdate,onAddImageAtCursor:l.addImageAtCursor},null,8,["cursorPosition","imageUidMap","onImageMap","onAddImageAtCursor"]),(0,o.Lk)("div",un,[(0,o.Lk)("div",{id:"content",class:"post-input",contenteditable:"true",ref:"postArea",onInput:s[1]||(s[1]=(...e)=>l.syncPostContent&&l.syncPostContent(...e)),placeholder:"게시글 내용을 입력하세요..."},null,544)]),(0,o.Lk)("button",{class:"btn btn-dark btn-block",onClick:s[2]||(s[2]=e=>l.createPost())},"생성")])}var gn={components:{ImageBox:tn},data(){return{groupName:null,isPreviewOpen:!1,previewImage:null,imageMap:{},cursorPosition:null,postContent:String}},props:{seq:Number,isLogin:{type:Boolean,required:!0}},created(){var e=this.$cookies.get("group");this.isLogin?null==e?(alert("게시글을 작성할 그룹을 먼저 선택해주세요"),this.$router.push("/")):this.groupName=e.name:(alert("로그인 후 게시글 작성이 가능합니다."),this.$router.push("/login"))},methods:{syncPostContent(){this.postContent=this.$refs.postArea.innerHTML;const e=window.getSelection();e.rangeCount>0&&(this.cursorPosition=e.getRangeAt(0))},addImageAtCursor(e){e.forEach((e=>{const s=this.imageMap[e],a=`<br><img src="${s}" alt="image" width="200" height="auto"/>`;document.execCommand("insertHTML",!1,a)})),this.postContent=this.$refs.postArea.innerHTML,this.moveCursorToEnd()},moveCursorToEnd(){const e=this.$refs.postArea,s=window.getSelection(),a=document.createRange();a.selectNodeContents(e),a.collapse(!1),s.removeAllRanges(),s.addRange(a),e.focus()},createPost(){if(null==this.postTitle){alert("게시글 제목을 입력해주세요");const e=document.getElementById("post-title");return void(e&&e.scrollIntoView({behavior:"smooth",block:"start"}))}const e=new FormData;Object.entries(this.imageMap).forEach((([s,a])=>{a instanceof File?e.append(s,a):e.append(s,os(a))}));var s=this.postContent.replace(/<img([^>]+)src="([^"]+)"([^>]*)>/g,((e,s,a,t)=>{const o=Object.keys(this.imageMap).find((e=>this.imageMap[e]===a));return o?`<img${s}src="${o}"${t}>`:e}));const a=this.$cookies.get("group").groupSequence,t={title:this.postTitle,groupSeq:a,content:{content:s}};e.append("data",JSON.stringify(t)),pc.post("/api/post/board",e,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.$router.push("/jamye/board"+e.data.data)}))},handleImageMapUpdate(e){this.imageMap=e}}};const mn=(0,y.A)(gn,[["render",pn]]);var kn=mn;const hn={class:"b-container"},bn={class:"title",id:"jamye-create1"},vn={key:0,class:"jamye-info-box-container"},fn=["onClick"],yn={class:"jamye-header"},Cn={class:"jamye-type"},Ln={class:"jamye-title"},wn={key:0,class:"isViewable"},In={class:"jamye-detail"},Sn={key:1};function Nn(e,s,a,t,i,n){return(0,o.uX)(),(0,o.CE)("div",hn,[(0,o.Lk)("h1",bn,(0,r.v_)(e.groupName)+" 가챠 잼얘 목록",1),0!=i.jamyes.length?((0,o.uX)(),(0,o.CE)("div",vn,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.jamyes,(e=>((0,o.uX)(),(0,o.CE)("div",{class:(0,r.C4)(["jamye-info-box",{selectable:e.isViewable}]),key:e.postSequenc,onClick:s=>n.movePost(e.postType,e.postSequence,e.isViewable)},[(0,o.Lk)("div",yn,[(0,o.Lk)("div",Cn,(0,r.v_)(e.postTypeName),1),(0,o.Lk)("div",Ln,(0,r.v_)(e.title),1),e.isViewable?((0,o.uX)(),(0,o.CE)("div",wn,(0,r.v_)(e.isViewableName),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",In,[(0,o.Lk)("div",null,"작성자: "+(0,r.v_)(e.createdUserNickName),1),(0,o.Lk)("div",null,"생성일: "+(0,r.v_)(e.createDate),1),(0,o.Lk)("div",null,"수정일: "+(0,r.v_)(e.updateDate),1)])],10,fn)))),128))])):((0,o.uX)(),(0,o.CE)("div",Sn," 등록된 잼얘가 없습니다. "))])}var Mn={data(){return{jamyes:{}}},props:{isLogin:{type:Boolean,required:!0}},created(){var e=this.$cookies.get("group");if(this.isLogin){if(null==e)return alert("잼얘를 조회할 그룹을 먼저 선택해주세요"),void this.$router.push("/");this.groupName=e.name}else alert("로그인 후 조회 가능합니다."),this.$router.push("/login");pc.get("/api/post/"+e.groupSequence,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{const s=e.data.data,a=e=>{const s=new Date(e);return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")} ${String(s.getHours()).padStart(2,"0")}:${String(s.getMinutes()).padStart(2,"0")}`};s.forEach((e=>{e.createDate&&(e.createDate=a(e.createDate)),e.updateDate&&(e.updateDate=a(e.updateDate)),"MSG"==e.postType?e.postTypeName="메세지":e.postTypeName="포스트",e.isViewable&&(e.isViewableName="보유")})),this.jamyes=s}))},methods:{movePost(e,s,a){a&&("MSG"==e?this.$router.push("/jamye/message"+s):"BOR"==e&&this.$router.push("/jamye/board"+s))}}};const En=(0,y.A)(Mn,[["render",Nn]]);var qn=En;const Un={class:"b-container"},Rn={class:"title"},Xn={class:"create-user"},Pn={key:0,class:"editModeOpen"},Tn={key:1},An=["innerHTML"],xn={key:3,class:"post-container"};function On(e,s,a,t,i,n){const l=(0,o.g2)("image-box");return(0,o.uX)(),(0,o.CE)("div",Un,[(0,o.Lk)("h1",Rn,(0,r.v_)(i.board.title),1),(0,o.Lk)("div",Xn,"작성자: "+(0,r.v_)(i.board.createdUserNickName),1),i.isEditing||i.board.createdUserSequence!=e.$cookies.get("sequence")?i.isEditing&&i.board.createdUserSequence==e.$cookies.get("sequence")?((0,o.uX)(),(0,o.CE)("div",Tn,[s[3]||(s[3]=(0,o.Lk)("button",{type:"button",class:"btn btn-dark btn-imgbox","data-bs-toggle":"modal","data-bs-target":"#imageModal"},"이미지 보관함",-1)),(0,o.bF)(l,{type:"POST",cursorPosition:this.cursorPosition,imageUidMap:this.imageMap,onImageMap:n.handleImageMapUpdate,onAddImageAtCursor:n.addImageAtCursor},null,8,["cursorPosition","imageUidMap","onImageMap","onAddImageAtCursor"]),(0,o.Lk)("button",{onClick:s[1]||(s[1]=(...e)=>n.editModeComplate&&n.editModeComplate(...e)),class:"btn btn-dark"},"수정완료")])):(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Pn,[(0,o.Lk)("button",{onClick:s[0]||(s[0]=(...e)=>n.editMode&&n.editMode(...e)),class:"btn btn-dark"},"수정하기")])),i.isEditing?((0,o.uX)(),(0,o.CE)("div",xn,[(0,o.Lk)("div",{id:"content",class:"post-input",contenteditable:"true",ref:"postArea",onInput:s[2]||(s[2]=(...e)=>n.syncPostContent&&n.syncPostContent(...e)),placeholder:"게시글 내용을 입력하세요..."},null,544)])):((0,o.uX)(),(0,o.CE)("div",{key:2,innerHTML:i.content,class:"post-container-view"},null,8,An))])}a(5130),a(5636),a(8509),a(7332),a(6555),a(3296),a(4594);var Gn={components:{ImageBox:tn},data(){return{board:{},isEditing:null,previewImage:null,isPreviewOpen:!1,imageMap:{},imageAddKey:null,imageAddSeq:null,nickNameMap:{},deleteSeqs:new Set,userInGroup:{},selectedUser:null,content:"",cursorPosition:null,postContent:String}},props:{postSeq:Number,isLogin:{type:Boolean,required:!0}},created(){var e=this.$cookies.get("group");this.isLogin?null==e?(alert("메세지를 작성할 그룹을 먼저 선택해주세요"),this.$router.push("/")):pc.get(`/api/post/${e.groupSequence}/${this.postSeq}`,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.board=e.data.data,this.content=e.data.data.content.content,this.postContent=this.content})):(alert("로그인 후 게시글 작성이 가능합니다."),this.$router.push("/login"))},methods:{editMode(){this.isEditing=!0,this.$nextTick((()=>{this.$refs.postArea.innerHTML=this.content}))},editModeComplate(){this.isEditing=!1;const e=new FormData;Object.entries(this.imageMap).forEach((([s,a])=>{a instanceof File?e.append(s,a):e.append(s,os(a))}));var s=this.postContent.replace(/<img([^>]+)src="([^"]+)"([^>]*)>/g,((e,s,a,t)=>{const o=Object.keys(this.imageMap).find((e=>this.imageMap[e]===a));return o?`<img${s}src="${o}"${t}>`:e}));const a=this.$cookies.get("group").groupSequence,t={content:s};e.append("data",JSON.stringify(t)),pc.post(`/api/post/board/${a}/${this.postSeq}`,e,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.content=e.data.data}))},openPreview(e){this.previewImage=e,this.isPreviewOpen=!0},closePreview(){this.isPreviewOpen=!1,this.previewImage=null},selectImageKey(e,s){this.imageAddKey=e,this.imageAddSeq=s},syncPostContent(){this.postContent=this.$refs.postArea.innerHTML;const e=window.getSelection();e.rangeCount>0&&(this.cursorPosition=e.getRangeAt(0))},handleImageMapUpdate(e){this.imageMap=e},addImageAtCursor(e){e.forEach((e=>{const s=this.imageMap[e],a=`<br><img src="${s}" alt="image" width="200" height="auto"/>`;document.execCommand("insertHTML",!1,a)})),this.postContent=this.$refs.postArea.innerHTML,this.moveCursorToEnd()},moveCursorToEnd(){const e=this.$refs.postArea,s=window.getSelection(),a=document.createRange();a.selectNodeContents(e),a.collapse(!1),s.removeAllRanges(),s.addRange(a),e.focus()}}};const Jn=(0,y.A)(Gn,[["render",On]]);var Dn=Jn;const Kn={class:"b-container"},$n={class:"title"},Bn={class:"create-user"},Vn={key:0,class:"editModeOpen"},Fn={key:1,class:"editMode"},Qn={class:"modal fade",id:"nickNameMapping",tabindex:"-1","aria-labelledby":"nickNameMapping","aria-hidden":"true"},jn={class:"modal-dialog modal-dialog-centered"},Hn={class:"modal-content"},zn={class:"modal-body"},Wn={key:0},Zn={key:0,class:"btn btn-dark btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Yn={key:1,class:"btn btn-dark btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},_n={class:"dropdown-menu",style:{"max-height":"200px","overflow-y":"auto"}},el=["onClick"],sl=["onClick"],al={key:0,class:"nickNameAdd"},tl={class:"btn btn-dark btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},ol={class:"dropdown-menu",style:{"max-height":"200px","overflow-y":"auto"}},il=["onClick"],nl={class:"modal-footer"},ll={class:"card card-body"},rl={class:"chat-room"},cl={key:0,class:"chat-message mt-3"},dl=["onClick","id"],ul={class:"info-container"},pl={key:0,class:"button-container"},gl=["onClick"],ml=["onClick"],kl=["onClick"],hl=["onClick"],bl=["onClick"],vl=["onClick"],fl=["onClick"],yl={class:"send-date"},Cl=["onBlur"],Ll=["onUpdate:modelValue"],wl=["onUpdate:modelValue"],Il=["onUpdate:modelValue"],Sl={class:"image-gallery"},Nl=["src","onClick"],Ml=["src","onClick"],El={key:1,class:"from-me"},ql=["value","onInput"],Ul=["onClick"],Rl={class:"reply-header"},Xl={class:"reply-message"},Pl={class:"image-gallery"},Tl=["src","onClick"],Al=["src","onClick"],xl={key:1,class:"chat-message mt-3"},Ol={class:"info-container"},Gl={key:0},Jl={key:0},Dl={key:0,class:"btn btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Kl={key:1,class:"btn btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},$l={class:"dropdown-menu",style:{"max-height":"200px","overflow-y":"auto"}},Bl=["onClick"],Vl={key:0},Fl={key:1},Ql={key:0},jl={key:0},Hl={class:"send-user"},zl={key:1},Wl={class:"send-user"},Zl={key:2,class:"button-container"},Yl=["onClick"],_l=["onClick"],er=["onClick"],sr=["onClick"],ar=["onClick"],tr=["id","onClick"],or=["onBlur"],ir=["onUpdate:modelValue"],nr=["onUpdate:modelValue"],lr=["onUpdate:modelValue","onBlur"],rr={class:"image-gallery"},cr=["src","onClick"],dr=["src","onClick"],ur={key:1,class:"from-them"},pr={class:"reply-header-them"},gr=["onClick"],mr={class:"reply-message-them"},kr=["value","onInput"],hr={class:"image-gallery"},br=["src","onClick"],vr=["src","onClick"],fr={class:"info-container-them"},yr={class:"send-date"},Cr={key:0,class:"button-container"},Lr=["onClick"],wr=["onClick"],Ir=["onClick"],Sr=["onClick"],Nr=["onClick"],Mr=["onClick"],Er={class:"image-preview-container"},qr=["src"],Ur=["src"];function Rr(e,s,a,i,n,l){const c=(0,o.g2)("image-box");return(0,o.uX)(),(0,o.CE)("div",Kn,[(0,o.Lk)("h1",$n,(0,r.v_)(n.message.title),1),(0,o.Lk)("div",Bn,"작성자: "+(0,r.v_)(n.message.createdUserNickName),1),null==n.isEditing&&n.message.createdUserSequence==e.$cookies.get("sequence")?((0,o.uX)(),(0,o.CE)("div",Vn,[(0,o.Lk)("button",{onClick:s[0]||(s[0]=(...e)=>l.editMode&&l.editMode(...e)),class:"btn btn-dark"},"수정하기")])):(0,o.Q3)("",!0),null!=n.isEditing&&n.message.createdUserSequence==e.$cookies.get("sequence")?((0,o.uX)(),(0,o.CE)("div",Fn,[s[12]||(s[12]=(0,o.Lk)("button",{type:"button",class:"btn btn-dark","data-bs-toggle":"modal","data-bs-target":"#imageModal"},"이미지 보관함",-1)),(0,o.bF)(c,{type:"MSG",imageKey:this.imageAddKey,imageSeq:this.imageAddSeq,message:this.messageResponse,imageUidMap:this.imageMap,onImageMap:e.handleImageMapUpdate,onMessageImage:e.messageUpdate},null,8,["imageKey","imageSeq","message","imageUidMap","onImageMap","onMessageImage"]),(0,o.Lk)("button",{class:"btn btn-dark","data-bs-toggle":"modal","data-bs-target":"#nickNameMapping",onClick:s[1]||(s[1]=e=>l.groupNickNameInfo())},"닉네임"),(0,o.Lk)("div",Qn,[(0,o.Lk)("div",jn,[(0,o.Lk)("div",Hn,[s[11]||(s[11]=(0,o.Lk)("div",{class:"modal-header"},[(0,o.Lk)("h1",{class:"modal-title fs-5",id:"nickNameMapping"},"닉네임"),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,o.Lk)("div",zn,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(Object.entries(this.nickNameMap),(([e,s])=>((0,o.uX)(),(0,o.CE)("div",{key:e},[null!=s&&null!=s.nickName?((0,o.uX)(),(0,o.CE)("div",Wn,[(0,o.eW)((0,r.v_)(s.nickName)+" : ",1),null==s.userSeqInGroup?((0,o.uX)(),(0,o.CE)("button",Zn," 해당 회원과 매핑할 그룹 내 유저가 있다면 선택해주세요 ")):((0,o.uX)(),(0,o.CE)("button",Yn,(0,r.v_)(s.userNameInGroup),1)),(0,o.Lk)("ul",_n,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.userInGroup,(s=>((0,o.uX)(),(0,o.CE)("li",{key:s.groupUserSequence,onClick:a=>l.userInGroupSet(e,s),style:{padding:"8px",cursor:"pointer"}},(0,r.v_)(s.nickname),9,el)))),128))]),(0,o.Lk)("span",{class:"remove-butto",onClick:s=>l.removeNickname(e)},"X",8,sl)])):(0,o.Q3)("",!0)])))),128)),n.nickNameEditMod?((0,o.uX)(),(0,o.CE)("div",al,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>n.nicknameInput=e),placeholder:"닉네임 입력"},null,512),[[t.Jo,n.nicknameInput]]),(0,o.Lk)("button",tl,(0,r.v_)(n.selectedUser?.nickname||"사용자 선택"),1),(0,o.Lk)("ul",ol,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.userInGroup,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e.groupUserSequence,onClick:s=>n.selectedUser=e,style:{padding:"8px",cursor:"pointer"}},(0,r.v_)(e.nickname),9,il)))),128))]),(0,o.Lk)("button",{class:"btn btn-dark btn-sm",onClick:s[3]||(s[3]=(...e)=>l.nickNameAddComplate&&l.nickNameAddComplate(...e))}," 저장 ")])):(0,o.Q3)("",!0),(0,o.Lk)("button",{class:"btn btn-dark",onClick:s[4]||(s[4]=(...e)=>l.nickNameAdd&&l.nickNameAdd(...e))},s[9]||(s[9]=[(0,o.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-plus-square",viewBox:"0 0 16 16"},[(0,o.Lk)("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"}),(0,o.Lk)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"})],-1),(0,o.eW)(" 닉네임 추가 ")]))]),(0,o.Lk)("div",nl,[(0,o.Lk)("button",{type:"button",class:"btn btn-dark",onClick:s[5]||(s[5]=(...e)=>l.updateNickNameInfo&&l.updateNickNameInfo(...e))},"반영하기"),s[10]||(s[10]=(0,o.Lk)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal","aria-label":"Close"},"닫기",-1))])])])]),n.replyMode?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-dark",onClick:s[6]||(s[6]=(...e)=>l.saveReplyTarget&&l.saveReplyTarget(...e))}," 답장 수정완료 ")):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:s[7]||(s[7]=(...e)=>l.editModeClose&&l.editModeClose(...e)),class:"btn btn-dark"},"수정완료")])):(0,o.Q3)("",!0),(0,o.Lk)("div",ll,[(0,o.Lk)("div",rl,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(Object.entries(this.messageResponse),(([e,a])=>((0,o.uX)(),(0,o.CE)("div",{key:e},[a.myMessage?((0,o.uX)(),(0,o.CE)("div",cl,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.message,(i=>((0,o.uX)(),(0,o.CE)("div",{key:i.seq,class:"message-container-me",onClick:e=>l.scrollToMessage(i),id:"message-"+(null!=i.messageSeq?i.messageSeq:e+"_"+i.seq)},[(0,o.Lk)("div",ul,[null!=this.isEditing?((0,o.uX)(),(0,o.CE)("div",pl,[(0,o.Lk)("button",{class:"circle-btn add",onClick:s=>l.addEmptyMessage(e,i.seq)},s[13]||(s[13]=[(0,o.Lk)("i",{class:"fas fa-plus"},null,-1)]),8,gl),(0,o.Lk)("button",{class:"circle-btn up-arrow",onClick:s=>l.moveMessageUp(e,i.seq)},s[14]||(s[14]=[(0,o.Lk)("i",{class:"fas fa-arrow-up"},null,-1)]),8,ml),(0,o.Lk)("button",{class:"circle-btn down-arrow",onClick:s=>l.moveMessageDown(e,i.seq)},s[15]||(s[15]=[(0,o.Lk)("i",{class:"fas fa-arrow-down"},null,-1)]),8,kl),(0,o.Lk)("button",{class:"circle-btn edit",onClick:s=>l.editMessage(e,i.seq)},s[16]||(s[16]=[(0,o.Lk)("i",{class:"fas fa-pencil-alt"},null,-1)]),8,hl),(0,o.Lk)("button",{class:"circle-btn delete",onClick:s=>l.removeMessageSeq(e,i.seq,i.messageSeq)},s[17]||(s[17]=[(0,o.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,bl),(0,o.Lk)("button",{class:"circle-btn camera","data-bs-toggle":"modal","data-bs-target":"#imageModal",onClick:s=>l.selectImageKey(e,i.seq)},s[18]||(s[18]=[(0,o.Lk)("i",{class:"fas fa-camera"},null,-1)]),8,vl),(0,o.Lk)("button",{class:"circle-btn left",onClick:s=>l.moveLeft(e,i.seq)},s[19]||(s[19]=[(0,o.Lk)("i",{class:"fas fa-arrow-left"},null,-1)]),8,fl)])):(0,o.Q3)("",!0),(0,o.Lk)("span",yl,(0,r.v_)(a.sendDate),1)]),null!=this.isEditing&&this.isEditing[e]&&this.isEditing[e][i.seq]?((0,o.uX)(),(0,o.CE)("p",{key:0,class:"from-me",onBlur:s=>l.saveMessage(e)},[i.isReply?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.bo)((0,o.Lk)("input",{class:"reply-header","onUpdate:modelValue":e=>i.replyTo=e},null,8,Ll),[[t.Jo,i.replyTo]]),s[20]||(s[20]=(0,o.Lk)("br",null,null,-1)),(0,o.bo)((0,o.Lk)("input",{class:"reply-message","onUpdate:modelValue":e=>i.replyMessage=e},null,8,wl),[[t.Jo,i.replyMessage]]),s[21]||(s[21]=(0,o.Lk)("hr",null,null,-1))],64)):(0,o.Q3)("",!0),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>i.message=e,class:"from-me"},null,8,Il),[[t.Jo,i.message]]),(0,o.Lk)("span",Sl,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.imageUri,((e,s)=>((0,o.uX)(),(0,o.CE)("img",{key:s,src:l.imageUrl(e.second),class:"small-image",onClick:s=>l.openPreview(e.second),alt:"Uploaded Image"},null,8,Nl)))),128)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.imageKey,((e,s)=>((0,o.uX)(),(0,o.CE)("img",{key:s,src:this.imageMap[e],class:"small-image",onClick:s=>l.openPreview(e),alt:"Uploaded Image"},null,8,Ml)))),128))])],40,Cl)):((0,o.uX)(),(0,o.CE)("p",El,[n.replyMode?((0,o.uX)(),(0,o.CE)("input",{key:0,type:"radio",name:"replySelect",value:e||",",onInput:s=>l.updateReplySeq(i.messageSeq,e,i.seq),class:"form-check-input mt-1"},null,40,ql)):(0,o.Q3)("",!0),i.isReply?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[null!=this.isEditing?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-sm btn-link me-2",onClick:e=>l.toggleReplyMode(i),title:"답장 연결"}," 🔗 ",8,Ul)):(0,o.Q3)("",!0),(0,o.Lk)("span",Rl,(0,r.v_)(i.replyTo),1),s[22]||(s[22]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("span",Xl,(0,r.v_)(i.replyMessage),1),s[23]||(s[23]=(0,o.Lk)("hr",null,null,-1))],64)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,r.v_)(i.message)+" ",1),(0,o.Lk)("span",Pl,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.imageUri,((e,s)=>((0,o.uX)(),(0,o.CE)("img",{key:s,src:l.imageUrl(e.second),class:"small-image",onClick:s=>l.openPreview(e.second),alt:"Uploaded Image"},null,8,Tl)))),128)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.imageKey,((e,s)=>((0,o.uX)(),(0,o.CE)("img",{key:s,src:this.imageMap[e],class:"small-image",onClick:s=>l.openPreview(e),alt:"Uploaded Image"},null,8,Al)))),128))])]))],8,dl)))),128))])):((0,o.uX)(),(0,o.CE)("div",xl,[(0,o.Lk)("div",Ol,[n.nickNameEdit[e]?((0,o.uX)(),(0,o.CE)("div",Gl,[null!=this.nickNameMap[a.sendUserSeq]?((0,o.uX)(),(0,o.CE)("div",Jl,[null!=this.nickNameMap[a.sendUserSeq].userNameInGroup?((0,o.uX)(),(0,o.CE)("button",Dl,(0,r.v_)(this.nickNameMap[a.sendUserSeq].userNameInGroup),1)):((0,o.uX)(),(0,o.CE)("button",Kl,(0,r.v_)(this.nickNameMap[a.sendUserSeq].nickName),1)),(0,o.Lk)("ul",$l,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(Object.entries(n.nickNameMap),(([s,a])=>((0,o.uX)(),(0,o.CE)("li",{key:s,onClick:t=>l.editNickNameComplate(e,s,a),style:{padding:"8px",cursor:"pointer"}},[(0,o.eW)((0,r.v_)(a.nickName)+" ",1),a.userNameInGroup?((0,o.uX)(),(0,o.CE)("span",Vl,"| "+(0,r.v_)(a.userNameInGroup),1)):(0,o.Q3)("",!0)],8,Bl)))),128))])])):(0,o.Q3)("",!0)])):((0,o.uX)(),(0,o.CE)("div",Fl,[null!=this.nickNameMap[a.sendUserSeq]?((0,o.uX)(),(0,o.CE)("div",Ql,[null!=this.nickNameMap[a.sendUserSeq].userNameInGroup?((0,o.uX)(),(0,o.CE)("div",jl,[(0,o.Lk)("div",Hl,(0,r.v_)(this.nickNameMap[a.sendUserSeq].userNameInGroup),1)])):((0,o.uX)(),(0,o.CE)("div",zl,[(0,o.Lk)("div",Wl,(0,r.v_)(this.nickNameMap[a.sendUserSeq].nickName),1)]))])):(0,o.Q3)("",!0)])),null!=this.isEditing?((0,o.uX)(),(0,o.CE)("div",Zl,[(0,o.Lk)("button",{class:"circle-btn up-arrow",onClick:s=>l.moveSendUserUp(e)},s[24]||(s[24]=[(0,o.Lk)("i",{class:"fas fa-arrow-up"},null,-1)]),8,Yl),(0,o.Lk)("button",{class:"circle-btn down-arrow",onClick:s=>l.moveSendUserDown(e)},s[25]||(s[25]=[(0,o.Lk)("i",{class:"fas fa-arrow-down"},null,-1)]),8,_l),(0,o.Lk)("button",{class:"circle-btn edit",onClick:s=>l.editNickName(e)},s[26]||(s[26]=[(0,o.Lk)("i",{class:"fas fa-pencil-alt"},null,-1)]),8,er),(0,o.Lk)("button",{class:"circle-btn delete",onClick:s=>l.removeSendUser(e)},s[27]||(s[27]=[(0,o.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,sr),(0,o.Lk)("button",{class:"circle-btn right",onClick:s=>l.moveRight(e)},s[28]||(s[28]=[(0,o.Lk)("i",{class:"fas fa-arrow-right"},null,-1)]),8,ar)])):(0,o.Q3)("",!0)]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.message,(i=>((0,o.uX)(),(0,o.CE)("div",{key:i.seq,class:"message-container",id:"message-"+(null!=i.messageSeq?i.messageSeq:e+"_"+i.seq),onClick:e=>l.scrollToMessage(i)},[null!=this.isEditing&&this.isEditing[e]&&this.isEditing[e][i.seq]?((0,o.uX)(),(0,o.CE)("p",{key:0,class:"from-them",onBlur:s=>l.saveMessage(e,i)},[i.isReply?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.bo)((0,o.Lk)("input",{class:"reply-header-them","onUpdate:modelValue":e=>i.replyTo=e},null,8,ir),[[t.Jo,i.replyTo]]),s[29]||(s[29]=(0,o.Lk)("br",null,null,-1)),(0,o.bo)((0,o.Lk)("input",{class:"reply-message-them","onUpdate:modelValue":e=>i.replyMessage=e},null,8,nr),[[t.Jo,i.replyMessage]]),s[30]||(s[30]=(0,o.Lk)("hr",null,null,-1))],64)):(0,o.Q3)("",!0),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>i.message=e,onBlur:s=>l.saveMessage(e,i),class:"from-them"},null,40,lr),[[t.Jo,i.message]]),(0,o.Lk)("span",rr,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.imageKey,((e,s)=>((0,o.uX)(),(0,o.CE)("img",{key:s,src:l.imageUrl(e),class:"small-image",onClick:s=>l.openPreview(e),alt:"Uploaded Image"},null,8,cr)))),128)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.imageKey,((e,s)=>((0,o.uX)(),(0,o.CE)("img",{key:s,src:this.imageMap[e],class:"small-image",onClick:s=>l.openPreview(e),alt:"Uploaded Image"},null,8,dr)))),128))])],40,or)):((0,o.uX)(),(0,o.CE)("p",ur,[i.isReply?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.Lk)("span",pr,(0,r.v_)(i.replyTo),1),null!=this.isEditing?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-sm btn-link me-2",onClick:e=>l.toggleReplyMode(i),title:"답장 연결"}," 🔗 ",8,gr)):(0,o.Q3)("",!0),s[31]||(s[31]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("span",mr,(0,r.v_)(i.replyMessage),1),s[32]||(s[32]=(0,o.Lk)("hr",null,null,-1))],64)):(0,o.Q3)("",!0),n.replyMode?((0,o.uX)(),(0,o.CE)("input",{key:1,type:"radio",name:"replySelect",value:e||",",onInput:s=>l.updateReplySeq(i.messageSeq,e,i.seq),class:"form-check-input mt-1"},null,40,kr)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,r.v_)(i.message)+" ",1),(0,o.Lk)("span",hr,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.imageKey,((e,s)=>((0,o.uX)(),(0,o.CE)("img",{key:s,src:l.imageUrl(e),class:"small-image",onClick:s=>l.openPreview(e),alt:"Uploaded Image"},null,8,br)))),128)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.imageKey,((e,s)=>((0,o.uX)(),(0,o.CE)("img",{key:s,src:this.imageMap[e],class:"small-image",onClick:s=>l.openPreview(e),alt:"Uploaded Image"},null,8,vr)))),128))])])),(0,o.Lk)("div",fr,[(0,o.Lk)("span",yr,(0,r.v_)(a.sendDate),1),null!=this.isEditing?((0,o.uX)(),(0,o.CE)("div",Cr,[(0,o.Lk)("button",{class:"circle-btn add",onClick:s=>l.addEmptyMessage(e,i.seq)},s[33]||(s[33]=[(0,o.Lk)("i",{class:"fas fa-plus"},null,-1)]),8,Lr),(0,o.Lk)("button",{class:"circle-btn up-arrow",onClick:s=>l.moveMessageUp(e,i.seq)},s[34]||(s[34]=[(0,o.Lk)("i",{class:"fas fa-arrow-up"},null,-1)]),8,wr),(0,o.Lk)("button",{class:"circle-btn down-arrow",onClick:s=>l.moveMessageDown(e,i.seq)},s[35]||(s[35]=[(0,o.Lk)("i",{class:"fas fa-arrow-down"},null,-1)]),8,Ir),(0,o.Lk)("button",{class:"circle-btn edit",onClick:s=>l.editMessage(e,i.seq)},s[36]||(s[36]=[(0,o.Lk)("i",{class:"fas fa-pencil-alt"},null,-1)]),8,Sr),(0,o.Lk)("button",{class:"circle-btn delete",onClick:s=>l.removeMessageSeq(e,i.seq,i.messageSeq)},s[37]||(s[37]=[(0,o.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,Nr),(0,o.Lk)("button",{class:"circle-btn camera","data-bs-toggle":"modal","data-bs-target":"#imageModal",onClick:s=>l.selectImageKey(e,i.seq)},s[38]||(s[38]=[(0,o.Lk)("i",{class:"fas fa-camera"},null,-1)]),8,Mr)])):(0,o.Q3)("",!0)])],8,tr)))),128))]))])))),128))])]),n.isPreviewOpen?((0,o.uX)(),(0,o.CE)("div",{key:2,class:"image-preview-overlay",onClick:s[8]||(s[8]=(...e)=>l.closePreview&&l.closePreview(...e))},[(0,o.Lk)("div",Er,[n.imageMap[n.previewImage]?((0,o.uX)(),(0,o.CE)("img",{key:0,src:this.imageMap[n.previewImage],alt:"Preview Image",class:"large-image"},null,8,qr)):((0,o.uX)(),(0,o.CE)("img",{key:1,src:l.imageUrl(n.previewImage),alt:"Preview Image",class:"large-image"},null,8,Ur))])])):(0,o.Q3)("",!0)])}var Xr={components:{ImageBox:tn},data(){return{message:{},messageResponse:{},isEditing:null,previewImage:null,isPreviewOpen:!1,imageMap:{},imageAddKey:null,imageAddSeq:null,nickNameMap:{},deleteSeqs:new Set,userInGroup:{},nickNameEditMod:!1,nicknameInput:"",selectedUser:null,deleteNickNames:new Set,replyMode:!1,selectedReplyMessageSeq:null,selectedReplyKey:null,selectedReplySeq:null,nickNameEdit:{}}},props:{postSeq:Number,isLogin:{type:Boolean,required:!0}},created(){var e=this.$cookies.get("group");this.isLogin?null==e?(alert("메세지를 작성할 그룹을 먼저 선택해주세요"),this.$router.push("/")):pc.get(`/api/post/${e.groupSequence}/${this.postSeq}`,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.message=e.data.data,this.messageResponse=e.data.data.content.message,this.nickNameMap=e.data.data.content.nickName})):(alert("로그인 후 게시글 작성이 가능합니다."),this.$router.push("/login"))},methods:{imageUrl:is,editMode(){this.isEditing={}},editModeClose(){const e=new FormData;Object.entries(this.imageMap).forEach((([s,a])=>{a instanceof File?e.append(s,a):e.append(s,os(a))}));const s=this.$cookies.get("group").groupSequence,a={message:this.messageResponse,nickName:this.nickNameMap,deleteMessage:Array.from(this.deleteSeqs)};e.append("data",JSON.stringify(a)),pc.post(`/api/post/message/${s}/${this.postSeq}`,e,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}),this.isEditing=null},editMessage(e,s){this.isEditing[e]||(this.isEditing[e]={}),this.isEditing[e][s]?this.isEditing[e][s]=!1:this.isEditing[e][s]=!0},saveMessage(e){this.isEditing[e]=!1},removeMessageSeq(e,s,a){null!=a&&this.deleteSeqs.add(a),this.messageResponse[e]&&Array.isArray(this.messageResponse[e].message)&&(this.messageResponse[e].message=this.messageResponse[e].message.filter((e=>e.seq!==s)),this.messageResponse[e].message.forEach((e=>{e.seq>s&&(e.seq=e.seq-1)})),this.isEditing[e]||(this.isEditing[e]={}),this.isEditing[e][s]=!1);var t=1,o=new Map;for(let[i,n]of Object.entries(this.messageResponse))0!=n.message.length&&(console.log(i),o[t++]=n);this.messageResponse=o},addEmptyMessage(e,s){if(this.messageResponse[e]&&Array.isArray(this.messageResponse[e].message)){this.messageResponse[e].message.forEach((e=>{e.seq>s&&(e.seq=e.seq+1)}));for(let[s,a]of Object.entries(this.messageResponse))s>e&&a.message.forEach((e=>{e.seq=e.seq+1}));this.messageResponse[e].message.push({seq:s+1,message:"."}),this.messageResponse[e].message.sort(((e,s)=>e.seq-s.seq)),this.isEditing[s+1]&&this.editMessage(e,s+1+1),this.editMessage(e,s+1)}},moveMessageUp(e,s){const a=this.messageResponse[e].message.reduce(((e,s)=>s.seq<e?s.seq:e),1/0);if(1==e&&s==a)return;const t=this.messageResponse[e].message;if(s===a){var o=this.messageResponse[e],i=JSON.parse(JSON.stringify(o.message.filter((e=>e.seq==a))));console.log("why:"+JSON.stringify(i)),o.message=o.message.filter((e=>e.seq!=s));var n=1;0!=o.message.length&&o.message.forEach((e=>{e.seq=n++}));var l=JSON.parse(JSON.stringify(o)),r=JSON.parse(JSON.stringify(this.messageResponse[e-1]));if(r.sendUserSeq==o.sendUserSeq){const s=r.message.reduce(((e,s)=>s.seq>e?s.seq:e),0);var c=r.message.pop(),d=i.pop();console.log(JSON.stringify(i)),r.message.push({seq:s,message:d.message,imageKey:d.imageKey,imageUri:d.imageUri,isReply:d.isReply,replyMessage:d.replyMessage,replyTo:d.replyTo,sendUserSeq:d.sendUserSeq}),r.message.push({seq:s+1,message:c.message,imageKey:c.imageKey,imageUri:c.imageUri,isReply:c.isReply,replyMessage:c.replyMessage,replyTo:c.replyTo,sendUserSeq:c.sendUserSeq}),this.messageResponse[e-1].message=[]}else r.message=[r.message.pop()],l.message=i,l.sendDate=null;const t=r.message.reduce(((e,s)=>s.seq>e?s.seq:e),0);this.messageResponse[e-1].message=this.messageResponse[e-1].message.filter((e=>e.seq!=t));var u=new Map,p=1;for(let[s,a]of Object.entries(this.messageResponse))s==e?(0!=l.message.length&&(u[p++]=l),0!=r.message.length&&(u[p++]=r),0!=a.message.length&&(u[p++]=a)):0!=a.message.length&&(u[p++]=a);var g=new Map,m=null;p=1;for(let[e,s]of Object.entries(u))if(1!=e){if(s.sendUserSeq==m){var k=g[p-1].message.reduce(((e,s)=>s.seq>e?s.seq:e),0);s.message.forEach((e=>g[p-1].message.push({seq:++k,message:e.message,imageKey:e.imageKey,imageUri:e.imageUri,isReply:e.isReply,replyMessage:e.replyMessage,replyTo:e.replyTo})))}else g[p++]=s;m=s.sendUserSeq}else m=s.sendUserSeq,g[p++]=s;this.messageResponse=JSON.parse(JSON.stringify(g))}else{const e=t.findIndex((e=>e.seq===s));e>0&&([t[e-1],t[e]]=[t[e],t[e-1]],t[e-1].seq-=1,t[e].seq+=1)}},moveMessageDown(e,s){const a=Math.max(...Object.keys(this.messageResponse).map(Number)),t=this.messageResponse[a].message.reduce(((e,s)=>s.seq>e?s.seq:e),0);if(e==a&&s==t)return;const o=this.messageResponse[e].message,i=o.reduce(((e,s)=>s.seq>e?s.seq:e),0);if(console.log("editMapMaxSeq:"+i),s===i){var n=JSON.parse(JSON.stringify(this.messageResponse[e]));n.message=[];var l=this.messageResponse[e].message.pop();n.message.push({seq:1,message:l.message,imageKey:l.imageKey,imageUri:l.imageUri,isReply:l.isReply,replyMessage:l.replyMessage,replyTo:l.replyTo,sendUserSeq:l.sendUserSeq});var r=Number(e)+1,c=JSON.parse(JSON.stringify(this.messageResponse[r]));c.message=this.messageResponse[r].message.filter((e=>1==e.seq)),this.messageResponse[r].message=this.messageResponse[r].message.filter((e=>1!=e.seq));var d=1;0!=this.messageResponse[r].message.length&&this.messageResponse[r].message.forEach((e=>{e.seq=d++}));var u=new Map,p=1;for(let[s,a]of Object.entries(this.messageResponse))s==e?(0!=a.message.length&&(u[p++]=a),0!=c.message.length&&(u[p++]=c),0!=n.message.length&&(u[p++]=n)):0!=a.message.length&&(u[p++]=a);var g=new Map,m=null;p=1;for(let[e,s]of Object.entries(u))if(1!=e){if(s.sendUserSeq==m){var k=g[p-1].message.reduce(((e,s)=>s.seq>e?s.seq:e),0);s.message.forEach((e=>g[p-1].message.push({seq:++k,message:e.message,imageKey:e.imageKey,imageUri:e.imageUri,isReply:e.isReply,replyMessage:e.replyMessage,replyTo:e.replyTo})))}else g[p++]=s;m=s.sendUserSeq}else m=s.sendUserSeq,g[p++]=s;this.messageResponse=JSON.parse(JSON.stringify(g))}else{console.log("else");const e=o.findIndex((e=>e.seq===s));e<o.length-1&&([o[e],o[e+1]]=[o[e+1],o[e]],o[e].seq-=1,o[e+1].seq+=1)}},openPreview(e){this.previewImage=e,this.isPreviewOpen=!0},closePreview(){this.isPreviewOpen=!1,this.previewImage=null},selectImageKey(e,s){this.imageAddKey=e,this.imageAddSeq=s},nickNameAdd(){this.nickNameEditMod=!0},nickNameAddComplate(){const e=this.$cookies.get("group").groupSequence;pc.post(`/api/post/message/${e}/${this.postSeq}/nickNameAdd?nickName=${this.nicknameInput}&userSeqInGroup=${this.selectedUser.groupUserSequence}`,{},{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.nickNameMap[e.data.data]={nickName:this.nicknameInput,userSeqInGroup:this.selectedUser.groupUserSequence,userNameInGroup:this.selectedUser.nickname,imageUrl:this.selectedUser.imageUrl},this.nicknameInput=null,this.selectedUser=null})),this.nickNameEditMod=!1},groupNickNameInfo(){pc.get("/api/group/users/"+this.$cookies.get("group").groupSequence,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.userInGroup=e.data.data}))},userInGroupSet(e,s){console.log(s),this.nickNameMap[e]={nickName:this.nickNameMap[e].nickName,userSeqInGroup:s.groupUserSequence,userNameInGroup:s.nickname,imageUri:s.imageUrl}},updateNickNameInfo(){const e=this.$cookies.get("group").groupSequence;var s=new Map;for(let[a,t]of Object.entries(this.nickNameMap))null!=t.nickName&&(s[a]=t);pc.post(`/api/post/message/${e}/${this.postSeq}/nickName`,{updateInfo:s,deleteMessageNickNameSeqs:Array.from(this.deleteNickNames)},{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{console.log(e),this.deleteNickNames=new Set}))},removeNickname(e){this.deleteNickNames.add(e),this.nickNameMap[e]={userNameInGroup:this.nickNameMap[e].nickName}},toggleReplyMode(e){this.replyMode=!this.replyMode,this.replyMode?this.replyOriginMessage=e:(this.selectedReplyKey=null,this.selectedReplySeq=null,this.replyOriginMessage=null)},updateReplySeq(e,s,a){console.log(e),null!=e?(console.log("1"),this.selectedReplyMessageSeq=e):(console.log("2"),this.selectedReplyKey=s,this.selectedReplySeq=a)},saveReplyTarget(){null!=this.selectedReplyMessageSeq||null!=this.selectedReplyKey&&null!=this.selectedReplySeq?(null!=this.selectedReplyMessageSeq?(this.replyOriginMessage.replyMessageSeq=this.selectedReplyMessageSeq,this.selectedReplyMessageSeq=null):(this.replyOriginMessage.replyToKey=this.selectedReplyKey,this.replyOriginMessage.replyToSeq=this.selectedReplySeq,this.replyOriginMessage.replyMessageSeq=null,this.selectedReplyKey=null,this.selectedReplySeq=null),this.replyMode=!1):alert("연결할 메세지를 선택해주세요")},scrollToMessage(e){if(null==e.replyMessageSeq&&(void 0==e.replyToKey||null==e.replyToKey)&&(void 0==e.replyToSeq||null==e.replyToSeq))return void console.log("end");var s="";s=null!=e.replyMessageSeq?`message-${e.replyMessageSeq}`:`message-${e.replyToKey}_${e.replyToSeq}`,console.log(s);const a=document.getElementById(s);a&&(a.scrollIntoView({behavior:"smooth",block:"start"}),a.classList.add("shake"),setTimeout((()=>{a.classList.remove("shake")}),500))},moveSendUserUp(e){if(1==e)return;const s=Number(e)-Number(1),a=JSON.parse(JSON.stringify(this.messageResponse[e])),t=JSON.parse(JSON.stringify(this.messageResponse[s]));this.messageResponse[e]=t,this.messageResponse[s]=a,this.messageResponseTempRemove(this.messageResponse)},moveSendUserDown(e){const s=Math.max(...Object.keys(this.messageResponse).map(Number));if(e==s)return;const a=Number(e)+Number(1),t=JSON.parse(JSON.stringify(this.messageResponse[a])),o=JSON.parse(JSON.stringify(this.messageResponse[e]));this.messageResponse[e]=t,this.messageResponse[a]=o,this.messageResponseTempRemove(this.messageResponse)},removeSendUser(e){delete this.messageResponse[e],this.messageResponseTempRemove(this.messageResponse)},moveRight(e){this.messageResponse[e]={...this.messageResponse[e],sendUser:null,sendUserSeq:null,myMessage:!0},this.messageResponseTempRemove(this.messageResponse)},editNickName(e){console.log("!!"),this.nickNameEdit[e]=!0,console.log("??")},editNickNameComplate(e,s,a){this.nickNameEdit[e]=!1,this.messageResponse[e].sendUser=a.nickName,this.messageResponse[e].sendUserSeq=s},messageResponseTempRemove(e){var s=new Map,a=null,t=1;for(let[i,n]of Object.entries(e))if(1!=i){if(n.sendUserSeq==a){var o=s[t-1].message.reduce(((e,s)=>s.seq>e?s.seq:e),0);n.message.forEach((e=>s[t-1].message.push({...e,seq:++o})))}else s[t++]=n;a=n.sendUserSeq}else a=n.sendUserSeq,s[t++]=n;this.messageResponse=JSON.parse(JSON.stringify(s))},moveLeft(e,s){console.log(`start - key=${e}, seq=${s}`);const a=this.messageResponse[e]?.message||[],t=a.findIndex((e=>e.seq===s));if(-1===t)return void console.error("해당 seq를 가진 메시지가 없습니다.");const[o]=a.splice(t,1);console.log(o);var i=new Map,n=1;for(let[g,m]of Object.entries(this.messageResponse))if(g==e){var l=[],r=1,c=[];0==m.message.length&&(n+=2);for(const e of m.message)e.seq>s?(console.log("downCheck"+e.message),l.push({...e,seq:r++}),console.log("addCheck"+JSON.stringify(l))):(console.log("originCheck"+JSON.stringify(e.message)),c.push(e));0!=c.length&&(i[n++]={...m,message:c},console.log("origin"+JSON.stringify(c))),0!=l.length&&(n+=2,i[n++]={...m,message:l},console.log("down:"+JSON.stringify(l)))}else Number(g)>Number(e)?(console.log(`id=${g}, key=${e}`),console.log("2down"+JSON.stringify(m)),n+=2,i[n++]=m):(console.log("std"+n+JSON.stringify(m)),i[n++]=m);console.log(JSON.stringify(i)),this.messageResponse=i;const d=Number(e)+1;o.seq=1;var u="임시",p=null;if(console.log(this.nickNameMap),null!=this.nickNameMap&&Object.keys(this.nickNameMap).length>0){const e=Object.entries(this.nickNameMap)[0];if(e){const[s,a]=e;p=s,u=a.nickName,console.log("첫 번째 키:",s),console.log("첫 번째 값:",a)}}console.log(d),this.messageResponse[d]={sendUserSeq:p,sendUser:u,message:[]},this.messageResponse[d].message.unshift(o),console.log(o),console.log(this.messageResponse[d].message),this.messageResponseTempRemove(this.messageResponse)}}};const Pr=(0,y.A)(Xr,[["render",Rr]]);var Tr=Pr;const Ar={class:"b-container"},xr={class:"user-info-box"},Or={class:"user-id"},Gr={class:"user-info-box"},Jr={class:"password-check"},Dr={class:"change-password"},Kr={key:0,class:"btn btn-dark",disabled:""};function $r(e,s,a,i,n,l){return(0,o.uX)(),(0,o.CE)("div",Ar,[s[5]||(s[5]=(0,o.Lk)("h2",{class:"title"}," 사용자 정보 수정 ",-1)),s[6]||(s[6]=(0,o.Lk)("br",null,null,-1)),s[7]||(s[7]=(0,o.Lk)("div",{class:"data-title"},"아이디",-1)),(0,o.Lk)("div",xr,[(0,o.Lk)("span",Or,(0,r.v_)(n.userInfo.id),1)]),s[8]||(s[8]=(0,o.Lk)("div",{class:"data-title"},"이메일",-1)),(0,o.Lk)("div",Gr,(0,r.v_)(n.userInfo.email),1),s[9]||(s[9]=(0,o.Lk)("div",{class:"data-title"},"비밀번호 변경",-1)),s[10]||(s[10]=(0,o.Lk)("div",{class:"data-sub-title"},"비밀번호 확인",-1)),(0,o.Lk)("div",Jr,[(0,o.bo)((0,o.Lk)("input",{id:"originPassword",type:"password",class:"form-control",placeholder:" ","onUpdate:modelValue":s[0]||(s[0]=e=>n.originPassword=e)},null,512),[[t.Jo,n.originPassword]]),(0,o.Lk)("button",{class:"btn btn-dark",onClick:s[1]||(s[1]=(...e)=>l.passwordCheck&&l.passwordCheck(...e))},"비밀번호 확인")]),s[11]||(s[11]=(0,o.Lk)("div",{class:"data-sub-title"},"새로운 비밀번호",-1)),(0,o.Lk)("div",Dr,[n.passwordChecked?(0,o.bo)(((0,o.uX)(),(0,o.CE)("input",{key:0,id:"newPassword",type:"password",class:"form-control",placeholder:" ","onUpdate:modelValue":s[2]||(s[2]=e=>n.newPassword=e)},null,512)),[[t.Jo,n.newPassword]]):(0,o.bo)(((0,o.uX)(),(0,o.CE)("input",{key:1,type:"password",id:"password",class:"form-control",placeholder:" ","onUpdate:modelValue":s[3]||(s[3]=e=>n.newPassword=e),disabled:""},null,512)),[[t.Jo,n.newPassword]])]),null==this.newPassword?((0,o.uX)(),(0,o.CE)("button",Kr,"비밀번호 변경")):((0,o.uX)(),(0,o.CE)("button",{key:1,class:"btn btn-dark",onClick:s[4]||(s[4]=(...e)=>l.changePassword&&l.changePassword(...e))},"비밀번호 변경"))])}var Br={data(){return{userInfo:{},originPassword:null,passwordChecked:!1,newPassword:null}},props:{isLogin:{require:!0}},watch:{originPassword(){this.passwordChecked=!1}},created(){if(!this.isLogin)return alert("로그인 후 접속가능한 페이지입니다."),void this.$router.push("/login");pc.get("/api/user",{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.userInfo=e.data.data}))},methods:{passwordCheck(){null!=this.originPassword?pc.post("/api/user/password/check",{password:this.originPassword},{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((()=>{this.passwordChecked=!0})).catch((e=>{alert(e.response.data.message)})):alert("비밀번호를 입력해주세요")},changePassword(){null!=this.newPassword?pc.patch("/api/user",{newPassword:this.newPassword,oldPassword:this.originPassword},{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((()=>{alert("비밀번호 변경 성공"),this.$router.push("/")})).catch((e=>{alert(e.response.data.message)})):alert("변경할 비밀번호를 입력해주세요")}}};const Vr=(0,y.A)(Br,[["render",$r]]);var Fr=Vr;const Qr={class:"b-container"},jr={key:1,class:"btn btn-dark",disabled:""},Hr={key:0,class:"btn btn-dark read-button btn-sm",disabled:""},zr=["onClick"],Wr={class:"message-content"},Zr={class:"message-date"},Yr={class:"action-buttons"},_r=["onClick"],ec=["onClick"];function sc(e,s,a,t,i,n){return(0,o.uX)(),(0,o.CE)("div",Qr,[s[1]||(s[1]=(0,o.Lk)("div",{class:"title"},"쪽지함",-1)),i.isNoRead?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-dark",onClick:s[0]||(s[0]=(...e)=>n.allNotifyRead&&n.allNotifyRead(...e))},"모두 읽기")):((0,o.uX)(),(0,o.CE)("button",jr,"모두 읽기")),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.notifyList,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.notifySeq,class:"message-item"},[e.isRead?((0,o.uX)(),(0,o.CE)("button",Hr,"읽기")):((0,o.uX)(),(0,o.CE)("button",{key:1,class:"btn btn-dark read-button btn-sm",onClick:s=>n.readNotify(e)},"읽기",8,zr)),(0,o.Lk)("div",Wr,(0,r.v_)(e.message),1),(0,o.Lk)("div",Zr,(0,r.v_)(e.createDate),1),(0,o.Lk)("div",Yr,[null!=e.groupSeq?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-dark group-button btn-sm",onClick:s=>n.goToGroup(e.groupSeq)},"그룹 가기",8,_r)):(0,o.Q3)("",!0),null!=e.postSeq?((0,o.uX)(),(0,o.CE)("button",{key:1,class:"btn btn-dark post-button btn-sm",onClick:s=>n.goToPost(e.groupSeq,e.postSeq)},"게시글 가기",8,ec)):(0,o.Q3)("",!0)])])))),128))])}var ac={data(){return{notifyList:[],isNoRead:!1}},created(){this.getNotiftList()},methods:{getNotiftList(){pc.get("/api/user/notify",{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{this.notifyList=e.data.data,console.log("??"),this.notifyList.forEach((e=>{e.isRead||(this.isNoRead=!0)}))}))},readNotify(e){pc.post("/api/user/notify/"+e.notifySeq,{},{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((()=>{e.isRead=!0}))},goToGroup(e){this.$router.push("/group"+e)},goToPost(e,s){pc.get(`/api/post/title/${e}/${s}`,{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((e=>{const s=e.data.data;"MSG"==s.type?this.$router.push("/jamye/message"+s.postSequence):this.$router.push("/jamye/board"+s.postSequence)})),this.$router.push("/post"+s)},allNotifyRead(){console.log("!!"),pc.post("/api/user/notify/read/all",{},{headers:{Authorization:"Bearer "+this.$cookies.get("accessToken")}}).then((()=>{this.isNoRead=!1,this.getNotiftList()}))}}};const tc=(0,y.A)(ac,[["render",sc]]);var oc=tc;const ic=[{path:"/",name:"home",component:W},{path:"/login",name:"login",component:ne},{path:"/my",name:"my",component:us},{path:"/join",name:"join",component:Gs},{path:"/groups",name:"groups",component:_s},{path:"/add",name:"add",component:tt},{path:"/group:seq",name:"groupInfo",component:eo,props:!0},{path:"/create/message:seq",name:"messageCreate",component:ln,props:!0},{path:"/create/post:seq",name:"postCreate",component:kn,props:!0},{path:"/image-box:imageKey&imageSeq",name:"imageBox",component:tn,props:!0},{path:"/jamye-list",name:"jamyeList",component:qn},{path:"/jamye/message:postSeq",name:"messageJamye",component:Tr,props:!0},{path:"/jamye/board:postSeq",name:"boardJamye",component:Dn,props:!0},{path:"/leave-group",name:"leaveGroup",component:De,props:!0},{path:"/edit-profile",name:"editProfile",component:rs,props:!0},{path:"/user-info",name:"userInfoEdit",component:Fr},{path:"/notify-box",name:"notifyBox",component:oc},{path:"/image-preview-open",name:"imagePreviewOpen",component:Zt,props:!0}],nc=(0,I.aE)({history:(0,I.LA)("/"),routes:ic});var lc=nc;let rc=0,cc=null;console.log(ts);const dc=w.A.create({baseURL:ts}),uc=e=>{cc=e};dc.interceptors.request.use((e=>(rc++,cc&&cc(!0),e)),(e=>Promise.reject(e))),dc.interceptors.response.use((e=>(rc--,0===rc&&cc&&cc(!1),e)),(async e=>{if(rc--,console.log(e.response),e.response&&403===e.response.status){const t=document.cookie.match("(^|;) ?refreshToken=([^;]*)(;|$)")[2];try{const a=await dc.post("/api/user/refresh",{refreshToken:t});var s=new Date;return s.setTime(s.getTime()+864e5),document.cookie=encodeURIComponent("accessToken")+"="+encodeURIComponent(a.data.data.accessToken)+";expires="+s.toUTCString()+";path=/",e.config.headers["Authorization"]=`Bearer ${a.data.data.accessToken}`,dc.request(e.config)}catch(a){document.cookie=encodeURIComponent("accessToken")+"=; expires=Thu, 01 JAN 1999 00:00:10 GMT",document.cookie=encodeURIComponent("refreshToken")+"=; expires=Thu, 01 JAN 1999 00:00:10 GMT",document.cookie=encodeURIComponent("id")+"=; expires=Thu, 01 JAN 1999 00:00:10 GMT",document.cookie=encodeURIComponent("sequence")+"=; expires=Thu, 01 JAN 1999 00:00:10 GMT",document.cookie=encodeURIComponent("group")+"=; expires=Thu, 01 JAN 1999 00:00:10 GMT",lc.push("/login")}}else e.response&&"NON_EXISTENT_USER"==e.response.data.code&&(alert("잘못된 접근입니다. 다시 로그인해주세요"),document.cookie=encodeURIComponent("accessToken")+"=; expires=Thu, 01 JAN 1999 00:00:10 GMT",document.cookie=encodeURIComponent("refreshToken")+"=; expires=Thu, 01 JAN 1999 00:00:10 GMT",document.cookie=encodeURIComponent("id")+"=; expires=Thu, 01 JAN 1999 00:00:10 GMT",document.cookie=encodeURIComponent("sequence")+"=; expires=Thu, 01 JAN 1999 00:00:10 GMT",document.cookie=encodeURIComponent("group")+"=; expires=Thu, 01 JAN 1999 00:00:10 GMT",lc.push("/login"));return 0===rc&&cc&&cc(!1),Promise.reject(e)}));var pc=dc,gc=a(7790),mc=a.n(gc),kc=a(1612),hc={name:"App",data(){return{isLogin:null,currentGroup:null,loading:!1,unreadCount:0}},created(){this.isLogin=null!==this.$cookies.get("accessToken"),this.currentGroup=this.$cookies.get("group"),this.isLogin&&pc.get("/api/user/no-read",{headers:{Authorization:`Bearer ${this.$cookies.get("accessToken")}`}}).then((e=>{this.unreadCount=e.data.data})).catch((e=>{console.error("안 읽은 쪽지 수 가져오기 실패:",e)})),uc((e=>{this.loading=e}))},mounted(){this.stompClient&&this.stompClient.active||this.connectWebSocket()},beforeUnmount(){this.stompClient&&this.stompClient.deactivate()},methods:{isLoginChange(e){this.isLogin=e},groupSelect(e){this.currentGroup=e},connectWebSocket(){console.log("🔹 WebSocket 연결 시도...");const e=new(mc())(ts+"/ws");this.stompClient=kc.q.over(e);const s=this.$cookies.get("sequence");this.stompClient.connect({},(()=>{try{this.connected=!0,this.stompClient.subscribe(`/alarm/receive/${s}`,(e=>{const s=JSON.parse(e.body);this.unreadCount=s}))}catch(e){console.error("❌ WebSocket 연결 처리 중 오류 발생:",e)}}),(e=>{console.error("❌ WebSocket 연결 실패:",e)})),this.stompClient.activate()}},components:{Navbar:L}};const bc=(0,y.A)(hc,[["render",l]]);var vc=bc,fc=a(2251),yc=a.n(fc);const Cc=(0,t.Ef)(vc);Cc.use(lc).use(v["default"]),Cc.config.globalProperties.$http=w.A,Cc.use(yc()),Cc.$cookies.config("7d"),Cc.mount("#app"),w.A.defaults.baseURL=ts}},s={};function a(t){var o=s[t];if(void 0!==o)return o.exports;var i=s[t]={exports:{}};return e[t].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(s,t,o,i){if(!t){var n=1/0;for(d=0;d<e.length;d++){t=e[d][0],o=e[d][1],i=e[d][2];for(var l=!0,r=0;r<t.length;r++)(!1&i||n>=i)&&Object.keys(a.O).every((function(e){return a.O[e](t[r])}))?t.splice(r--,1):(l=!1,i<n&&(n=i));if(l){e.splice(d--,1);var c=o();void 0!==c&&(s=c)}}return s}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[t,o,i]}}(),function(){a.n=function(e){var s=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(s,{a:s}),s}}(),function(){a.d=function(e,s){for(var t in s)a.o(s,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:s[t]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={524:0};a.O.j=function(s){return 0===e[s]};var s=function(s,t){var o,i,n=t[0],l=t[1],r=t[2],c=0;if(n.some((function(s){return 0!==e[s]}))){for(o in l)a.o(l,o)&&(a.m[o]=l[o]);if(r)var d=r(a)}for(s&&s(t);c<n.length;c++)i=n[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},t=self["webpackChunkjamye_frontend"]=self["webpackChunkjamye_frontend"]||[];t.forEach(s.bind(null,0)),t.push=s.bind(null,t.push.bind(t))}();var t=a.O(void 0,[504],(function(){return a(1583)}));t=a.O(t)})();
//# sourceMappingURL=app.d07c6410.js.map